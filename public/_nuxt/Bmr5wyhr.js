import{O as F,c as Z,T as j,_ as H}from"./D8Osd5Ax.js";import{_ as W,a as q,b as J}from"./DfRdkKc3.js";import{_ as Q}from"./D9TSNOAg.js";import{_ as X,b as Y,c as ee,e as se,d as oe,f as te}from"./DkkQ8vn7.js";import{_ as ae}from"./BdQOAs7V.js";import{e as P,v as x,m as M,o as r,w as s,n as le,x as ne,l as v,r as R,i as re,c as b,a as o,A as g,b7 as ue,b as t,d as _,t as p,F as S,z as N,j as ce,s as ie}from"./LcRD3ia0.js";import{u as de}from"./BOGtf0gU.js";import{u as me}from"./QkXyQO2w.js";const _e=P({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(O){const u=O,l=x(()=>{const{class:c,...n}=u;return n}),f=F(l);return(c,n)=>(r(),M(v(j),ne(v(f),{class:v(Z)("px-2 py-1.5 text-sm font-semibold",c.inset&&"pl-8",u.class)}),{default:s(()=>[le(c.$slots,"default")]),_:3},16,["class"]))}}),pe=[{icon:"mage:dashboard-fill",name:"Сотрудники",url:"/workspaces",allowedRoles:["ADMIN","G","KD","DO","ROP","ROV","ROD","DP","RP"]},{icon:"mdi:deal",name:"Сделки",url:"/deals",allowedRoles:["ADMIN","G","KD","DO","ROP","MOP","ROV","MOV","LOGIST","MARKETER","ASSISTANT"]},{icon:"mdi:users",name:"Менеджеры",url:"/commercial",allowedRoles:["ADMIN","G","KD","DO","ROP","MOP","MOV"]},{icon:"mdi:users",name:"Отчеты",url:"/reports",allowedRoles:["ADMIN","G","KD","DO","ROP","MOP","MOV"]},{icon:"mdi:users",name:"Доски",url:"/boards",allowedRoles:["ADMIN","G","KD","DO","ROD","MOP","DIZ","DP","RP","ROV","MOV","ASSISTANT","LOGIST","MASTER","PACKER","FRZ","GUEST"]},{icon:"",name:"Выплаты",url:"/pays",allowedRoles:["ADMIN","G","KD","BUKH","DO","ROD","DP","ROV"]},{icon:"mdi:users",name:"Реклама",url:"/ad",allowedRoles:["ADMIN","G","KD","MARKETER"]},{icon:"mdi:users",name:"Статистика",url:"/statistics",allowedRoles:["ADMIN","G","KD","DO"]},{icon:"mdi:users",name:"ПланФакт",url:"/planfact",allowedRoles:["ADMIN","G","KD"]},{icon:"mdi:users",name:"Производство",url:"/production",allowedRoles:["ADMIN","G","KD","MASTER","DP","LOGIST","PACKER","FINANCIER","RP"]},{icon:"material-symbols:calculate",name:"Калькулятор",url:"/diz",allowedRoles:["ADMIN","G","KD","DO","ROP","MOP","ROD","DIZ"]},{icon:"mdi:users",name:"VK",url:"/vk/stat",allowedRoles:["ADMIN","G"]}],fe={class:"flex bg-white"},De={class:"flex items-center gap-3"},ve={class:"px-4 py-3 border-b border-neutral-600"},Re={class:"text-base font-semibold"},be={class:"flex flex-col"},ge={class:"hidden min-[900px]:flex gap-6 text-sm"},xe={class:"ml-auto flex items-center"},Me={class:"cursor-pointer"},Te=P({__name:"Sidebar",setup(O){const u=me(),l=de(),f=ce(),c=ue(),n=R("name"),h=R(""),d=R(!1),m=i=>c.path.startsWith(i),U=x(()=>l.user?.boards??[]),w=x(()=>{const i=l.user?.role?.shortName;return i?pe.filter(e=>!e.allowedRoles?.length||e.allowedRoles.includes(i)).filter(e=>e.name!=="Доски"||U.value.length>0):[]}),A=async()=>{u.set(!0);try{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userName"),localStorage.removeItem("avatarUrl"),l.clearUser(),f.push("/login"),ie("login")}finally{u.set(!1)}};return re(()=>{n.value=l.user?.fullName||"name",h.value=l.user?.avatarUrl||"",console.log()}),(i,e)=>{const T=H,y=q,I=Q,K=X,k=J,G=W,$=se,C=ee,E=_e,V=ae,L=te,B=oe,z=Y;return r(),b("div",fe,[o("header",{class:g(["font-medium text-black/70 w-full z-10 sticky top-0 h-14 flex items-center justify-start gap-3 px-4 min-[900px]:px-6",m("/boards")||m("/diz")?"bg-neutral-900 text-neutral-300":"bg-background"])},[o("div",null,[o("div",De,[t(G,{open:d.value,"onUpdate:open":e[2]||(e[2]=a=>d.value=a)},{default:s(()=>[t(y,{"as-child":""},{default:s(()=>[t(T,{variant:"ghost",size:"icon",class:"min-[900px]:hidden rounded-lg","aria-label":"Открыть меню"},{default:s(()=>e[3]||(e[3]=[_(" ☰ ",-1)])),_:1,__:[3]})]),_:1}),t(k,{side:"left",class:"w-[88%] max-w-sm p-0 bg-neutral-900 text-neutral-300"},{default:s(()=>[o("div",ve,[e[4]||(e[4]=o("div",{class:"text-sm text-neutral-200"},"Меню",-1)),o("div",Re,p(n.value),1)]),t(K,{class:"h-[calc(100vh-100px)]"},{default:s(()=>[o("nav",be,[(r(!0),b(S,null,N(w.value,(a,D)=>(r(),M(I,{key:D,to:a.url,class:g(["px-4 py-3 text-base border-b border-neutral-600 hover:bg-neutral-500",m(a.url)?"font-semibold underline":"text-neutral-300"]),onClick:e[0]||(e[0]=Oe=>d.value=!1)},{default:s(()=>[_(p(a.name),1)]),_:2},1032,["to","class"]))),128)),o("button",{class:"px-4 py-3 text-left text-red-600 hover:bg-red-50",onClick:e[1]||(e[1]=()=>{d.value=!1,A()})}," Выйти ")])]),_:1})]),_:1})]),_:1},8,["open"])]),o("nav",ge,[(r(!0),b(S,null,N(w.value,(a,D)=>(r(),M(I,{key:D,to:a.url,class:g(["hover:text-bold hover:underline",m(a.url)?"font-bold underline":""])},{default:s(()=>[_(p(a.name),1)]),_:2},1032,["to","class"]))),128))])]),o("div",xe,[t(z,null,{default:s(()=>[t(C,null,{default:s(()=>[o("div",Me,[t($,{"full-name":n.value,"avatar-url":h.value,hover:!1,size:"lg","hide-full-name":!0},null,8,["full-name","avatar-url"])])]),_:1}),t(B,{align:"end"},{default:s(()=>[t(E,null,{default:s(()=>[_(p(n.value),1)]),_:1}),t(V),t(L,null,{default:s(()=>[o("button",{class:"self-center cursor-pointer",onClick:A}," Выйти ")]),_:1})]),_:1})]),_:1})])],2)])}}});export{Te as _,_e as a};
