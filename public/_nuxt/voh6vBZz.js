import q from"./CNFJry-h.js";import{_ as J}from"./D8Osd5Ax.js";import{_ as K,a as P,b as Q,c as W,d as X}from"./B-kig6KZ.js";import{_ as Y}from"./BqmAL8DW.js";import{_ as Z}from"./Pvv-dh1L.js";import{_ as h}from"./BcuVElyA.js";import{_ as ee,a as te,b as le,c as oe,d as ae}from"./AeDsR3BR.js";import{_ as se}from"./CCJdEHHg.js";import{_ as ne}from"./mqOaxR0N.js";import{_ as de}from"./Dbg8U1qb.js";import{e as ie,g as ue,r as N,B as _e,c,o as v,b as t,l as s,H as me,w as l,a as d,d as n,F as w,z as $,t as D}from"./LcRD3ia0.js";const re={class:"flex flex-col gap-5 mt-3"},pe={class:"relative"},fe={class:"relative"},ce={class:"flex gap-2"},ve={class:"relative w-full"},ge={class:"relative w-full"},xe={class:"relative"},Ve={class:"relative"},Ue={class:"relative"},be={class:"relative"},ye={class:"flex justify-between w-full"},Me=ie({__name:"EditModal",props:{delivery:{}},emits:["delivery-edited"],setup(F,{emit:M}){const{$useApi:k}=ue(),S=F,C=["СДЕК","ПОЧТА РОССИИ","Яндекс","Балтийский курьер","Самовывоз","ТК КИТ","ПЭТ","Боксбери","Деловые линии"],T=["Создана","Отправлена","Вручена","Возврат"],B=["Бесплатно","Платно","Досыл"],o=N({...S.delivery}),_=N(!1),z=M,A=async()=>{try{console.log("213132",{...o.value}),await k.patch(`/deliveries/${S.delivery.id}`,{...o.value}),z("delivery-edited"),_.value=!1;return}catch(r){console.log(r)}};return console.log("editModal"),_e(()=>[o.value.method,o.value.track],async([r,e],[I,p])=>{if(r==="СДЕК"&&e){const i=await k.get("deliveries/checkTrack",{params:{track:e}});console.log("res",i.data),i.data?(o.value.price=i.data.price,o.value.status=i.data.status,o.value.date=i.data.send_date,o.value.deliveredDate=i.data.delivered_date):(o.value.price=0,o.value.status="Создана",o.value.date=new Date().toISOString().slice(0,10),o.value.deliveredDate="")}}),(r,e)=>{const I=q,p=J,i=P,E=X,H=Y,L=W,u=h,g=le,x=te,V=ae,U=se,b=oe,y=ee,f=ne,O=de,j=Z,G=Q,R=K;return v(),c("div",null,[t(R,{open:s(_),"onUpdate:open":e[9]||(e[9]=a=>me(_)?_.value=a:null)},{default:l(()=>[t(i,{"as-child":""},{default:l(()=>[t(p,{class:"h-5 w-5 px-0 py-2"},{default:l(()=>[t(I,{name:"mingcute:edit-line",color:"white",size:"15px"})]),_:1})]),_:1}),t(G,{class:"flex flex-col w-[400px]"},{default:l(()=>[t(L,null,{default:l(()=>[t(E,null,{default:l(()=>e[10]||(e[10]=[n("Редактировать доставку",-1)])),_:1,__:[10]}),t(H,null,{default:l(()=>e[11]||(e[11]=[n(' Заполни все поля и нажми "Сохранить" ',-1)])),_:1,__:[11]})]),_:1}),d("div",re,[d("div",pe,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[12]||(e[12]=[n("Способ доставки",-1)])),_:1,__:[12]}),t(y,{modelValue:s(o).method,"onUpdate:modelValue":e[0]||(e[0]=a=>s(o).method=a)},{default:l(()=>[t(x,null,{default:l(()=>[t(g)]),_:1}),t(b,null,{default:l(()=>[(v(),c(w,null,$(C,(a,m)=>t(U,{key:C[m]},{default:l(()=>[t(V,{value:a},{default:l(()=>[n(D(a),1)]),_:2},1032,["value"])]),_:2},1024)),64))]),_:1})]),_:1},8,["modelValue"])]),d("div",fe,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[13]||(e[13]=[n("Статус доставки",-1)])),_:1,__:[13]}),t(y,{modelValue:s(o).status,"onUpdate:modelValue":e[1]||(e[1]=a=>s(o).status=a)},{default:l(()=>[t(x,null,{default:l(()=>[t(g)]),_:1}),t(b,null,{default:l(()=>[(v(),c(w,null,$(T,(a,m)=>t(U,{key:T[m]},{default:l(()=>[t(V,{value:a},{default:l(()=>[n(D(a),1)]),_:2},1032,["value"])]),_:2},1024)),64))]),_:1})]),_:1},8,["modelValue"])]),d("div",ce,[d("div",ve,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[14]||(e[14]=[n("Дата отправки",-1)])),_:1,__:[14]}),t(f,{modelValue:s(o).date,"onUpdate:modelValue":e[2]||(e[2]=a=>s(o).date=a),type:"date"},null,8,["modelValue"])]),d("div",ge,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[15]||(e[15]=[n("Дата вручения",-1)])),_:1,__:[15]}),t(f,{modelValue:s(o).deliveredDate,"onUpdate:modelValue":e[3]||(e[3]=a=>s(o).deliveredDate=a),type:"date",min:s(o).date},null,8,["modelValue","min"])])]),d("div",xe,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[16]||(e[16]=[n("Оплата",-1)])),_:1,__:[16]}),t(y,{modelValue:s(o).type,"onUpdate:modelValue":e[4]||(e[4]=a=>s(o).type=a)},{default:l(()=>[t(x,null,{default:l(()=>[t(g)]),_:1}),t(b,null,{default:l(()=>[(v(),c(w,null,$(B,(a,m)=>t(U,{key:B[m]},{default:l(()=>[t(V,{value:a},{default:l(()=>[n(D(a),1)]),_:2},1032,["value"])]),_:2},1024)),64))]),_:1})]),_:1},8,["modelValue"])]),d("div",Ve,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[17]||(e[17]=[n("Стоимость доставки",-1)])),_:1,__:[17]}),t(f,{modelValue:s(o).price,"onUpdate:modelValue":e[5]||(e[5]=a=>s(o).price=a),type:"number",class:"col-span-3"},null,8,["modelValue"])]),d("div",Ue,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[18]||(e[18]=[n("Трек",-1)])),_:1,__:[18]}),t(f,{modelValue:s(o).track,"onUpdate:modelValue":e[6]||(e[6]=a=>s(o).track=a),class:"col-span-3"},null,8,["modelValue"])]),d("div",be,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[19]||(e[19]=[n("Доп. информация",-1)])),_:1,__:[19]}),t(O,{modelValue:s(o).description,"onUpdate:modelValue":e[7]||(e[7]=a=>s(o).description=a),placeholder:"Информация о доставке"},null,8,["modelValue"])])]),t(j,{class:"w-full"},{default:l(()=>[d("div",ye,[t(p,{onClick:e[8]||(e[8]=()=>_.value=!1)},{default:l(()=>e[20]||(e[20]=[n(" Отменить ",-1)])),_:1,__:[20]}),t(p,{onClick:A},{default:l(()=>e[21]||(e[21]=[n(" Сохранить ",-1)])),_:1,__:[21]})])]),_:1})]),_:1})]),_:1},8,["open"])])}}});export{Me as _};
