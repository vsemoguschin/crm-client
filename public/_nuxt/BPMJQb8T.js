import{_ as Qe}from"./Bye7C16d.js";import{_ as qe,a as Ye,b as Je}from"./D0Fd2yXn.js";import{_ as Ke,a as Xe}from"./CMmcwG__.js";import{_ as Ze}from"./CKaAbd73.js";import{_ as et,a as tt,m as st,b as at}from"./lEAy7NU2.js";import{_ as lt,a as ot,b as nt,c as rt,d as it}from"./JYeLPbKT.js";import{_ as ut}from"./DLLw9AXE.js";import{_ as dt}from"./D-8t_H8v.js";import{_ as ct,a as mt,b as ft}from"./BF3m7Vf0.js";import{_ as pt}from"./C8Hj2bae.js";import{_ as _t}from"./BHM8gn75.js";import{_ as yt}from"./D0zfKHPR.js";import{_ as vt,a as xt}from"./l1eRtAXP.js";import{_ as gt}from"./BhleEUCu.js";import{_ as bt}from"./BND4UK_1.js";import{_ as Pt}from"./CaiudRgb.js";import{_ as Mt}from"./C30fSUvl.js";import{a as Ft}from"./H5mehVEJ.js";import{_ as wt}from"./CHKwxJtM.js";import{_ as ht}from"./CDst0A0O.js";import{_ as kt}from"./DVdymwQ5.js";import{b as St,c as Dt,a as Tt,d as Ct,e as $t,_ as It}from"./C6vK2VYI.js";import{_ as Ut}from"./Dvvl7uzq.js";import{u}from"./Dt19OLxm.js";import{Q as Bt}from"./C_rPMSjE.js";import{g as Ne,e as jt,u as Vt,r as v,v as Be,B as je,i as Nt,c as p,a as l,b as t,w as s,H as oe,l as n,D as T,o as m,m as g,d as c,F as b,z as P,t as r,A as Ve}from"./BbheI0mw.js";import{u as we}from"./Bay1Kywl.js";import"./CaPtdwNj.js";import"./KSX9JOtw.js";import"./ZTyVILcU.js";import"./B9M8ggfK.js";import"./s39mgViW.js";import"./CJOOd8Dx.js";import"./D2GZmoDz.js";import"./BR3DQNok.js";import"./odSmgr3d.js";import"./DzJc7hp_.js";import"./CCknexPU.js";import"./oLxPQbNe.js";import"./Cxp-zkhu.js";import"./1Y235EgL.js";import"./DAmwS8V7.js";import"./DImM_Wqr.js";import"./_14b2CUj.js";import"./BlOpxHKb.js";import"./lvbecDJM.js";import"./cStEOrWd.js";import"./DiZ4QL0M.js";import"./CprHmdOe.js";import"./CssJESp-.js";import"./QXfa84Px.js";import"./Boz4PYjF.js";import"./ROxBBV8N.js";function At(){const{$useApi:he}=Ne(),F=we("groups:list",()=>[]),j=we("groups:loading",()=>!1),z=we("groups:error",()=>null);return{groups:F,fetchGroups:async(N=!1)=>{if(!N&&F.value.length)return F.value;j.value=!0,z.value=null;try{const{data:C}=await he.get("/groups/available");return F.value=C||[],F.value}catch(C){throw console.error("Failed to load groups",C),F.value=[],z.value="Не удалось загрузить список групп",C}finally{j.value=!1}},isGroupsLoading:j,groupsError:z}}const Gt={class:"relative h-screen hidden-scrollbar"},Lt={class:"w-full fixed z-[11]"},zt={class:"h-[full] flex p-4 gap-4 mx-[auto] max-w-[2048px] pt-18"},Wt={class:"flex flex-col gap-2 min-w-[1050px] w-full"},Ht={class:"flex gap-2"},Et={class:"w-[180px]"},Rt={key:0,class:"flex items-center"},Ot={class:"flex items-center gap-2 rounded-sm px-2 bg-slate-50"},Qt={class:"flex gap-2 w-full"},qt={class:"mt-[-47px]"},Yt={class:"flex flex-col gap-2"},Jt={key:0,class:"flex gap-2 flex-wrap"},Kt={class:"flex gap-2 flex-1"},Xt={class:"flex gap-2 flex-1"},Zt={class:"flex gap-1 mb-2"},es={class:"flex gap-2"},ts={class:"min-w-[490px] h-[calc(100vh-90px)]"},ss={class:"flex w-full justify-between items-center"},as={class:"flex items-center gap-2"},ls={class:"flex flex-col gap-5"},os={class:"gap-1 text-gray-600"},ns={class:"flex items-center border-b-1"},rs={class:"ml-auto"},is={class:"flex items-center border-b-1"},us={class:"ml-auto"},ds={class:"text-muted-foreground"},cs={class:"ml-auto"},ms={class:"gap-1 text-gray-600"},fs={class:"text-muted-foreground"},ps={class:"flex justify-between items-center mb-2"},_s={class:"gap-1 text-gray-600"},ys={class:"text-muted-foreground mr-auto"},vs={class:"gap-1 text-green-600/80"},xs={class:"ml-auto"},gs={class:"gap-1 text-gray-600"},bs={key:0},Ps={class:"ml-auto"},Ms={class:"text-muted-foreground mr-auto"},Fs=["title"],ws={class:"flex flex-col"},hs={class:"text-xs text-gray-500"},ks={class:"text-green-600"},Ss={class:"text-xs text-gray-500"},Ds={class:"text-green-600"},Ts=["title"],Cs=["title"],$s={class:"text-green-600"},Is={class:"text-xs text-gray-500"},Us={class:"text-green-600"},Bs={class:"flex flex-col gap-8"},js=["title"],Vs={class:"flex flex-col"},Ns={class:"text-xs text-gray-500"},As={class:"text-green-600"},Gs={class:"text-xs text-gray-500"},Ls={class:"text-green-600"},zs=["title"],Ws=["title"],Hs={class:"text-green-600"},Es={class:"text-xs text-gray-500"},Rs={class:"text-green-600"},Os={class:"flex flex-col"},Qs={class:"flex flex-col"},qs={class:"text-green-600"},Ys={key:1,class:"flex h-full items-center justify-center text-muted-foreground"},Js={key:0,class:"space-y-4"},Ks={class:"border rounded-md p-4 bg-green-50 border-green-200"},Xs={class:"flex justify-between items-center"},Zs={class:"font-bold text-xl text-green-600"},ea={class:"flex justify-between items-center"},ta={class:"font-bold text-xl text-green-600"},sa={class:"font-semibold text-lg mb-3"},aa={class:"grid grid-cols-2 gap-3 text-sm"},la={class:"flex justify-between items-center border-b pb-2"},oa={class:"font-medium"},na={class:"flex justify-between items-center border-b pb-2"},ra={class:"font-medium"},ia={class:"flex justify-between items-center border-b pb-2"},ua={class:"font-medium"},da={class:"flex justify-between items-center border-b pb-2"},ca={class:"font-medium text-green-600"},ma={class:"flex justify-between items-center border-b pb-2 col-span-2"},fa={class:"font-medium"},pa={key:1,class:"flex h-full items-center justify-center text-muted-foreground"},_a={key:0,class:"space-y-4"},ya={class:"border rounded-md p-4 bg-green-50 border-green-200"},va={class:"flex justify-between items-center"},xa={class:"font-bold text-xl text-green-600"},ga={class:"flex justify-between items-center"},ba={class:"font-bold text-xl text-green-600"},Pa={class:"font-semibold text-lg mb-3"},Ma={class:"grid grid-cols-2 gap-3 text-sm"},Fa={class:"flex justify-between items-center border-b pb-2"},wa={class:"font-medium"},ha={class:"flex justify-between items-center border-b pb-2"},ka={class:"font-medium"},Sa={class:"flex justify-between items-center border-b pb-2"},Da={class:"font-medium text-green-600"},Ta={class:"flex justify-between items-center border-b pb-2 col-span-2"},Ca={class:"font-medium"},$a={key:1,class:"flex h-full items-center justify-center text-muted-foreground"},$l=jt({__name:"index",setup(he){const{$useApi:F}=Ne(),{groups:j,fetchGroups:z}=At();Vt({title:"Менеджеры | Easy CRM"});const V=v(new Date().toISOString().slice(0,7)),N=v({month:new Date().getMonth(),year:new Date().getFullYear()}),C=v([{id:0,fullName:"None",workSpace:"None",group:"None",plan:0,totalSales:0,dealSales:0,dopSales:0,temp:0,dealsAmount:0,dopsAmount:0,averageBill:0,drr:0,calls:0,makets:0,maketsDayToDay:0,conversionMaketsToCalls:0,conversionMaketsDayToDayToCalls:0,dealsDayToDay:0,dealsDayToDayPrice:0,conversionDealsToCalls:0,dealsWithoutDesigners:0,dealsSalesWithoutDesigners:0,conversionMaketsToSales:0,redirectToMSG:0,totalSalary:0,pays:0,rem:0,dopPays:0,dealPays:0,bonusPercentage:0,bonus:0,shiftBonus:0,shift:0,dealsInfo:[],dopsInfo:[],topBonus:0,fired:!1,isIntern:!1,dealsInfoPrevMounth:[],dopsInfoPrevMounth:[],salaryPays:[],reports:[]}]),d=v({id:0,fullName:"None",workSpace:"None",group:"None",plan:0,totalSales:0,dealSales:0,dopSales:0,temp:0,dealsAmount:0,dopsAmount:0,averageBill:0,drr:0,calls:0,makets:0,maketsDayToDay:0,conversionMaketsToCalls:0,conversionMaketsDayToDayToCalls:0,dealsDayToDay:0,dealsDayToDayPrice:0,conversionDealsToCalls:0,dealsWithoutDesigners:0,dealsSalesWithoutDesigners:0,conversionMaketsToSales:0,redirectToMSG:0,totalSalary:0,pays:0,rem:0,dopPays:0,dealPays:0,bonusPercentage:0,bonus:0,shiftBonus:0,shift:0,dealsInfo:[],dopsInfo:[],topBonus:0,fired:!1,isIntern:!1,salaryPays:[],dealsInfoPrevMounth:[],dopsInfoPrevMounth:[],reports:[],dodatas:[],ropdatas:[]}),ke=v([{label:"План",value:"10000"}]),Y=v(!1),ne=v(),Ae=v([{title:"Сумма продаж",value:"0"}]),M=v("all"),W=v([]),J=v(!1),Ge=Be(()=>J.value?W.value:W.value.filter(o=>!o.fired)),K=async o=>{const{data:e}=await F.get(`/deals/${o}`);ne.value=e,Y.value=!0},re=v([{label:"ДРР ",value:"32"}]),H=v([{label:"ЗП",value:"0"}]),Se=v([]),ie=v([]),De=v([]),Te=v([]),Ce=v([]),$e=v([]),Ie=async()=>{try{const o=M.value&&M.value!=="all"?Number(M.value):void 0,e={period:V.value};o!==void 0&&(e.groupId=o);const{data:_}=await F.get("/commercial-datas",{params:e});return W.value=_||[],W.value.length&&await Ue(W.value[0].id),_}catch(o){console.log(o)}},Le=async()=>{try{const o=M.value&&M.value!=="all"?M.value.trim():void 0,e=o?`/commercial-datas/tops/${o}`:"/commercial-datas/tops",{data:_}=await F.get(e,{params:{period:V.value}}),w=_?.vkTop;return ie.value=w?.topTotalSales??[],De.value=w?.topDopSales??[],Te.value=w?.topDimmerSales??[],Ce.value=w?.topSalesWithoutDesigners??[],$e.value=w?.topConversionDayToDay??[],Se.value=_?.b2bTop??_?.avitoTop??[],_}catch(o){console.log(o)}},Ue=async o=>{try{const{data:i}=await F.get(`/commercial-datas/${o}`,{params:{period:V.value}});d.value=i}catch(i){console.log(i)}const{workSpace:e,totalSales:_,dealSales:w,dopSales:G,temp:ue,dealsAmount:de,dopsAmount:ce,factAmount:me,fact:fe,factPercentage:pe,factBonus:_e}=d.value;ke.value=[{label:"Общая сумма заказов",value:u(_)+"₽"},{label:"Темп",value:u(ue)+"₽"},{label:`Заказы(${de})`,value:u(w)+"₽"},{label:`Допы(${ce})`,value:u(G)+"₽"},{label:`Факт(${me})`,value:u(fe)+"₽"}];const{drr:Z,averageBill:ye,calls:ve,makets:xe,maketsDayToDay:ee,dealsDayToDay:h,dealsDayToDayPrice:te,conversionDealsToCalls:ge,dealsWithoutDesigners:k,dealsSalesWithoutDesigners:$,conversionMaketsToCalls:E,conversionMaketsDayToDayToCalls:R,conversionMaketsToSales:O,redirectToMSG:se}=d.value;re.value=[{label:"Средний чек",value:u(ye)+"₽"},{label:"ДРР",value:Z+"%"},{label:"Заявки",value:ve},{label:"% из заявки в продажу",value:ge+"%"},{label:"% из заявки в макет",value:E+"%"},{label:"Макеты",value:xe},{label:"% из макета в продажу",value:O+"%"},{label:"Макеты день в день",value:ee},{label:"% из заявки в макет день в день",value:R+"%"},{label:`Продажи день в день(${h})`,value:u(te)+"₽"},{label:`Без дизайнера(${k})`,value:u($)+"₽"}],e==="B2B"&&re.value.push({label:"Переходы в мессенджер",value:se});const{totalSalary:L}=d.value,{bonusPercentage:ae,bonus:be,shift:Pe,shiftBonus:Me,pays:Q,dopPays:le,dealPays:S,topBonus:I,salaryCorrections:y,prevPeriodsDealsPays:x,prevPeriodsDopsPays:U,dopsPercentage:f,groupPlanBonus:B,dodatas:D,ropdatas:q}=d.value,a=L-Q;H.value=[{label:"ЗП",value:u(+L.toFixed(2))+"₽"},{label:"Выплаты",value:u(Q)+"₽"},{label:"Остаток",value:u(+a.toFixed(2))+"₽"},{label:`За заказы(${(ae*100).toFixed(1)}%)`,value:u(S)+"₽"},{label:e==="B2B"?"За допы(10%)":`За допы(${(f*100).toFixed(1)}%)`,value:u(le)+"₽"},{label:`С факта(${pe}%)`,value:u(_e)+"₽"},{label:`Смены(${Pe})`,value:u(Me.toFixed(2))+"₽"},{label:"Премия",value:u(be)+"₽"},{label:"ТопБонус",value:u(I)+"₽"},{label:"За выполнение плана",value:u(B)+"₽"},{label:"Остатки",value:u(+(x+U).toFixed(2))+"₽"}],D&&D.length>0&&H.value.push({label:"ЗП директора",value:u(D.reduce((i,Fe)=>i+Fe.toSalary,0))+"₽"}),q&&q.length>0&&H.value.push({label:"ЗП ропа",value:u(q.reduce((i,Fe)=>i+Fe.toSalary,0))+"₽"})},ze=o=>{if(!o)return"";const[e]=o.split("T"),[_,w,G]=e?.split("-")??[];return!_||!w||!G?e||o:`${G.padStart(2,"0")}.${w.padStart(2,"0")}.${_}`},X=Be(()=>(d.value?.reports??[]).reduce((e,_)=>(e.calls+=_?.calls??0,e.makets+=_?.makets??0,e.maketsDayToDay+=_?.maketsDayToDay??0,e.shiftCost+=Number(_?.shiftCost??0),e),{calls:0,makets:0,maketsDayToDay:0,shiftCost:0})),We=(o,e)=>{C.value.find(_=>_.id===e).plan=o,d.value.plan=o,C.value=[...C.value]},He=async o=>{try{await F.delete(`/salary-pay/correction/${o}`),await A()}catch(e){console.log(e)}},Ee=async o=>{try{await F.delete("/salary-pay/"+o),await A()}catch(e){console.log(e)}},Re=async o=>{try{await F.patch(`/managers/${d.value.id}/change-intern-status`,{isIntern:o})}catch(e){d.value.isIntern=!o,console.log(e)}},A=async()=>{M.value==="all"?await Ie():await Promise.all([Ie(),Le()])};je(M,async()=>{await A()}),je(N,async o=>{const{month:e,year:_}=o;V.value=new Date(_,e+1).toISOString().slice(0,7),await A()});const Oe=async o=>{await Re(o)};return Nt(async()=>{const o=await z();if(o.length&&M.value&&M.value!=="all"&&!o.some(_=>String(_.id)===M.value)){M.value=String(o[0].id);return}await A()}),(o,e)=>{const _=Qe,w=Ye,G=Xe,ue=Ze,de=Ke,ce=et,me=Je,fe=qe,pe=nt,_e=ot,Z=it,ye=ut,ve=rt,xe=lt,ee=dt,h=ft,te=mt,ge=tt,k=pt,$=_t,E=gt,R=xt,O=vt,se=bt,L=yt,ae=ct,be=Mt,Pe=Ft,Me=at,Q=wt,le=ht,S=kt,I=Ut,y=Ct,x=Tt,U=Dt,f=It,B=$t,D=St,q=Pt;return m(),p("div",Gt,[l("div",Lt,[t(_,{page:"Менеджеры"})]),l("div",zt,[t(fe,{open:n(Y),"onUpdate:open":e[0]||(e[0]=a=>oe(Y)?Y.value=a:null)},{default:s(()=>[t(w,{class:"hidden"}),t(me,{class:"p-0"},{default:s(()=>[t(de,{class:"hidden"},{default:s(()=>[t(G),t(ue)]),_:1}),(m(),g(ce,{key:n(ne).id,deal:n(ne)},null,8,["deal"]))]),_:1})]),_:1},8,["open"]),l("div",Wt,[l("div",Ht,[l("div",Et,[t(n(Bt),{modelValue:n(N),"onUpdate:modelValue":e[1]||(e[1]=a=>oe(N)?N.value=a:null),"month-picker":"","auto-apply":"",locale:"ru","select-text":"Готово","cancel-text":"Закрыть",clearable:!1},null,8,["modelValue"])]),n(j).length?(m(),p("div",Rt,[t(xe,{modelValue:n(M),"onUpdate:modelValue":e[2]||(e[2]=a=>oe(M)?M.value=a:null)},{default:s(()=>[t(_e,{class:"w-[220px]"},{default:s(()=>[t(pe,{placeholder:"Выберите группу"})]),_:1}),t(ve,null,{default:s(()=>[t(ye,null,{default:s(()=>[t(Z,{value:"all"},{default:s(()=>e[7]||(e[7]=[c(" Все ",-1)])),_:1,__:[7]}),(m(!0),p(b,null,P(n(j),a=>(m(),g(Z,{key:a.id,value:String(a.id)},{default:s(()=>[c(r(a.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])])):T("",!0),l("div",Ot,[e[8]||(e[8]=l("span",{class:"text-sm text-muted-foreground"},"Показать уволенных",-1)),t(ee,{checked:n(J),"onUpdate:checked":e[3]||(e[3]=a=>oe(J)?J.value=a:null)},null,8,["checked"])])]),l("div",Qt,[t(ae,{"default-value":"table",class:"w-full"},{default:s(()=>[t(te,{class:""},{default:s(()=>[t(h,{value:"table"},{default:s(()=>e[9]||(e[9]=[c("Таблица",-1)])),_:1,__:[9]}),t(h,{value:"top"},{default:s(()=>e[10]||(e[10]=[c("Топ",-1)])),_:1,__:[10]}),t(h,{value:"info"},{default:s(()=>e[11]||(e[11]=[c("Показатели",-1)])),_:1,__:[11]})]),_:1}),t(k,{value:"table"},{default:s(()=>[l("div",qt,[t(ge,{columns:n(st),data:Ge.value,"current-manager-id":n(d).id,onManagerClicked:Ue},null,8,["columns","data","current-manager-id"])])]),_:1}),t(k,{value:"top"},{default:s(()=>[l("div",Yt,[n(ie).length?(m(),p("div",Jt,[l("div",Kt,[t($,{class:"min-w-[300px]",managers:n(ie),title:"Топ по выручке",after:"₽"},null,8,["managers"]),t($,{class:"min-w-[300px]",managers:n(De),title:"Топ по доп.продажам",after:"₽"},null,8,["managers"])]),l("div",Xt,[t($,{class:"min-w-[300px]",managers:n(Te),title:"Топ по диммерам",after:"₽"},null,8,["managers"]),t($,{class:"min-w-[300px]",managers:n(Ce),title:"Топ продаж без дизов",after:"₽"},null,8,["managers"]),t($,{class:"min-w-[300px]",managers:n($e),title:"Топ конверсия",after:"%"},null,8,["managers"])])])):T("",!0),l("div",Zt,[(m(!0),p(b,null,P(n(Se),(a,i)=>(m(),g(L,{key:i,class:"min-w-[150px] grow"},{default:s(()=>[t(O,{class:"p-3 pb-2"},{default:s(()=>[t(E,null,{default:s(()=>[c(r(a.category),1)]),_:2},1024),t(R,{class:"text-3xl font-semibold whitespace-nowrap"},{default:s(()=>[c(r(a.user),1)]),_:2},1024)]),_:2},1024),t(se,null,{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.sales)+(a.category==="Топ конверсия"?"%":"₽")),1)]),_:2},1024)]),_:2},1024))),128))])])]),_:1}),t(k,{value:"info"},{default:s(()=>[l("div",es,[(m(!0),p(b,null,P(n(Ae),a=>(m(),g(L,{key:a.title,class:"w-full grow"},{default:s(()=>[t(O,{class:"py-1 px-3"},{default:s(()=>[t(E,null,{default:s(()=>[c(r(a.title),1)]),_:2},1024),t(R,{class:"text-2xl font-semibold whitespace-nowrap"},{default:s(()=>[c(r(a.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})])]),l("div",ts,[t(L,{class:"h-full rounded-md overflow-hidden"},{default:s(()=>[t(O,{class:"bg-gray-100 mb-2 p-3"},{default:s(()=>[t(R,null,{default:s(()=>[c(r(n(d)?.fullName),1)]),_:1}),t(E,null,{default:s(()=>[l("div",ss,[l("span",null,r(n(d)?.group),1),l("div",as,[t(be,null,{default:s(()=>e[12]||(e[12]=[c("Стажер",-1)])),_:1,__:[12]}),t(ee,{checked:n(d).isIntern,"onUpdate:checked":[e[4]||(e[4]=a=>n(d).isIntern=a),Oe]},null,8,["checked"])])])]),_:1})]),_:1}),t(se,{class:"p-2"},{default:s(()=>[t(ae,{"default-value":"info"},{default:s(()=>[t(te,{class:"flex w-full"},{default:s(()=>[t(h,{value:"info",class:"w-full"},{default:s(()=>e[13]||(e[13]=[c(" Информация ",-1)])),_:1,__:[13]}),t(h,{value:"deals",class:"w-full"},{default:s(()=>e[14]||(e[14]=[c(" Заказы ",-1)])),_:1,__:[14]}),t(h,{value:"dops",class:"w-full"},{default:s(()=>e[15]||(e[15]=[c(" Допы ",-1)])),_:1,__:[15]}),t(h,{value:"remainders",class:"w-full"},{default:s(()=>e[16]||(e[16]=[c(" Остатки ",-1)])),_:1,__:[16]}),t(h,{value:"reports",class:"w-full"},{default:s(()=>e[17]||(e[17]=[c(" Отчеты ",-1)])),_:1,__:[17]}),n(d).dodatas?.length?(m(),g(h,{key:0,value:"do",class:"w-full"},{default:s(()=>e[18]||(e[18]=[c(" ДО ",-1)])),_:1,__:[18]})):T("",!0),n(d).ropdatas?.length?(m(),g(h,{key:1,value:"rop",class:"w-full"},{default:s(()=>e[19]||(e[19]=[c(" РОП ",-1)])),_:1,__:[19]})):T("",!0)]),_:1}),t(k,{value:"info",class:""},{default:s(()=>[t(S,{class:"h-[calc(100vh-250px)] px-5 pb-5"},{default:s(()=>[l("div",ls,[l("div",null,[e[22]||(e[22]=l("div",{class:"font-semibold"},"Основная информация",-1)),l("ul",os,[l("div",ns,[(m(),g(Pe,{key:n(d).id,plan:n(d).plan,period:n(V),"manager-id":n(d).id,manager:n(d).fullName,onIsPlanSet:e[5]||(e[5]=a=>We(a,n(d).id))},null,8,["plan","period","manager-id","manager"])),e[20]||(e[20]=l("span",{class:"ml-2"},"План",-1)),l("span",rs,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(n(d).plan)+"₽"),1)]),l("li",is,[e[21]||(e[21]=l("span",{class:"text-muted-foreground"}," Остаток до плана ",-1)),l("span",us,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(n(d).plan-n(d).totalSales)+"₽"),1)]),(m(!0),p(b,null,P(n(ke),(a,i)=>(m(),p("li",{key:i,class:"flex items-center border-b-1"},[l("span",ds,r(a.label),1),l("span",cs,r(a.value),1)]))),128))])]),l("div",null,[e[23]||(e[23]=l("div",{class:"font-semibold"},"Показатели",-1)),l("ul",ms,[(m(!0),p(b,null,P(n(re),(a,i)=>(m(),p("li",{key:i,class:"flex items-center justify-between border-b-1"},[l("span",fs,r(a.label),1),l("span",null,r(a.value),1)]))),128))])]),l("div",null,[l("div",ps,[e[24]||(e[24]=l("div",{class:"font-semibold"},"Зарплата",-1)),t(Me,{"user-id":n(d).id,onCorrectionCreated:e[6]||(e[6]=a=>{A()})},null,8,["user-id"])]),l("ul",_s,[(m(!0),p(b,null,P(n(H).slice(0,3),(a,i)=>(m(),p("li",{key:i,class:"flex items-center w-full"},[l("span",ys,r(a.label),1),l("span",null,r(a.value),1)]))),128))]),t(Q,{class:"mb-2"}),l("ul",vs,[(m(!0),p(b,null,P(n(d).salaryPays,a=>(m(),p("li",{key:a.id,class:Ve(["flex font-semibold"])},[t(le,{class:"h-5 w-5 px-0 mr-1",onClick:i=>Ee(a.id)},{default:s(()=>e[25]||(e[25]=[c(" - ",-1)])),_:2,__:[25]},1032,["onClick"]),e[26]||(e[26]=l("span",null," Выплата ",-1)),l("span",xs,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.price)+"₽"),1)]))),128))]),l("ul",gs,[(m(!0),p(b,null,P(n(d).salaryCorrections,a=>(m(),p("li",{key:a.id,class:Ve(["flex",a.type==="Прибавка"?"text-green-500":"text-red-500"])},[t(le,{class:"h-5 w-5 px-0 mr-1",onClick:i=>He(a.id)},{default:s(()=>e[27]||(e[27]=[c(" - ",-1)])),_:2,__:[27]},1032,["onClick"]),l("span",null,r(a.type),1),a.description?(m(),p("span",bs,r("("+a.description+")"),1)):T("",!0),l("span",Ps,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.price)+"₽"),1)],2))),128))]),t(Q,{class:"my-1"}),l("ul",null,[(m(!0),p(b,null,P(n(H).slice(3),(a,i)=>(m(),p("li",{key:i,class:"flex items-center w-full"},[l("span",Ms,r(a.label),1),l("span",null,r(a.value),1)]))),128))])])])]),_:1})]),_:1}),t(k,{value:"deals"},{default:s(()=>[t(S,{class:"relative h-[calc(100vh-270px)] px-2"},{default:s(()=>[n(d)?.dealsInfo?.length?(m(),g(D,{key:0},{default:s(()=>[t(I),t(U,null,{default:s(()=>[t(x,{class:"bg-gray-100"},{default:s(()=>[t(y,{class:"text-left text-xl w-[160px] max-w-[160px]"},{default:s(()=>e[28]||(e[28]=[c(" Заказы ",-1)])),_:1,__:[28]}),t(y,{class:"text-center"},{default:s(()=>e[29]||(e[29]=[c("Доля",-1)])),_:1,__:[29]}),t(y,{class:"text-center"},{default:s(()=>e[30]||(e[30]=[c("Оплачено",-1)])),_:1,__:[30]}),t(y,{class:"text-center"},{default:s(()=>e[31]||(e[31]=[c("В ЗП",-1)])),_:1,__:[31]})]),_:1})]),_:1}),t(B,null,{default:s(()=>[(m(!0),p(b,null,P(n(d).dealsInfo,(a,i)=>(m(),g(x,{key:i,class:"text-center cursor-pointer",onClick:async()=>await K(a.id)},{default:s(()=>[t(f,{class:"text-left w-[160px] max-w-[160px] pr-2"},{default:s(()=>[l("span",{class:"block truncate",title:a.title},r(a.title),9,Fs)]),_:2},1024),t(f,{class:"font-medium"},{default:s(()=>[l("div",ws,[l("span",null,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.dealerPrice)+"₽"),1),l("span",hs,[l("span",null,r(a.dealerPart)+"%",1),l("span",null," от "+r(a.dealPrice),1)])])]),_:2},1024),t(f,{class:"font-medium"},{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.paid)+"₽"),1)]),_:2},1024),t(f,{class:"font-medium flex flex-col"},{default:s(()=>[l("span",ks,r("+"+("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+a.toSalary.toFixed(2))+"₽"),1),l("span",Ss,r((a.bonusPercentage*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),t(x,{class:"text-center font-bold bg-zinc-100"},{default:s(()=>[t(f,{class:"text-left w-[160px] max-w-[160px] pr-2"},{default:s(()=>[e[32]||(e[32]=l("span",null,"ИТОГО",-1)),l("span",null,r("("+n(d).dealsInfo.length+")"),1)]),_:1,__:[32]}),t(f,null,{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(n(d).dealsInfo.reduce((a,i)=>a+i.dealerPrice,0))+"₽"),1)]),_:1}),t(f,{class:"text-center"},{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+n(d).dealsInfo.reduce((a,i)=>a+i.paid,0).toFixed(2))+"₽"),1)]),_:1}),t(f,{class:"text-center"},{default:s(()=>[l("span",Ds,r("+"+("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+n(d).dealsInfo.reduce((a,i)=>a+i.toSalary,0).toFixed(2))+"₽"),1)]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1}),t(k,{value:"dops"},{default:s(()=>[t(S,{class:"relative h-[calc(100vh-270px)] px-2"},{default:s(()=>[n(d)?.dopsInfo?.length?(m(),g(D,{key:0},{default:s(()=>[t(I),t(U,null,{default:s(()=>[t(x,{class:"bg-gray-100"},{default:s(()=>[t(y,{class:"text-left text-xl w-[160px] max-w-[160px]"},{default:s(()=>e[33]||(e[33]=[c(" Допы ",-1)])),_:1,__:[33]}),t(y,{class:"text-center"},{default:s(()=>e[34]||(e[34]=[c("Стоимость",-1)])),_:1,__:[34]}),t(y,{class:"text-center"},{default:s(()=>e[35]||(e[35]=[c("Оплачено",-1)])),_:1,__:[35]}),t(y,{class:"text-center"},{default:s(()=>e[36]||(e[36]=[c("В ЗП",-1)])),_:1,__:[36]})]),_:1})]),_:1}),t(B,null,{default:s(()=>[(m(!0),p(b,null,P(n(d).dopsInfo,(a,i)=>(m(),g(x,{key:i,class:"text-center cursor-pointer",onClick:async()=>await K(a.dealId)},{default:s(()=>[t(f,{class:"text-left w-[160px] max-w-[160px] pr-2"},{default:s(()=>[l("span",{class:"block truncate",title:a.dealTitle},r(a.dealTitle),9,Ts),l("span",{class:"block text-xs text-gray-500 truncate",title:a.title},r(a.title),9,Cs)]),_:2},1024),t(f,{class:"font-medium"},{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.dopPrice)+"₽"),1)]),_:2},1024),t(f,{class:"font-medium"},{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.paid)+"₽"),1)]),_:2},1024),t(f,{class:"font-medium flex flex-col"},{default:s(()=>[l("span",$s,r("+"+("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+a.toSalary.toFixed(2))+"₽"),1),l("span",Is,r((a.bonusPercentage*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),t(x,{class:"text-center font-bold bg-zinc-100"},{default:s(()=>[t(f,{class:"text-left w-[160px] max-w-[160px] pr-2"},{default:s(()=>[c(" ИТОГО"+r("("+n(d).dopsInfo.length+")"),1)]),_:1}),t(f,null,{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(n(d).dopsInfo.reduce((a,i)=>a+i.dopPrice,0))+"₽"),1)]),_:1}),t(f,null,{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+n(d).dopsInfo.reduce((a,i)=>a+i.paid,0).toFixed())+"₽"),1)]),_:1}),t(f,{class:"text-center"},{default:s(()=>[l("span",Us,r("+"+("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+n(d).dopsInfo.reduce((a,i)=>a+i.toSalary,0).toFixed(2))+"₽"),1)]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1}),t(k,{value:"remainders"},{default:s(()=>[t(S,{class:"relative h-[calc(100vh-270px)] px-2"},{default:s(()=>[l("div",Bs,[n(d)?.dealsInfoPrevMounth?.length?(m(),g(D,{key:0},{default:s(()=>[t(I),t(U,null,{default:s(()=>[t(x,{class:"bg-gray-100"},{default:s(()=>[t(y,{class:"text-left text-xl w-[160px] max-w-[160px]"},{default:s(()=>e[37]||(e[37]=[c(" Заказы ",-1)])),_:1,__:[37]}),t(y,{class:"text-center"},{default:s(()=>e[38]||(e[38]=[c("Доля",-1)])),_:1,__:[38]}),t(y,{class:"text-center"},{default:s(()=>e[39]||(e[39]=[c("Оплачено",-1)])),_:1,__:[39]}),t(y,{class:"text-center"},{default:s(()=>e[40]||(e[40]=[c("В ЗП",-1)])),_:1,__:[40]})]),_:1})]),_:1}),t(B,null,{default:s(()=>[(m(!0),p(b,null,P(n(d).dealsInfoPrevMounth,(a,i)=>(m(),g(x,{key:i,class:"text-center cursor-pointer items-center",onClick:async()=>await K(a.id)},{default:s(()=>[t(f,{class:"text-left w-[160px] max-w-[160px] pr-2"},{default:s(()=>[l("span",{class:"block truncate",title:a.title},r(a.title),9,js)]),_:2},1024),t(f,{class:"font-medium"},{default:s(()=>[l("div",Vs,[l("span",null,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.dealerPrice)+"₽"),1),l("span",Ns,[l("span",null,r(a.dealerPart)+"%",1),l("span",null," от "+r(a.dealPrice),1)])])]),_:2},1024),t(f,{class:"font-medium"},{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.paid)+"₽"),1)]),_:2},1024),t(f,{class:"font-medium flex flex-col"},{default:s(()=>[l("span",As,r("+"+("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+a.toSalary.toFixed(2))+"₽"),1),l("span",Gs,r((a.bonusPercentage*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),t(x,{class:"text-center font-bold bg-zinc-100"},{default:s(()=>[t(f,{class:"text-left w-[160px] max-w-[160px] pr-2"},{default:s(()=>[e[41]||(e[41]=l("span",null,"ИТОГО",-1)),l("span",null,r("("+n(d).dealsInfoPrevMounth.length+")"),1)]),_:1,__:[41]}),t(f,null,{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(n(d).dealsInfoPrevMounth.reduce((a,i)=>a+i.dealerPrice,0))+"₽"),1)]),_:1}),t(f,{class:"text-center"},{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+n(d).dealsInfoPrevMounth.reduce((a,i)=>a+i.paid,0).toFixed(2))+"₽"),1)]),_:1}),t(f,{class:"text-center"},{default:s(()=>[l("span",Ls,r("+"+("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+n(d).dealsInfoPrevMounth.reduce((a,i)=>a+i.toSalary,0).toFixed(2))+"₽"),1)]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0),n(d)?.dopsInfoPrevMounth?.length?(m(),g(D,{key:1},{default:s(()=>[t(I),t(U,null,{default:s(()=>[t(x,{class:"bg-gray-100"},{default:s(()=>[t(y,{class:"text-left text-xl w-[160px] max-w-[160px]"},{default:s(()=>e[42]||(e[42]=[c(" Допы ",-1)])),_:1,__:[42]}),t(y,{class:"text-center"},{default:s(()=>e[43]||(e[43]=[c("Стоимость",-1)])),_:1,__:[43]}),t(y,{class:"text-center"},{default:s(()=>e[44]||(e[44]=[c("Оплачено",-1)])),_:1,__:[44]}),t(y,{class:"text-center"},{default:s(()=>e[45]||(e[45]=[c("В ЗП",-1)])),_:1,__:[45]})]),_:1})]),_:1}),t(B,null,{default:s(()=>[(m(!0),p(b,null,P(n(d).dopsInfoPrevMounth,(a,i)=>(m(),g(x,{key:i,class:"text-center cursor-pointer",onClick:async()=>await K(a.dealId)},{default:s(()=>[t(f,{class:"text-left w-[160px] max-w-[160px] pr-2"},{default:s(()=>[l("span",{class:"block truncate",title:a.dealTitle},r(a.dealTitle),9,zs),l("span",{class:"block text-xs text-gray-500 truncate",title:a.title},r(a.title),9,Ws)]),_:2},1024),t(f,{class:"font-medium"},{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.dopPrice)+"₽"),1)]),_:2},1024),t(f,{class:"font-medium"},{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.paid)+"₽"),1)]),_:2},1024),t(f,{class:"font-medium flex flex-col"},{default:s(()=>[l("span",Hs,r("+"+("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+a.toSalary.toFixed(2))+"₽"),1),l("span",Es,r((a.bonusPercentage*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),t(x,{class:"text-center font-bold bg-zinc-100"},{default:s(()=>[t(f,{class:"text-left w-[160px] max-w-[160px] pr-2"},{default:s(()=>[c(" ИТОГО"+r("("+n(d).dopsInfoPrevMounth.length+")"),1)]),_:1}),t(f,null,{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(n(d).dopsInfoPrevMounth.reduce((a,i)=>a+i.dopPrice,0))+"₽"),1)]),_:1}),t(f,null,{default:s(()=>[c(r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+n(d).dopsInfoPrevMounth.reduce((a,i)=>a+i.paid,0).toFixed())+"₽"),1)]),_:1}),t(f,{class:"text-center"},{default:s(()=>[l("span",Rs,r("+"+("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+n(d).dopsInfoPrevMounth.reduce((a,i)=>a+i.toSalary,0).toFixed(2))+"₽"),1)]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0)])]),_:1})]),_:1}),t(k,{value:"reports"},{default:s(()=>[t(S,{class:"relative h-[calc(100vh-270px)] px-2"},{default:s(()=>[n(d)?.reports?.length?(m(),g(D,{key:0},{default:s(()=>[t(I),t(U,null,{default:s(()=>[t(x,{class:"bg-gray-100"},{default:s(()=>[t(y,{class:"text-left w-[160px] max-w-[160px]"},{default:s(()=>e[46]||(e[46]=[c(" Дата ",-1)])),_:1,__:[46]}),t(y,{class:"text-center"},{default:s(()=>e[47]||(e[47]=[c("Заявки",-1)])),_:1,__:[47]}),t(y,{class:"text-center"},{default:s(()=>e[48]||(e[48]=[l("div",{class:"flex flex-col"},[l("span",null," Макеты/ "),l("span",null," день в день ")],-1)])),_:1,__:[48]}),t(y,{class:"text-center"},{default:s(()=>e[49]||(e[49]=[c("Стоимость смены",-1)])),_:1,__:[49]})]),_:1})]),_:1}),t(B,null,{default:s(()=>[(m(!0),p(b,null,P(n(d).reports,(a,i)=>(m(),g(x,{key:a.date+"-"+i,class:"text-center"},{default:s(()=>[t(f,{class:"text-left w-[160px] max-w-[160px]"},{default:s(()=>[c(r(ze(a.date)),1)]),_:2},1024),t(f,{class:"font-medium"},{default:s(()=>[c(r(a.calls),1)]),_:2},1024),t(f,{class:"font-medium"},{default:s(()=>[l("div",Os,[l("span",null,r(a.makets)+"/"+r(a.maketsDayToDay),1)])]),_:2},1024),t(f,{class:"font-medium text-green-600"},{default:s(()=>[c(" +"+r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.shiftCost??0)+"₽"),1)]),_:2},1024)]),_:2},1024))),128)),t(x,{class:"text-center font-semibold bg-zinc-100"},{default:s(()=>[t(f,{class:"text-left w-[160px] max-w-[160px]"},{default:s(()=>e[50]||(e[50]=[c(" ИТОГО ",-1)])),_:1,__:[50]}),t(f,{class:"font-medium"},{default:s(()=>[c(r(X.value.calls),1)]),_:1}),t(f,{class:"font-medium"},{default:s(()=>[l("div",Qs,[l("span",null,r(X.value.makets)+"/"+r(X.value.maketsDayToDay),1)])]),_:1}),t(f,{class:"font-medium"},{default:s(()=>[l("span",qs,r("+"+("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(X.value.shiftCost??0)+"₽"),1)]),_:1})]),_:1})]),_:1})]),_:1})):(m(),p("div",Ys," Нет отчетов "))]),_:1})]),_:1}),t(k,{value:"do"},{default:s(()=>[t(S,{class:"relative h-[calc(100vh-270px)] px-2"},{default:s(()=>[n(d).dodatas?.length?(m(),p("div",Js,[l("div",Ks,[l("div",Xs,[e[51]||(e[51]=l("span",{class:"font-semibold text-lg"},"Итого в ЗП:",-1)),l("span",Zs,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+n(d).dodatas.reduce((a,i)=>a+i.toSalary,0).toFixed(2))+"₽"),1)]),l("div",ea,[e[52]||(e[52]=l("span",{class:"font-semibold text-lg"},"Итого оплат (факт):",-1)),l("span",ta,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(+n(d).dodatas.reduce((a,i)=>a+i.paymentsFact,0).toFixed(2))+"₽"),1)])]),(m(!0),p(b,null,P(n(d).dodatas,(a,i)=>(m(),p("div",{key:i,class:"border rounded-md p-4 bg-gray-50"},[l("div",sa," Период: "+r(a.per),1),l("div",aa,[l("div",la,[e[53]||(e[53]=l("span",{class:"text-muted-foreground"},"План:",-1)),l("span",oa,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.plan)+"₽"),1)]),l("div",na,[e[54]||(e[54]=l("span",{class:"text-muted-foreground"},"Общие продажи:",-1)),l("span",ra,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.totalSales)+"₽"),1)]),l("div",ia,[e[55]||(e[55]=l("span",{class:"text-muted-foreground"},"Оплаты (факт):",-1)),l("span",ua,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.paymentsFact)+"₽"),1)]),l("div",da,[e[56]||(e[56]=l("span",{class:"text-muted-foreground"},"В ЗП:",-1)),l("span",ca,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.toSalary)+"₽"),1)]),l("div",ma,[e[57]||(e[57]=l("span",{class:"text-muted-foreground"},"Процент бонуса:",-1)),l("span",fa,r((a.bonusPercentage*100).toFixed(2)+"%"),1)])])]))),128))])):(m(),p("div",pa," Нет данных "))]),_:1})]),_:1}),t(k,{value:"rop"},{default:s(()=>[t(S,{class:"relative h-[calc(100vh-270px)] px-2"},{default:s(()=>[n(d).ropdatas?.length?(m(),p("div",_a,[l("div",ya,[l("div",va,[e[58]||(e[58]=l("span",{class:"font-semibold text-lg"},"Итого в ЗП:",-1)),l("span",xa,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(n(d).ropdatas.reduce((a,i)=>a+i.toSalary,0))+"₽"),1)]),l("div",ga,[e[59]||(e[59]=l("span",{class:"font-semibold text-lg"},"Итого оплат (факт):",-1)),l("span",ba,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(n(d).ropdatas.reduce((a,i)=>a+i.paymentsFact,0))+"₽"),1)])]),(m(!0),p(b,null,P(n(d).ropdatas,(a,i)=>(m(),p("div",{key:i,class:"border rounded-md p-4 bg-gray-50"},[l("div",Pa," Период: "+r(a.per),1),l("div",Ma,[l("div",Fa,[e[60]||(e[60]=l("span",{class:"text-muted-foreground"},"Общие продажи:",-1)),l("span",wa,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.totalSales)+"₽"),1)]),l("div",ha,[e[61]||(e[61]=l("span",{class:"text-muted-foreground"},"Оплаты (факт):",-1)),l("span",ka,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.paymentsFact)+"₽"),1)]),l("div",Sa,[e[62]||(e[62]=l("span",{class:"text-muted-foreground"},"В ЗП:",-1)),l("span",Da,r(("useMyFormatPrice"in o?o.useMyFormatPrice:n(u))(a.toSalary)+"₽"),1)]),l("div",Ta,[e[63]||(e[63]=l("span",{class:"text-muted-foreground"},"Процент бонуса:",-1)),l("span",Ca,r((a.bonusPercentage*100).toFixed(2)+"%"),1)])])]))),128))])):(m(),p("div",$a," Нет данных "))]),_:1})]),_:1})]),_:1})]),_:1}),t(q)]),_:1})])])])}}});export{$l as default};
