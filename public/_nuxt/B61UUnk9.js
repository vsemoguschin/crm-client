import{_ as De}from"./Bmr5wyhr.js";import{_ as Te,a as Ce,b as $e}from"./DfRdkKc3.js";import{_ as Ie,a as Ue}from"./iXxKrSbb.js";import{_ as Be}from"./COO4Wojn.js";import{_ as Ne,a as Ae,m as Ve,b as Le}from"./Czc3ys38.js";import{_ as We,a as He,b as ze}from"./DkMjgWCi.js";import{_ as je}from"./CY7rJOej.js";import{_ as Ge}from"./D_HIMsUe.js";import{_ as Oe,a as Re,b as Ee}from"./CNLsaPwj.js";import{_ as Qe}from"./BCRlC5xu.js";import{_ as qe}from"./fRExJa2e.js";import{_ as Ye}from"./CP8umD4q.js";import{_ as Je}from"./BcuVElyA.js";import{_ as Ke}from"./BgkA-2sO.js";import{a as Xe}from"./B5gfxeH_.js";import{_ as Ze}from"./Da2JRHOT.js";import{_ as ea}from"./D8Osd5Ax.js";import{_ as aa}from"./DkkQ8vn7.js";import{b as sa,c as ta,a as la,d as oa,e as na,_ as ra}from"./Df1Q6CGn.js";import{_ as ia}from"./C7WYXAp2.js";import{u as c}from"./Dt19OLxm.js";import{d as xe}from"./Cxp-zkhu.js";import{Q as ua}from"./DVXwaM75.js";import{e as da,g as ca,u as fa,r as v,B as ma,i as pa,c as _,a as n,b as e,w as s,H as Pe,l as o,o as m,m as P,d as i,D as B,F as b,z as M,t as r,A as be}from"./LcRD3ia0.js";import"./D9TSNOAg.js";import"./BdQOAs7V.js";import"./BOGtf0gU.js";import"./QkXyQO2w.js";import"./D5ydJhlK.js";import"./1Y235EgL.js";import"./CACSUplU.js";import"./BXoTK-I8.js";import"./BcyKike4.js";import"./DSl2Rovl.js";import"./B-kig6KZ.js";import"./Pvv-dh1L.js";import"./mqOaxR0N.js";import"./D6LOIvye.js";import"./D8EW8v7U.js";import"./Dbg8U1qb.js";import"./CNFJry-h.js";const _a={class:"relative h-screen hidden-scrollbar"},ya={class:"w-full fixed z-[11]"},va={class:"h-[full] flex p-4 gap-4 mx-[auto] max-w-[2048px] pt-18"},ga={class:"flex gap-2 min-w-[1050px] w-full"},xa={class:"w-[180px] absolute"},Pa={class:"flex gap-2 w-full"},ba={class:"mt-[-47px]"},Ma={class:"flex flex-col gap-2"},Fa={key:0,class:"flex gap-2 flex-wrap"},ka={class:"flex gap-2 flex-1"},wa={class:"flex gap-2 flex-1"},ha={class:"flex gap-1 mb-2"},Sa={class:"flex gap-2"},Da={class:"min-w-[490px] h-[calc(100vh-90px)]"},Ta={class:"flex w-full justify-between items-center"},Ca={class:"flex items-center gap-2"},$a={class:"flex flex-col gap-5"},Ia={class:"gap-1 text-gray-600"},Ua={class:"flex items-center border-b-1"},Ba={class:"ml-auto"},Na={class:"flex items-center border-b-1"},Aa={class:"ml-auto"},Va={class:"text-muted-foreground"},La={class:"ml-auto"},Wa={class:"gap-1 text-gray-600"},Ha={class:"text-muted-foreground"},za={class:"flex justify-between items-center mb-2"},ja={class:"gap-1 text-gray-600"},Ga={class:"text-muted-foreground mr-auto"},Oa={class:"gap-1 text-green-600/80"},Ra={class:"ml-auto"},Ea={class:"gap-1 text-gray-600"},Qa={key:0},qa={class:"ml-auto"},Ya={class:"text-muted-foreground mr-auto"},Ja={class:"text-xs text-gray-500"},Ka={class:"text-xs text-gray-500"},Xa={class:"flex flex-col gap-8"},Za={class:"flex flex-col"},es={class:"text-xs text-gray-500"},as={class:"text-green-600"},ss={class:"text-xs text-gray-500"},ts={class:"text-green-600"},ls={class:"text-xs text-gray-500"},os={class:"text-green-600"},ns={class:"text-xs text-gray-500"},rs={class:"text-green-600"},Js=da({__name:"index",setup(is){const{$useApi:N}=ca();fa({title:"Менеджеры | Easy CRM"});const A=v(new Date().toISOString().slice(0,7)),j=v({month:new Date().getMonth(),year:new Date().getFullYear()}),g=v([{id:0,fullName:"None",workSpace:"None",group:"None",plan:0,totalSales:0,dealSales:0,dopSales:0,temp:0,dealsAmount:0,dopsAmount:0,averageBill:0,drr:0,calls:0,makets:0,maketsDayToDay:0,conversionMaketsToCalls:0,conversionMaketsDayToDayToCalls:0,dealsDayToDay:0,dealsDayToDayPrice:0,conversionDealsToCalls:0,dealsWithoutDesigners:0,dealsSalesWithoutDesigners:0,conversionMaketsToSales:0,redirectToMSG:0,totalSalary:0,pays:0,rem:0,dopPays:0,dealPays:0,bonusPercentage:0,bonus:0,shiftBonus:0,shift:0,dealsInfo:[],dopsInfo:[],topBonus:0,fired:!1,isIntern:!1,dealsInfoPrevMounth:[],dopsInfoPrevMounth:[],salaryPays:[]}]),u=v({id:0,fullName:"None",workSpace:"None",group:"None",plan:0,totalSales:0,dealSales:0,dopSales:0,temp:0,dealsAmount:0,dopsAmount:0,averageBill:0,drr:0,calls:0,makets:0,maketsDayToDay:0,conversionMaketsToCalls:0,conversionMaketsDayToDayToCalls:0,dealsDayToDay:0,dealsDayToDayPrice:0,conversionDealsToCalls:0,dealsWithoutDesigners:0,dealsSalesWithoutDesigners:0,conversionMaketsToSales:0,redirectToMSG:0,totalSalary:0,pays:0,rem:0,dopPays:0,dealPays:0,bonusPercentage:0,bonus:0,shiftBonus:0,shift:0,dealsInfo:[],dopsInfo:[],topBonus:0,fired:!1,isIntern:!1,salaryPays:[],dealsInfoPrevMounth:[],dopsInfoPrevMounth:[]}),fe=v([{label:"План",value:"0"}]),G=v(!1),K=v(),me=v([{title:"Сумма продаж",value:"0"}]),O=async l=>{const{data:a}=await N.get(`/deals/${l}`);K.value=a,G.value=!0},X=v([{label:"ДРР ",value:"32"}]),Z=v([{label:"ЗП",value:"0"}]),pe=v([{user:"Иванов Иван",category:"Топ суммы заказов",sales:2e3},{user:"Иванов Иван",category:"Топ суммы допов",sales:2e3},{user:"Иванов Иван",category:"Топ средний чек",sales:2e3},{user:"Иванов Иван",category:"Топ конверсия",sales:2e3}]),ee=v([{user:"Иванов Иван Иванович",sales:100500},{user:"Петров Петр Петрович",sales:100500},{user:"Сидоров Сидор Сидорович",sales:100500}]),_e=v([{user:"Иванов Иван Иванович",sales:100500},{user:"Петров Петр Петрович",sales:100500},{user:"Сидоров Сидор Сидорович",sales:100500}]),ye=v([{user:"Иванов Иван Иванович",sales:100500},{user:"Петров Петр Петрович",sales:100500},{user:"Сидоров Сидор Сидорович",sales:100500}]),ve=v([{user:"Иванов Иван Иванович",sales:100500},{user:"Петров Петр Петрович",sales:100500},{user:"Сидоров Сидор Сидорович",sales:100500}]),ge=v([{user:"Иванов Иван Иванович",sales:100500},{user:"Петров Петр Петрович",sales:100500},{user:"Сидоров Сидор Сидорович",sales:100500}]),V=async()=>{try{const{data:l}=await N.get("/dashboards/comercial",{params:{period:A.value}});return g.value=l.users,l.users.length&&(u.value.id?(u.value=l.users.find(a=>a.id===u.value.id),ae(u.value.id)):(u.value=l.users[0],ae(u.value?.id||0)),ee.value=l.vkTop.topTotalSales,_e.value=l.vkTop.topDopSales,ye.value=l.vkTop.topDimmerSales,ve.value=l.vkTop.topSalesWithoutDesigners,ge.value=l.vkTop.topConversionDayToDay,pe.value=l.b2bTop,Me()),l}catch(l){console.log(l)}},ae=l=>{if(!g.value.find(d=>d.id===l))return;u.value=g.value.find(d=>d.id===l);const{workSpace:a,totalSales:p,dealSales:F,dopSales:h,temp:se,dealsAmount:te,dopsAmount:le}=u.value;fe.value=[{label:"Общая сумма заказов",value:c(p)+"₽"},{label:"Темп",value:c(se)+"₽"},{label:`Вывески(${te})`,value:c(F)+"₽"},{label:`Допы(${le})`,value:c(h)+"₽"}];const{drr:oe,averageBill:ne,calls:k,makets:R,maketsDayToDay:re,dealsDayToDay:w,dealsDayToDayPrice:S,conversionDealsToCalls:L,dealsWithoutDesigners:W,dealsSalesWithoutDesigners:H,conversionMaketsToCalls:E,conversionMaketsDayToDayToCalls:z,conversionMaketsToSales:Q,redirectToMSG:ie}=u.value;X.value=[{label:"Средний чек",value:c(ne)+"₽"},{label:"ДРР",value:oe+"%"},{label:"Заявки",value:k},{label:"% из заявки в продажу",value:L+"%"},{label:"% из заявки в макет",value:E+"%"},{label:"Макеты",value:R},{label:"% из макета в продажу",value:Q+"%"},{label:"Макеты день в день",value:re},{label:"% из заявки в макет день в день",value:z+"%"},{label:`Продажи день в день(${w})`,value:c(S)+"₽"},{label:`Без дизайнера(${W})`,value:c(H)+"₽"}],a==="B2B"&&X.value.push({label:"Переходы в мессенджер",value:ie});let{totalSalary:$}=u.value;const{bonusPercentage:q,bonus:ue,shift:Y,shiftBonus:J,pays:D,dopPays:I,dealPays:y,topBonus:x,salaryCorrections:T,prevPeriodsDealsPays:f,prevPeriodsDopsPays:C}=u.value,U=T.filter(d=>d.type==="Вычет").reduce((d,ce)=>d+ce.price,0),de=T.filter(d=>d.type==="Прибавка").reduce((d,ce)=>d+ce.price,0);$=$+de-U+f+C;const t=$-D;Z.value=[{label:"ЗП",value:c(+$.toFixed(2))+"₽"},{label:"Выплаты",value:c(D)+"₽"},{label:"Остаток",value:c(+t.toFixed(2))+"₽"},{label:`За вывески(${(q*100).toFixed(1)}%)`,value:c(y)+"₽"},{label:a==="B2B"?"За допы(10%)":`За допы(${(q*100).toFixed(1)}%)`,value:c(I)+"₽"},{label:`Смены(${Y})`,value:c(J)+"₽"},{label:"Премия",value:c(ue)+"₽"},{label:"ТопБонус",value:c(x)+"₽"},{label:"Остатки",value:c(+(f+C).toFixed(2))+"₽"}]},Me=()=>{const l=g.value;g.value.reduce((a,p)=>a+p.totalSalary,0),g.value.reduce((a,p)=>a+p.prevPeriodsDealsPays,0),g.value.reduce((a,p)=>a+p.pays,0),g.value.reduce((a,p)=>a+p.prevPeriodsDopsPays,0),g.value.reduce((a,p)=>a+p.salaryCorrections.filter(F=>F.type==="Вычет").reduce((F,h)=>F+h.price,0),0),g.value.reduce((a,p)=>a+p.salaryCorrections.filter(F=>F.type==="Прибавка").reduce((F,h)=>F+h.price,0),0),me.value=[{title:"Сумма продаж",value:c(l.reduce((a,p)=>a+p.totalSales,0))+"₽"},{title:`Сумма заказов(${l.reduce((a,p)=>a+p.dealsAmount,0)})`,value:c(l.reduce((a,p)=>a+p.dealSales,0))+"₽"},{title:`Сумма допов(${l.reduce((a,p)=>a+p.dopsAmount,0)})`,value:c(l.reduce((a,p)=>a+p.dopSales,0))+"₽"}]},Fe=(l,a)=>{g.value.find(p=>p.id===a).plan=l,u.value.plan=l,g.value=[...g.value]},ke=async l=>{try{await N.delete(`/salary-pay/correction/${l}`),await V()}catch(a){console.log(a)}},we=async l=>{try{await N.delete("/salary-pay/"+l),V()}catch(a){console.log(a)}},he=async l=>{try{await N.patch(`/managers/${u.value.id}/change-intern-status`,{isIntern:l})}catch(a){u.value.isIntern=!l,console.log(a)}};ma(j,async l=>{const{month:a,year:p}=l;A.value=new Date(p,a+1).toISOString().slice(0,7),await V()});const Se=async l=>{await he(l)};return pa(async()=>{await V()}),(l,a)=>{const p=De,F=Ce,h=Ue,se=Be,te=Ie,le=Ne,oe=$e,ne=Te,k=ze,R=He,re=Ae,w=je,S=Ge,L=Qe,W=Ee,H=Re,E=qe,z=Oe,Q=We,ie=Je,$=Ke,q=Xe,ue=Le,Y=Ze,J=ea,D=aa,I=ia,y=oa,x=la,T=ta,f=ra,C=na,U=sa,de=Ye;return m(),_("div",_a,[n("div",ya,[e(p,{page:"Менеджеры"})]),n("div",va,[e(ne,{open:o(G),"onUpdate:open":a[0]||(a[0]=t=>Pe(G)?G.value=t:null)},{default:s(()=>[e(F,{class:"hidden"}),e(oe,{class:"p-0"},{default:s(()=>[e(te,{class:"hidden"},{default:s(()=>[e(h),e(se)]),_:1}),(m(),P(le,{key:o(K).id,deal:o(K)},null,8,["deal"]))]),_:1})]),_:1},8,["open"]),n("div",ga,[n("div",xa,[e(o(ua),{modelValue:o(j),"onUpdate:modelValue":a[1]||(a[1]=t=>Pe(j)?j.value=t:null),"month-picker":"","auto-apply":"",locale:"ru","select-text":"Готово","cancel-text":"Закрыть",clearable:!1},null,8,["modelValue"])]),n("div",Pa,[e(Q,{"default-value":"table",class:"w-full"},{default:s(()=>[e(R,{class:"ml-[185px]"},{default:s(()=>[e(k,{value:"table"},{default:s(()=>a[5]||(a[5]=[i("Таблица",-1)])),_:1,__:[5]}),e(k,{value:"top"},{default:s(()=>a[6]||(a[6]=[i("Топ",-1)])),_:1,__:[6]}),e(k,{value:"info"},{default:s(()=>a[7]||(a[7]=[i("Показатели",-1)])),_:1,__:[7]})]),_:1}),e(w,{value:"table"},{default:s(()=>[n("div",ba,[e(re,{columns:o(Ve),data:o(g),"current-manager-id":o(u).id,onManagerClicked:ae},null,8,["columns","data","current-manager-id"])])]),_:1}),e(w,{value:"top"},{default:s(()=>[n("div",Ma,[o(ee).length?(m(),_("div",Fa,[n("div",ka,[e(S,{class:"min-w-[300px]",managers:o(ee),title:"Топ по выручке",after:"₽"},null,8,["managers"]),e(S,{class:"min-w-[300px]",managers:o(_e),title:"Топ по доп.продажам",after:"₽"},null,8,["managers"])]),n("div",wa,[e(S,{class:"min-w-[300px]",managers:o(ye),title:"Топ по диммерам",after:"₽"},null,8,["managers"]),e(S,{class:"min-w-[300px]",managers:o(ve),title:"Топ продаж без дизов",after:"₽"},null,8,["managers"]),e(S,{class:"min-w-[300px]",managers:o(ge),title:"Топ конверсия",after:"%"},null,8,["managers"])])])):B("",!0),n("div",ha,[(m(!0),_(b,null,M(o(pe),(t,d)=>(m(),P(z,{key:d,class:"min-w-[150px] grow"},{default:s(()=>[e(H,{class:"p-3 pb-2"},{default:s(()=>[e(L,null,{default:s(()=>[i(r(t.category),1)]),_:2},1024),e(W,{class:"text-3xl font-semibold whitespace-nowrap"},{default:s(()=>[i(r(t.user),1)]),_:2},1024)]),_:2},1024),e(E,null,{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(t.sales)+(t.category==="Топ конверсия"?"%":"₽")),1)]),_:2},1024)]),_:2},1024))),128))])])]),_:1}),e(w,{value:"info"},{default:s(()=>[n("div",Sa,[(m(!0),_(b,null,M(o(me),t=>(m(),P(z,{key:t.title,class:"w-full grow"},{default:s(()=>[e(H,{class:"py-1 px-3"},{default:s(()=>[e(L,null,{default:s(()=>[i(r(t.title),1)]),_:2},1024),e(W,{class:"text-2xl font-semibold whitespace-nowrap"},{default:s(()=>[i(r(t.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})]),n("div",Da,[e(z,{class:"h-full rounded-md overflow-hidden"},{default:s(()=>[e(H,{class:"bg-gray-100 mb-2 p-3"},{default:s(()=>[e(W,null,{default:s(()=>[i(r(o(u)?.fullName),1)]),_:1}),e(L,null,{default:s(()=>[n("div",Ta,[n("span",null,r(o(u)?.workSpace),1),n("div",Ca,[e(ie,null,{default:s(()=>a[8]||(a[8]=[i("Стажер",-1)])),_:1,__:[8]}),e($,{checked:o(u).isIntern,"onUpdate:checked":[a[2]||(a[2]=t=>o(u).isIntern=t),Se]},null,8,["checked"])])])]),_:1})]),_:1}),e(E,{class:"p-2"},{default:s(()=>[e(Q,{"default-value":"info"},{default:s(()=>[e(R,null,{default:s(()=>[e(k,{value:"info"},{default:s(()=>a[9]||(a[9]=[i(" Информация ",-1)])),_:1,__:[9]}),e(k,{value:"deals"},{default:s(()=>a[10]||(a[10]=[i(" Вывески ",-1)])),_:1,__:[10]}),e(k,{value:"dops"},{default:s(()=>a[11]||(a[11]=[i(" Допы ",-1)])),_:1,__:[11]}),e(k,{value:"remainders"},{default:s(()=>a[12]||(a[12]=[i(" Остатки ",-1)])),_:1,__:[12]})]),_:1}),e(w,{value:"info",class:""},{default:s(()=>[e(D,{class:"h-[calc(100vh-250px)] px-5 pb-5"},{default:s(()=>[n("div",$a,[n("div",null,[a[15]||(a[15]=n("div",{class:"font-semibold"},"Основная информация",-1)),n("ul",Ia,[n("div",Ua,[(m(),P(q,{key:o(u).id,plan:o(u).plan,period:o(A),"manager-id":o(u).id,manager:o(u).fullName,onIsPlanSet:a[3]||(a[3]=t=>Fe(t,o(u).id))},null,8,["plan","period","manager-id","manager"])),a[13]||(a[13]=n("span",{class:"ml-2"},"План",-1)),n("span",Ba,r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(o(u).plan)+"₽"),1)]),n("li",Na,[a[14]||(a[14]=n("span",{class:"text-muted-foreground"}," Остаток до плана ",-1)),n("span",Aa,r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(o(u).plan-o(u).totalSales)+"₽"),1)]),(m(!0),_(b,null,M(o(fe),(t,d)=>(m(),_("li",{key:d,class:"flex items-center border-b-1"},[n("span",Va,r(t.label),1),n("span",La,r(t.value),1)]))),128))])]),n("div",null,[a[16]||(a[16]=n("div",{class:"font-semibold"},"Показатели",-1)),n("ul",Wa,[(m(!0),_(b,null,M(o(X),(t,d)=>(m(),_("li",{key:d,class:"flex items-center justify-between border-b-1"},[n("span",Ha,r(t.label),1),n("span",null,r(t.value),1)]))),128))])]),n("div",null,[n("div",za,[a[17]||(a[17]=n("div",{class:"font-semibold"},"Зарплата",-1)),e(ue,{"user-id":o(u).id,onCorrectionCreated:a[4]||(a[4]=t=>{V()})},null,8,["user-id"])]),n("ul",ja,[(m(!0),_(b,null,M(o(Z).slice(0,3),(t,d)=>(m(),_("li",{key:d,class:"flex items-center w-full"},[n("span",Ga,r(t.label),1),n("span",null,r(t.value),1)]))),128))]),e(Y,{class:"mb-2"}),n("ul",Oa,[(m(!0),_(b,null,M(o(u).salaryPays,t=>(m(),_("li",{key:t.id,class:be(["flex font-semibold"])},[e(J,{class:"h-5 w-5 px-0 mr-1",onClick:d=>we(t.id)},{default:s(()=>a[18]||(a[18]=[i(" - ",-1)])),_:2,__:[18]},1032,["onClick"]),a[19]||(a[19]=n("span",null," Выплата ",-1)),n("span",Ra,r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(t.price)+"₽"),1)]))),128))]),n("ul",Ea,[(m(!0),_(b,null,M(o(u).salaryCorrections,t=>(m(),_("li",{key:t.id,class:be(["flex",t.type==="Прибавка"?"text-green-500":"text-red-500"])},[e(J,{class:"h-5 w-5 px-0 mr-1",onClick:d=>ke(t.id)},{default:s(()=>a[20]||(a[20]=[i(" - ",-1)])),_:2,__:[20]},1032,["onClick"]),n("span",null,r(t.type),1),t.description?(m(),_("span",Qa,r("("+t.description+")"),1)):B("",!0),n("span",qa,r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(t.price)+"₽"),1)],2))),128))]),e(Y,{class:"my-1"}),n("ul",null,[(m(!0),_(b,null,M(o(Z).slice(3),(t,d)=>(m(),_("li",{key:d,class:"flex items-center w-full"},[n("span",Ya,r(t.label),1),n("span",null,r(t.value),1)]))),128))])])])]),_:1})]),_:1}),e(w,{value:"deals"},{default:s(()=>[e(D,{class:"relative h-[calc(100vh-270px)] px-2"},{default:s(()=>[o(u)?.dealsInfo?.length?(m(),P(U,{key:0},{default:s(()=>[e(I,null,{default:s(()=>a[21]||(a[21]=[i("Список заказов менеджера",-1)])),_:1,__:[21]}),e(T,null,{default:s(()=>[e(x,{class:"bg-gray-100"},{default:s(()=>[e(y,{class:"text-left"},{default:s(()=>a[22]||(a[22]=[i(" Заказ ",-1)])),_:1,__:[22]}),e(y,{class:"text-center"},{default:s(()=>a[23]||(a[23]=[i("Дата",-1)])),_:1,__:[23]}),e(y,{class:"text-center"},{default:s(()=>a[24]||(a[24]=[i("Доля",-1)])),_:1,__:[24]}),e(y,{class:"text-center"},{default:s(()=>a[25]||(a[25]=[i("Оплачено",-1)])),_:1,__:[25]})]),_:1})]),_:1}),e(C,null,{default:s(()=>[(m(!0),_(b,null,M(o(u).dealsInfo,(t,d)=>(m(),P(x,{key:d,class:"text-center whitespace-nowrap cursor-pointer",onClick:async()=>await O(t.id)},{default:s(()=>[e(f,{class:"text-left text-wrap"},{default:s(()=>[i(r(t.title),1)]),_:2},1024),e(f,{class:"font-medium text-xs"},{default:s(()=>[i(r(("dateFormat"in l?l.dateFormat:o(xe))(t.saleDate)),1)]),_:2},1024),e(f,{class:"font-medium flex flex-col"},{default:s(()=>[n("span",null,r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(t.dealPrice)+"₽"),1),n("span",Ja,r(t.dealerPart+"%"),1)]),_:2},1024),e(f,{class:"font-medium"},{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(t.paid)+"₽"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),e(x,{class:"text-center font-bold"},{default:s(()=>[e(f,{class:"text-left"},{default:s(()=>[i(" ИТОГО("+r(o(u).dealsInfo.length)+") ",1)]),_:1}),e(f,null,{default:s(()=>[i(r(o(A)),1)]),_:1}),e(f,null,{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(o(u).dealsInfo.reduce((t,d)=>t+d.dealerPrice,0))+"₽"),1)]),_:1}),e(f,{class:"text-center"},{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(+o(u).dealsInfo.reduce((t,d)=>t+d.paid,0).toFixed(2))+"₽"),1)]),_:1})]),_:1})]),_:1})]),_:1})):B("",!0)]),_:1})]),_:1}),e(w,{value:"dops"},{default:s(()=>[e(D,{class:"relative h-[calc(100vh-270px)] px-2"},{default:s(()=>[o(u)?.dopsInfo?.length?(m(),P(U,{key:0},{default:s(()=>[e(I,null,{default:s(()=>a[26]||(a[26]=[i("Список доп.продаж менеджера",-1)])),_:1,__:[26]}),e(T,null,{default:s(()=>[e(x,{class:"bg-gray-100"},{default:s(()=>[e(y,{class:"text-left"},{default:s(()=>a[27]||(a[27]=[i(" Доп ",-1)])),_:1,__:[27]}),e(y,{class:"text-center"},{default:s(()=>a[28]||(a[28]=[i("Дата",-1)])),_:1,__:[28]}),e(y,{class:"text-center"},{default:s(()=>a[29]||(a[29]=[i("Стоимость",-1)])),_:1,__:[29]}),e(y,{class:"text-center"},{default:s(()=>a[30]||(a[30]=[i("Оплачено",-1)])),_:1,__:[30]})]),_:1})]),_:1}),e(C,null,{default:s(()=>[(m(!0),_(b,null,M(o(u).dopsInfo,(t,d)=>(m(),P(x,{key:d,class:"whitespace-nowrap text-center cursor-pointer",onClick:async()=>await O(t.dealId)},{default:s(()=>[e(f,{class:"text-left flex flex-col"},{default:s(()=>[n("span",null,r(t.dealTitle),1),n("span",Ka,r(t.title),1)]),_:2},1024),e(f,{class:"font-medium text-xs"},{default:s(()=>[i(r(("dateFormat"in l?l.dateFormat:o(xe))(t.saleDate)),1)]),_:2},1024),e(f,{class:"font-medium"},{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(t.dopPrice)+"₽"),1)]),_:2},1024),e(f,{class:"font-medium"},{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(t.paid)+"₽"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),e(x,{class:"text-center font-bold"},{default:s(()=>[e(f,{class:"whitespace-nowrap text-left"},{default:s(()=>[i(" ИТОГО("+r(o(u).dopsInfo.length)+") ",1)]),_:1}),e(f,null,{default:s(()=>[i(r(o(A)),1)]),_:1}),e(f,null,{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(o(u).dopsInfo.reduce((t,d)=>t+d.dopPrice,0))+"₽"),1)]),_:1}),e(f,null,{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(+o(u).dopsInfo.reduce((t,d)=>t+d.paid,0).toFixed())+"₽"),1)]),_:1})]),_:1})]),_:1})]),_:1})):B("",!0)]),_:1})]),_:1}),e(w,{value:"remainders"},{default:s(()=>[e(D,{class:"relative h-[calc(100vh-270px)] px-2"},{default:s(()=>[n("div",Xa,[o(u)?.dealsInfoPrevMounth?.length?(m(),P(U,{key:0},{default:s(()=>[e(I),e(T,null,{default:s(()=>[e(x,{class:"bg-gray-100"},{default:s(()=>[e(y,{class:"text-left text-xl"},{default:s(()=>a[31]||(a[31]=[i(" Заказы ",-1)])),_:1,__:[31]}),e(y,{class:"text-center"},{default:s(()=>a[32]||(a[32]=[i("Доля",-1)])),_:1,__:[32]}),e(y,{class:"text-center"},{default:s(()=>a[33]||(a[33]=[i("Оплачено",-1)])),_:1,__:[33]}),e(y,{class:"text-center"},{default:s(()=>a[34]||(a[34]=[i("В ЗП",-1)])),_:1,__:[34]})]),_:1})]),_:1}),e(C,null,{default:s(()=>[(m(!0),_(b,null,M(o(u).dealsInfoPrevMounth,(t,d)=>(m(),P(x,{key:d,class:"text-center whitespace-nowrap cursor-pointer",onClick:async()=>await O(t.id)},{default:s(()=>[e(f,{class:"text-left"},{default:s(()=>[i(r(t.title),1)]),_:2},1024),e(f,{class:"font-medium"},{default:s(()=>[n("div",Za,[n("span",null,r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(t.dealerPrice)+"₽"),1),n("span",es,[n("span",null,r(t.dealerPart)+"%",1),n("span",null," от "+r(t.dealPrice),1)])])]),_:2},1024),e(f,{class:"font-medium"},{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(t.paid)+"₽"),1)]),_:2},1024),e(f,{class:"font-medium flex flex-col"},{default:s(()=>[n("span",as,r("+"+("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(+t.toSalary.toFixed(2))+"₽"),1),n("span",ss,r((t.bonusPercentage*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),e(x,{class:"text-center font-bold bg-zinc-100"},{default:s(()=>[e(f,{class:"text-left"},{default:s(()=>[a[35]||(a[35]=n("span",null,"ИТОГО",-1)),n("span",null,r("("+o(u).dealsInfoPrevMounth.length+")"),1)]),_:1,__:[35]}),e(f,null,{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(o(u).dealsInfoPrevMounth.reduce((t,d)=>t+d.dealerPrice,0))+"₽"),1)]),_:1}),e(f,{class:"text-center"},{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(+o(u).dealsInfoPrevMounth.reduce((t,d)=>t+d.paid,0).toFixed(2))+"₽"),1)]),_:1}),e(f,{class:"text-center"},{default:s(()=>[n("span",ts,r("+"+("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(+o(u).dealsInfoPrevMounth.reduce((t,d)=>t+d.toSalary,0).toFixed(2))+"₽"),1)]),_:1})]),_:1})]),_:1})]),_:1})):B("",!0),o(u)?.dopsInfoPrevMounth?.length?(m(),P(U,{key:1},{default:s(()=>[e(I),e(T,null,{default:s(()=>[e(x,{class:"bg-gray-100"},{default:s(()=>[e(y,{class:"text-left text-xl"},{default:s(()=>a[36]||(a[36]=[i(" Допы ",-1)])),_:1,__:[36]}),e(y,{class:"text-center"},{default:s(()=>a[37]||(a[37]=[i("Стоимость",-1)])),_:1,__:[37]}),e(y,{class:"text-center"},{default:s(()=>a[38]||(a[38]=[i("Оплачено",-1)])),_:1,__:[38]}),e(y,{class:"text-center"},{default:s(()=>a[39]||(a[39]=[i("В ЗП",-1)])),_:1,__:[39]})]),_:1})]),_:1}),e(C,null,{default:s(()=>[(m(!0),_(b,null,M(o(u).dopsInfoPrevMounth,(t,d)=>(m(),P(x,{key:d,class:"whitespace-nowrap text-center cursor-pointer",onClick:async()=>await O(t.dealId)},{default:s(()=>[e(f,{class:"text-left flex flex-col"},{default:s(()=>[n("span",null,r(t.dealTitle),1),n("span",ls,r(t.title),1)]),_:2},1024),e(f,{class:"font-medium"},{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(t.dopPrice)+"₽"),1)]),_:2},1024),e(f,{class:"font-medium"},{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(t.paid)+"₽"),1)]),_:2},1024),e(f,{class:"font-medium flex flex-col"},{default:s(()=>[n("span",os,r("+"+("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(+t.toSalary.toFixed(2))+"₽"),1),n("span",ns,r((t.bonusPercentage*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),e(x,{class:"text-center font-bold bg-zinc-100"},{default:s(()=>[e(f,{class:"whitespace-nowrap text-left"},{default:s(()=>[i(" ИТОГО"+r("("+o(u).dopsInfoPrevMounth.length+")"),1)]),_:1}),e(f,null,{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(o(u).dopsInfoPrevMounth.reduce((t,d)=>t+d.dopPrice,0))+"₽"),1)]),_:1}),e(f,null,{default:s(()=>[i(r(("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(+o(u).dopsInfoPrevMounth.reduce((t,d)=>t+d.paid,0).toFixed())+"₽"),1)]),_:1}),e(f,{class:"text-center"},{default:s(()=>[n("span",rs,r("+"+("useMyFormatPrice"in l?l.useMyFormatPrice:o(c))(+o(u).dopsInfoPrevMounth.reduce((t,d)=>t+d.toSalary,0).toFixed(2))+"₽"),1)]),_:1})]),_:1})]),_:1})]),_:1})):B("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),e(de)]),_:1})])])])])}}});export{Js as default};
