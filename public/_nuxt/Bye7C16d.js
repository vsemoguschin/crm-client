import{_ as Q}from"./CDst0A0O.js";import{_ as X,a as Y,b as ee}from"./D0Fd2yXn.js";import{_ as oe}from"./CaPtdwNj.js";import{_ as se}from"./DVdymwQ5.js";import{_ as ae,a as ne,b as te,c as le,d as re}from"./KSX9JOtw.js";import{_ as ue}from"./BR3DQNok.js";import{_ as ce,a as ie,b as de,c as me}from"./ZTyVILcU.js";import{_ as _e}from"./odSmgr3d.js";import{O as pe,c as fe,y as ve}from"./B9M8ggfK.js";import{e as P,v as A,m as f,o as t,w as e,n as be,x as De,l as O,r as N,i as ge,c as l,a as n,A as _,aK as xe,b as a,d as m,t as r,F as p,z as R,j as Re,s as he}from"./BbheI0mw.js";import{u as Me}from"./DzJc7hp_.js";import{u as we}from"./CCknexPU.js";const Oe=P({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(I){const v=I,u=A(()=>{const{class:b,...c}=v;return c}),h=pe(u);return(b,c)=>(t(),f(O(ve),De(O(h),{class:O(fe)("px-2 py-1.5 text-sm font-semibold",b.inset&&"pl-8",v.class)}),{default:e(()=>[be(b.$slots,"default")]),_:3},16,["class"]))}}),Ne=[{icon:"mage:dashboard-fill",name:"Сотрудники",url:"/workspaces",allowedRoles:["ADMIN","G","KD","DO","ROV","ROD","DP","RP"]},{icon:"mdi:deal",name:"Сделки",url:"/deals",allowedRoles:["ADMIN","G","KD","DO","ROP","MOP","ROV","MOV","MARKETER","ASSISTANT"]},{icon:"mdi:users",name:"Менеджеры",url:"/commercial",allowedRoles:["ADMIN","G","KD","DO","ROP","MOP","MOV"]},{icon:"mdi:users",name:"Отчеты",url:"/reports",allowedRoles:["ADMIN","G","KD","DO","ROP","MOP","MOV"]},{icon:"mdi:users",name:"Доски",url:"/boards",allowedRoles:["ADMIN","G","KD","DO","ROD","MOP","DIZ","DP","RP","ROP","ROV","MOV","ASSISTANT","LOGIST","MASTER","PACKER","FRZ","GUEST"]},{icon:"",name:"Выплаты",url:"/pays",allowedRoles:["ADMIN","G","KD","BUKH","DO","ROD","DP","ROV"]},{icon:"mdi:users",name:"Реклама",url:"/ad",allowedRoles:["ADMIN","G","KD","MARKETER"]},{icon:"mdi:users",name:"Статистика",url:"/statistics",allowedRoles:["ADMIN","G","KD","DO"]},{icon:"mdi:users",name:"ПланФакт",url:"/planfact",allowedRoles:["ADMIN","G","KD","BUKH"],children:[{name:"Операции",url:"/planfact/operations",allowedRoles:["ADMIN","G","KD","BUKH"],icon:"mdi:users"},{name:"PL",url:"/planfact/pl",allowedRoles:["ADMIN","G","KD"],icon:"mdi:users"}]},{icon:"mdi:users",name:"Производство",url:"/production",allowedRoles:["ADMIN","G","KD","MASTER","DP","LOGIST","PACKER","FINANCIER","RP"]},{icon:"material-symbols:calculate",name:"Калькулятор",url:"/diz",allowedRoles:["ADMIN","G","KD","DO","ROP","MOP","ROD","DIZ"]},{icon:"mdi:users",name:"VK",url:"/vk/stat",allowedRoles:["ADMIN","G"]}],Ae={class:"flex bg-white"},Ie={class:"flex items-center gap-3"},ye={class:"px-4 py-3 border-b border-neutral-600"},Se={class:"text-base font-semibold"},Ue={class:"flex flex-col"},ke={key:0,class:"border-b border-neutral-600"},Pe={class:"pl-2 pb-2"},Ke={class:"hidden min-[900px]:flex gap-6 text-sm"},$e={class:"flex flex-col min-w-[200px] p-2"},Te={class:"ml-auto flex items-center"},Ge={class:"cursor-pointer"},Qe=P({__name:"Sidebar",setup(I){const v=we(),u=Me(),h=Re(),b=xe(),c=N("name"),y=N(""),D=N(!1),i=g=>b.path.startsWith(g),K=A(()=>u.user?.boards??[]),S=A(()=>{const g=u.user?.role?.shortName;return g?Ne.filter(s=>!s.allowedRoles?.length||s.allowedRoles.includes(g)).filter(s=>s.name!=="Доски"||K.value.length>0):[]}),U=async()=>{v.set(!0);try{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userName"),localStorage.removeItem("avatarUrl"),u.clearUser(),h.push("/login"),he("login")}finally{v.set(!1)}};return ge(()=>{c.value=u.user?.fullName||"name",y.value=u.user?.avatarUrl||"",console.log()}),(g,s)=>{const $=Q,T=Y,x=oe,G=se,C=ee,E=X,L=te,V=le,k=re,B=ne,z=ae,F=ue,H=ie,Z=Oe,j=_e,W=me,q=de,J=ce;return t(),l("div",Ae,[n("header",{class:_(["font-medium text-black/70 w-full z-10 sticky top-0 h-14 flex items-center justify-start gap-3 px-4 min-[900px]:px-6",i("/boards")||i("/diz")?"bg-neutral-900 text-neutral-300":"bg-background"])},[n("div",null,[n("div",Ie,[a(E,{open:D.value,"onUpdate:open":s[3]||(s[3]=o=>D.value=o)},{default:e(()=>[a(T,{"as-child":""},{default:e(()=>[a($,{variant:"ghost",size:"icon",class:"min-[900px]:hidden rounded-lg","aria-label":"Открыть меню"},{default:e(()=>s[4]||(s[4]=[m(" ☰ ",-1)])),_:1,__:[4]})]),_:1}),a(C,{side:"left",class:"w-[88%] max-w-sm p-0 bg-neutral-900 text-neutral-300"},{default:e(()=>[n("div",ye,[s[5]||(s[5]=n("div",{class:"text-sm text-neutral-200"},"Меню",-1)),n("div",Se,r(c.value),1)]),a(G,{class:"h-[calc(100vh-100px)]"},{default:e(()=>[n("nav",Ue,[(t(!0),l(p,null,R(S.value,(o,M)=>(t(),l(p,{key:M},[o.children&&o.children.length?(t(),l("div",ke,[n("div",{class:_(["px-4 py-3 block text-base text-neutral-300",i(o.url)?"font-semibold underline":""])},r(o.name),3),n("div",Pe,[(t(!0),l(p,null,R(o.children,(d,w)=>(t(),f(x,{key:w,to:d.url,class:_(["px-4 py-2 block text-sm hover:bg-neutral-500",i(d.url)?"font-semibold underline":"text-neutral-300"]),onClick:s[0]||(s[0]=Ce=>D.value=!1)},{default:e(()=>[m(r(d.name),1)]),_:2},1032,["to","class"]))),128))])])):(t(),f(x,{key:1,to:o.url,class:_(["px-4 py-3 text-base border-b border-neutral-600 hover:bg-neutral-500",i(o.url)?"font-semibold underline":"text-neutral-300"]),onClick:s[1]||(s[1]=d=>D.value=!1)},{default:e(()=>[m(r(o.name),1)]),_:2},1032,["to","class"]))],64))),128)),n("button",{class:"px-4 py-3 text-left text-red-600 hover:bg-red-50",onClick:s[2]||(s[2]=()=>{D.value=!1,U()})}," Выйти ")])]),_:1})]),_:1})]),_:1},8,["open"])]),n("nav",Ke,[a(z,{viewport:!1},{default:e(()=>[a(B,{class:"gap-6"},{default:e(()=>[(t(!0),l(p,null,R(S.value,(o,M)=>(t(),l(p,{key:M},[o.children&&o.children.length?(t(),f(k,{key:0},{default:e(()=>[a(L,{class:_(i(o.url)?"font-bold underline":"hover:text-bold hover:underline")},{default:e(()=>[m(r(o.name),1)]),_:2},1032,["class"]),a(V,null,{default:e(()=>[n("div",$e,[(t(!0),l(p,null,R(o.children,(d,w)=>(t(),f(x,{key:w,to:d.url,class:"block px-3 py-2 rounded hover:bg-neutral-100 whitespace-nowrap"},{default:e(()=>[m(r(d.name),1)]),_:2},1032,["to"]))),128))])]),_:2},1024)]),_:2},1024)):(t(),f(k,{key:1},{default:e(()=>[a(x,{to:o.url,class:_(["hover:text-bold hover:underline",i(o.url)?"font-bold underline":""])},{default:e(()=>[m(r(o.name),1)]),_:2},1032,["to","class"])]),_:2},1024))],64))),128))]),_:1})]),_:1})])]),n("div",Te,[a(J,null,{default:e(()=>[a(H,null,{default:e(()=>[n("div",Ge,[a(F,{"full-name":c.value,"avatar-url":y.value,hover:!1,size:"lg","hide-full-name":!0},null,8,["full-name","avatar-url"])])]),_:1}),a(q,{align:"end"},{default:e(()=>[a(Z,null,{default:e(()=>[m(r(c.value),1)]),_:1}),a(j),a(W,null,{default:e(()=>[n("button",{class:"self-center cursor-pointer",onClick:U}," Выйти ")]),_:1})]),_:1})]),_:1})])],2)])}}});export{Qe as _,Oe as a};
