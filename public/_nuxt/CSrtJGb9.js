import{e as _,g as k,L as N,v as x,r as u,i as V,u as j,c as o,a as e,D as f,l as s,t as p,I as A,d as C,aj as P,bf as $,H as B,o as n}from"./BbheI0mw.js";const D={class:"min-h-screen bg-slate-50 text-slate-900"},I={class:"mx-auto max-w-3xl px-4 py-8 lg:py-12"},L={key:0,class:"flex items-center justify-center rounded-xl bg-white p-8 shadow-sm ring-1 ring-slate-200"},R={key:1,class:"rounded-xl bg-rose-50 p-4 text-sm text-rose-700 ring-1 ring-rose-200"},S={key:2,class:"space-y-6"},T={class:"rounded-xl bg-white p-4 shadow-sm ring-1 ring-slate-200"},E={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},H={class:"mt-1 text-base font-semibold text-slate-900"},M={key:0,class:"mt-1 text-xs text-slate-500"},U={class:"font-mono"},q={key:0,class:"mt-3 text-right sm:mt-0"},z={class:"mt-1 text-2xl font-semibold text-slate-900"},F={class:"space-y-4 rounded-xl bg-white p-4 shadow-sm ring-1 ring-slate-200"},G={class:"flex cursor-pointer items-start gap-3 text-sm text-slate-700"},J=["disabled"],K={key:0},O={key:1},X=_({__name:"[id]",setup(Q){const{$useApi:v}=k(),b=N(),c=x(()=>b.params.id),g=u(!0),i=u(!1),d=u(null),a=u(null),r=u(!1);V(async()=>{try{const{data:l}=await v.get(`/payments/${c.value}`);a.value=l}catch(l){const t=l?.response?.data?.message||l?.message||"Ошибка загрузки платежа";d.value=typeof t=="string"?t:"Ошибка загрузки платежа"}finally{g.value=!1}});const m=x(()=>a.value?a.value.Name||a.value.description||a.value.title||"Оплата заказа":""),y=x(()=>a.value?a.value.Amount??a.value.amount??null:null),w=async()=>{if(!(!r.value||!c.value||i.value)){i.value=!0,d.value=null;try{const{data:l}=await v.post(`/payments/${c.value}/pay`),t=l&&(l.url||l.link);if(!t)throw new Error("Некорректный ответ сервера: нет ссылки на оплату");typeof window<"u"&&(window.location.href=t)}catch(l){const t=l?.response?.data?.message||l?.message||"Ошибка перехода к оплате";d.value=typeof t=="string"?t:"Ошибка перехода к оплате"}finally{i.value=!1}}};return j(()=>({title:m.value?`Договор-оферта — ${m.value}`:"Договор-оферта"})),(l,t)=>(n(),o("div",D,[e("div",I,[t[8]||(t[8]=e("div",{class:"mb-6 rounded-xl bg-white p-4 shadow-sm ring-1 ring-slate-200"},[e("h1",{class:"text-xl font-semibold tracking-tight text-slate-900"}," Договор-оферта на оказание услуг "),e("p",{class:"mt-1 text-sm text-slate-500"}," Перед оплатой внимательно ознакомьтесь с условиями договора-оферты. Оплата услуг означает полное и безоговорочное принятие условий оферты. ")],-1)),s(g)?(n(),o("div",L,t[1]||(t[1]=[e("span",{class:"text-sm text-slate-500"},"Загрузка данных платежа…",-1)]))):s(d)?(n(),o("div",R,p(s(d)),1)):s(a)?(n(),o("div",S,[e("div",T,[e("div",E,[e("div",null,[t[3]||(t[3]=e("div",{class:"text-xs font-medium uppercase tracking-wide text-slate-400"}," Заказ на оплату ",-1)),e("div",H,p(s(m)),1),s(a)?.PaymentId||s(a)?.id?(n(),o("div",M,[t[2]||(t[2]=C(" Номер платежа: ",-1)),e("span",U,p(s(a).PaymentId||s(a).id),1)])):f("",!0)]),s(y)!==null?(n(),o("div",q,[t[4]||(t[4]=e("div",{class:"text-xs font-medium uppercase tracking-wide text-slate-400"}," Сумма к оплате ",-1)),e("div",z,p(s(y).toLocaleString("ru-RU"))+" ₽ ",1)])):f("",!0)])]),t[7]||(t[7]=A('<div class="rounded-xl bg-white p-4 shadow-sm ring-1 ring-slate-200"><div class="mb-3 text-sm font-medium text-slate-700"> Условия договора-оферты </div><div class="max-h-[360px] space-y-3 overflow-y-auto text-sm leading-relaxed text-slate-700"><p> Настоящий документ является публичной офертой (далее — «Оферта»), адресованной физическим и юридическим лицам, и определяет порядок и условия оказания услуг Исполнителем. </p><p> Фактом полного и безоговорочного принятия (акцепта) условий настоящей Оферты является совершение Заказчиком оплаты услуг любым доступным способом. С момента акцепта Оферта считается заключённым договором между Заказчиком и Исполнителем. </p><p class="font-semibold"> 1. Предмет договора </p><p> Исполнитель обязуется оказать услуги, указанные в описании заказа, а Заказчик обязуется принять и оплатить оказанные услуги на условиях настоящей Оферты. </p><p class="font-semibold"> 2. Порядок расчётов </p><p> Стоимость услуг указывается на сайте, в счёте на оплату или ином документе, направленном Заказчику. Оплата производится в размере 100% предоплаты, если иное прямо не предусмотрено условиями заказа. </p><p class="font-semibold"> 3. Права и обязанности сторон </p><p> Заказчик обязуется предоставить достоверные данные, необходимые для оказания услуг, и своевременно произвести оплату. Исполнитель обязуется оказать услуги в объёме и в сроки, согласованные сторонами. </p><p class="font-semibold"> 4. Ответственность сторон </p><p> Стороны несут ответственность в соответствии с действующим законодательством. Исполнитель не несёт ответственности за невозможность оказания услуг по причинам, зависящим от Заказчика или третьих лиц (в т.ч. неполадки платёжных систем, действий операторов связи и т.п.). </p><p class="font-semibold"> 5. Заключительные положения </p><p> Настоящая Оферта может быть изменена Исполнителем в одностороннем порядке путём размещения новой редакции на сайте. К отношениям сторон применяется редакция Оферты, действующая на момент совершения оплаты. </p></div></div>',1)),e("div",F,[e("label",G,[P(e("input",{"onUpdate:modelValue":t[0]||(t[0]=h=>B(r)?r.value=h:null),type:"checkbox",class:"mt-1 h-4 w-4 rounded border-slate-300 text-slate-900 focus:ring-slate-500"},null,512),[[$,s(r)]]),t[5]||(t[5]=e("span",null," Я подтверждаю, что внимательно ознакомился(ась) с условиями настоящего договора-оферты и полностью принимаю их. Понимаю и соглашаюсь с тем, что оплата услуг является акцептом настоящей Оферты. ",-1))]),e("button",{type:"button",class:"inline-flex w-full items-center justify-center rounded-lg bg-slate-900 px-4 py-2.5 text-sm font-medium text-white shadow-sm transition hover:bg-slate-800 disabled:cursor-not-allowed disabled:bg-slate-300",disabled:!s(r)||s(i),onClick:w},[s(i)?(n(),o("span",K,"Переход к оплате…")):(n(),o("span",O,"Перейти к оплате"))],8,J),t[6]||(t[6]=e("p",{class:"text-xs text-slate-500"}," Нажимая кнопку «Перейти к оплате», вы переходите на страницу платёжного сервиса и подтверждаете своё согласие с условиями настоящего договора-оферты. ",-1))])])):f("",!0)])]))}});export{X as default};
