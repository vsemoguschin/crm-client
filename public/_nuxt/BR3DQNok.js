import{r as ve,t as he,p as me,v as ge,d as Y,e as F,P as J,w as we,u as _e,s as oe,x as be,D as Ce,l as ae,n as Pe}from"./ZTyVILcU.js";import{r as q,_ as G,v as C,i as Z,e as S,m as B,D as E,l as o,o as w,n as k,au as xe,aD as ne,w as P,aC as qe,c as x,b as H,x as L,ap as W,J as Se,S as ke,k as Be,W as Oe,p as Re,q as $e,g as Ae,a7 as Te,y as se,A as T,t as R,a as N}from"./BbheI0mw.js";import{a0 as Ee,a1 as He,a2 as De,a3 as te,a4 as Ne,a5 as Ue,a6 as ze,a7 as Fe,a8 as Le,c as Me}from"./B9M8ggfK.js";import{r as je}from"./s39mgViW.js";function Ie(r,t){const e=ve(!1,300),a=q(null),l=he();function u(){a.value=null,e.value=!1}function i(c,p){const y=c.currentTarget,f={x:c.clientX,y:c.clientY},g=We(f,y.getBoundingClientRect()),b=Ge(f,g),m=Ve(p.getBoundingClientRect()),n=Xe([...b,...m]);a.value=n,e.value=!0}return G(c=>{if(r.value&&t.value){const p=f=>i(f,t.value),y=f=>i(f,r.value);r.value.addEventListener("pointerleave",p),t.value.addEventListener("pointerleave",y),c(()=>{r.value?.removeEventListener("pointerleave",p),t.value?.removeEventListener("pointerleave",y)})}}),G(c=>{if(a.value){const p=y=>{if(!a.value||!(y.target instanceof HTMLElement))return;const f=y.target,g={x:y.clientX,y:y.clientY},b=r.value?.contains(f)||t.value?.contains(f),m=!Ke(g,a.value),n=!!f.closest("[data-grace-area-trigger]");b?u():(m||n)&&(u(),l.trigger())};r.value?.ownerDocument.addEventListener("pointermove",p),c(()=>r.value?.ownerDocument.removeEventListener("pointermove",p))}}),{isPointerInTransit:e,onPointerExit:l.on}}function We(r,t){const e=Math.abs(t.top-r.y),a=Math.abs(t.bottom-r.y),l=Math.abs(t.right-r.x),u=Math.abs(t.left-r.x);switch(Math.min(e,a,l,u)){case u:return"left";case l:return"right";case e:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function Ge(r,t,e=5){const a=[];switch(t){case"top":a.push({x:r.x-e,y:r.y+e},{x:r.x+e,y:r.y+e});break;case"bottom":a.push({x:r.x-e,y:r.y-e},{x:r.x+e,y:r.y-e});break;case"left":a.push({x:r.x+e,y:r.y-e},{x:r.x+e,y:r.y+e});break;case"right":a.push({x:r.x-e,y:r.y-e},{x:r.x-e,y:r.y+e});break}return a}function Ve(r){const{top:t,right:e,bottom:a,left:l}=r;return[{x:l,y:t},{x:e,y:t},{x:e,y:a},{x:l,y:a}]}function Ke(r,t){const{x:e,y:a}=r;let l=!1;for(let u=0,i=t.length-1;u<t.length;i=u++){const c=t[u].x,p=t[u].y,y=t[i].x,f=t[i].y;p>a!=f>a&&e<(y-c)*(a-p)/(f-p)+c&&(l=!l)}return l}function Xe(r){const t=r.slice();return t.sort((e,a)=>e.x<a.x?-1:e.x>a.x?1:e.y<a.y?-1:e.y>a.y?1:0),Ye(t)}function Ye(r){if(r.length<=1)return r.slice();const t=[];for(let a=0;a<r.length;a++){const l=r[a];for(;t.length>=2;){const u=t[t.length-1],i=t[t.length-2];if((u.x-i.x)*(l.y-i.y)>=(u.y-i.y)*(l.x-i.x))t.pop();else break}t.push(l)}t.pop();const e=[];for(let a=r.length-1;a>=0;a--){const l=r[a];for(;e.length>=2;){const u=e[e.length-1],i=e[e.length-2];if((u.x-i.x)*(l.y-i.y)>=(u.y-i.y)*(l.x-i.x))e.pop();else break}e.push(l)}return e.pop(),t.length===1&&e.length===1&&t[0].x===e[0].x&&t[0].y===e[0].y?t:t.concat(e)}function Je(r){const t=q(),e=C(()=>t.value?.width??0),a=C(()=>t.value?.height??0);return Z(()=>{const l=me(r);if(l){t.value={width:l.offsetWidth,height:l.offsetHeight};const u=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const c=i[0];let p,y;if("borderBoxSize"in c){const f=c.borderBoxSize,g=Array.isArray(f)?f[0]:f;p=g.inlineSize,y=g.blockSize}else p=l.offsetWidth,y=l.offsetHeight;t.value={width:p,height:y}});return u.observe(l,{box:"border-box"}),()=>u.unobserve(l)}else t.value=void 0}),{width:e,height:a}}var Ze=S({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(r){const t=ge();return(e,a)=>o(t)||e.forceMount?(w(),B(xe,{key:0,to:e.to,disabled:e.disabled,defer:e.defer},[k(e.$slots,"default")],8,["to","disabled","defer"])):E("v-if",!0)}}),Qe=Ze;const[ie,et]=Y("PopperRoot");var tt=S({inheritAttrs:!1,__name:"PopperRoot",setup(r){const t=q();return et({anchor:t,onAnchorChange:e=>t.value=e}),(e,a)=>k(e.$slots,"default")}}),rt=tt,ot=S({__name:"PopperAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(r){const t=r,{forwardRef:e,currentElement:a}=F(),l=ie();return ne(()=>{l.onAnchorChange(t.reference??a.value)}),(u,i)=>(w(),B(o(J),{ref:o(e),as:u.as,"as-child":u.asChild},{default:P(()=>[k(u.$slots,"default")]),_:3},8,["as","as-child"]))}}),at=ot;function nt(r){return r!==null}function st(r){return{name:"transformOrigin",options:r,fn(t){const{placement:e,rects:a,middlewareData:l}=t,i=l.arrow?.centerOffset!==0,c=i?0:r.arrowWidth,p=i?0:r.arrowHeight,[y,f]=K(e),g={start:"0%",center:"50%",end:"100%"}[f],b=(l.arrow?.x??0)+c/2,m=(l.arrow?.y??0)+p/2;let n="",s="";return y==="bottom"?(n=i?g:`${b}px`,s=`${-p}px`):y==="top"?(n=i?g:`${b}px`,s=`${a.floating.height+p}px`):y==="right"?(n=`${-p}px`,s=i?g:`${m}px`):y==="left"&&(n=`${a.floating.width+p}px`,s=i?g:`${m}px`),{data:{x:n,y:s}}}}}function K(r){const[t,e="center"]=r.split("-");return[t,e]}const it={side:"bottom",sideOffset:0,sideFlip:!0,align:"center",alignOffset:0,alignFlip:!0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[jt,lt]=Y("PopperContent");var ut=S({inheritAttrs:!1,__name:"PopperContent",props:qe({side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...it}),emits:["placed"],setup(r,{emit:t}){const e=r,a=t,l=ie(),{forwardRef:u,currentElement:i}=F(),c=q(),p=q(),{width:y,height:f}=Je(p),g=C(()=>e.side+(e.align!=="center"?`-${e.align}`:"")),b=C(()=>typeof e.collisionPadding=="number"?e.collisionPadding:{top:0,right:0,bottom:0,left:0,...e.collisionPadding}),m=C(()=>Array.isArray(e.collisionBoundary)?e.collisionBoundary:[e.collisionBoundary]),n=C(()=>({padding:b.value,boundary:m.value.filter(nt),altBoundary:m.value.length>0})),s=C(()=>({mainAxis:e.sideFlip,crossAxis:e.alignFlip})),d=we(()=>[De({mainAxis:e.sideOffset+f.value,alignmentAxis:e.alignOffset}),e.prioritizePosition&&e.avoidCollisions&&te({...n.value,...s.value}),e.avoidCollisions&&Ne({mainAxis:!0,crossAxis:!!e.prioritizePosition,limiter:e.sticky==="partial"?Le():void 0,...n.value}),!e.prioritizePosition&&e.avoidCollisions&&te({...n.value,...s.value}),Ue({...n.value,apply:({elements:O,rects:V,availableWidth:ce,availableHeight:fe})=>{const{width:pe,height:ye}=V.reference,j=O.floating.style;j.setProperty("--reka-popper-available-width",`${ce}px`),j.setProperty("--reka-popper-available-height",`${fe}px`),j.setProperty("--reka-popper-anchor-width",`${pe}px`),j.setProperty("--reka-popper-anchor-height",`${ye}px`)}}),p.value&&ze({element:p.value,padding:e.arrowPadding}),st({arrowWidth:y.value,arrowHeight:f.value}),e.hideWhenDetached&&Fe({strategy:"referenceHidden",...n.value})]),v=C(()=>e.reference??l.anchor.value),{floatingStyles:h,placement:_,isPositioned:D,middlewareData:$}=Ee(v,c,{strategy:e.positionStrategy,placement:g,whileElementsMounted:(...O)=>He(...O,{layoutShift:!e.disableUpdateOnLayoutShift,animationFrame:e.updatePositionStrategy==="always"}),middleware:d}),M=C(()=>K(_.value)[0]),A=C(()=>K(_.value)[1]);ne(()=>{D.value&&a("placed")});const le=C(()=>$.value.arrow?.centerOffset!==0),ee=q("");G(()=>{i.value&&(ee.value=window.getComputedStyle(i.value).zIndex)});const ue=C(()=>$.value.arrow?.x??0),de=C(()=>$.value.arrow?.y??0);return lt({placedSide:M,onArrowChange:O=>p.value=O,arrowX:ue,arrowY:de,shouldHideArrow:le}),(O,V)=>(w(),x("div",{ref_key:"floatingRef",ref:c,"data-reka-popper-content-wrapper":"",style:W({...o(h),transform:o(D)?o(h).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee.value,"--reka-popper-transform-origin":[o($).transformOrigin?.x,o($).transformOrigin?.y].join(" "),...o($).hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}})},[H(o(J),L({ref:o(u)},O.$attrs,{"as-child":e.asChild,as:O.as,"data-side":M.value,"data-align":A.value,style:{animation:o(D)?void 0:"none"}}),{default:P(()=>[k(O.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4))}}),dt=ut;const[Q,ct]=Y("HoverCardRoot");var ft=S({__name:"HoverCardRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},openDelay:{type:Number,required:!1,default:700},closeDelay:{type:Number,required:!1,default:300}},emits:["update:open"],setup(r,{emit:t}){const e=r,a=t,{openDelay:l,closeDelay:u}=Se(e);F();const i=_e(e,"open",a,{defaultValue:e.defaultOpen,passive:e.open===void 0}),c=q(0),p=q(0),y=q(!1),f=q(!1),g=q(!1),b=q();function m(){clearTimeout(p.value),c.value=window.setTimeout(()=>i.value=!0,l.value)}function n(){clearTimeout(c.value),!y.value&&!f.value&&(p.value=window.setTimeout(()=>i.value=!1,u.value))}function s(){i.value=!1}return ct({open:i,onOpenChange(d){i.value=d},onOpen:m,onClose:n,onDismiss:s,hasSelectionRef:y,isPointerDownOnContentRef:f,isPointerInTransitRef:g,triggerElement:b}),(d,v)=>(w(),B(o(rt),null,{default:P(()=>[k(d.$slots,"default",{open:o(i)})]),_:3}))}}),pt=ft;function X(r){return t=>t.pointerType==="touch"?void 0:r()}function yt(r){const t=[],e=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;e.nextNode();)t.push(e.currentNode);return t}var vt=S({__name:"HoverCardContentImpl",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(r,{emit:t}){const e=r,a=t,l=oe(e),{forwardRef:u,currentElement:i}=F(),c=Q(),{isPointerInTransit:p,onPointerExit:y}=Ie(c.triggerElement,i);be(c.isPointerInTransitRef,p,{direction:"rtl"}),y(()=>{c.onClose()});const f=q(!1);let g;G(m=>{if(f.value){const n=document.body;g=n.style.userSelect||n.style.webkitUserSelect,n.style.userSelect="none",n.style.webkitUserSelect="none",m(()=>{n.style.userSelect=g,n.style.webkitUserSelect=g})}});function b(){f.value=!1,c.isPointerDownOnContentRef.value=!1,Oe(()=>{document.getSelection()?.toString()!==""&&(c.hasSelectionRef.value=!0)})}return Z(()=>{i.value&&(document.addEventListener("pointerup",b),yt(i.value).forEach(n=>n.setAttribute("tabindex","-1")))}),ke(()=>{document.removeEventListener("pointerup",b),c.hasSelectionRef.value=!1,c.isPointerDownOnContentRef.value=!1}),(m,n)=>(w(),B(o(Ce),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:n[1]||(n[1]=s=>a("escapeKeyDown",s)),onPointerDownOutside:n[2]||(n[2]=s=>a("pointerDownOutside",s)),onFocusOutside:n[3]||(n[3]=Be(s=>a("focusOutside",s),["prevent"])),onDismiss:o(c).onDismiss},{default:P(()=>[H(o(dt),L({...o(l),...m.$attrs},{ref:o(u),"data-state":o(c).open.value?"open":"closed",style:{userSelect:f.value?"text":void 0,WebkitUserSelect:f.value?"text":void 0,"--reka-hover-card-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-hover-card-content-available-width":"var(--reka-popper-available-width)","--reka-hover-card-content-available-height":"var(--reka-popper-available-height)","--reka-hover-card-trigger-width":"var(--reka-popper-anchor-width)","--reka-hover-card-trigger-height":"var(--reka-popper-anchor-height)"},onPointerdown:n[0]||(n[0]=s=>{s.currentTarget.contains(s.target)&&(f.value=!0),o(c).hasSelectionRef.value=!1,o(c).isPointerDownOnContentRef.value=!0})}),{default:P(()=>[k(m.$slots,"default")]),_:3},16,["data-state","style"])]),_:3},8,["onDismiss"]))}}),ht=vt,mt=S({__name:"HoverCardContent",props:{forceMount:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(r,{emit:t}){const l=ae(r,t),{forwardRef:u}=F(),i=Q();return(c,p)=>(w(),B(o(Pe),{present:c.forceMount||o(i).open.value},{default:P(()=>[H(ht,L(o(l),{ref:o(u),onPointerenter:p[0]||(p[0]=y=>o(X)(o(i).onOpen)(y))}),{default:P(()=>[k(c.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),gt=mt,wt=S({__name:"HoverCardPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(r){const t=r;return(e,a)=>(w(),B(o(Qe),Re($e(t)),{default:P(()=>[k(e.$slots,"default")]),_:3},16))}}),_t=wt,bt=S({__name:"HoverCardTrigger",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"a"}},setup(r){const{forwardRef:t,currentElement:e}=F(),a=Q();a.triggerElement=e;function l(){setTimeout(()=>{!a.isPointerInTransitRef.value&&!a.open.value&&a.onClose()},0)}return(u,i)=>(w(),B(o(at),{"as-child":"",reference:u.reference},{default:P(()=>[H(o(J),{ref:o(t),"as-child":u.asChild,as:u.as,"data-state":o(a).open.value?"open":"closed","data-grace-area-trigger":"",onPointerenter:i[0]||(i[0]=c=>o(X)(o(a).onOpen)(c)),onPointerleave:i[1]||(i[1]=c=>o(X)(l)(c)),onFocus:i[2]||(i[2]=c=>o(a).onOpen()),onBlur:i[3]||(i[3]=c=>o(a).onClose())},{default:P(()=>[k(u.$slots,"default")]),_:3},8,["as-child","as","data-state"])]),_:3},8,["reference"]))}}),Ct=bt;const Pt=S({__name:"HoverCard",props:{defaultOpen:{type:Boolean},open:{type:Boolean},openDelay:{},closeDelay:{}},emits:["update:open"],setup(r,{emit:t}){const l=ae(r,t);return(u,i)=>(w(),B(o(pt),L({"data-slot":"hover-card"},o(l)),{default:P(()=>[k(u.$slots,"default")]),_:3},16))}}),xt=S({__name:"HoverCardContent",props:{forceMount:{type:Boolean},side:{},sideOffset:{default:4},sideFlip:{type:Boolean},align:{},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},setup(r){const t=r,e=je(t,"class"),a=oe(e);return(l,u)=>(w(),B(o(_t),null,{default:P(()=>[H(o(gt),L({"data-slot":"hover-card-content"},o(a),{class:o(Me)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 rounded-md border p-4 shadow-md outline-hidden",t.class)}),{default:P(()=>[k(l.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),qt=S({__name:"HoverCardTrigger",props:{reference:{},asChild:{type:Boolean},as:{}},setup(r){const t=r;return(e,a)=>(w(),B(o(Ct),L({"data-slot":"hover-card-trigger"},t),{default:P(()=>[k(e.$slots,"default")]),_:3},16))}}),I=480,St="webp",U=se({}),z=se({});function re(r){return new URLSearchParams(Object.fromEntries(Object.entries(r).filter(([,t])=>t!=null&&t!==""))).toString()}function kt(){const{$useApi:r}=Ae(),e=(Te().public?.baseURL??"").replace(/\/+$/,"");function a(s,d,v=I){return`${e}/attachments/preview-file?${re({path:s,w:v,format:St,v:d})}`}function l(s){return`${e}/attachments/download-file?${re({path:s})}`}function u(s,d){const v=o(s);if(!v)return"";const h=d??I,_=`${v}|w=${h}`;return U[_]||(U[_]=a(v,void 0,h)),U[_]}async function i(s,d){const v=o(s);if(!v)return;const h=d??I,_=`${v}|w=${h}`;{U[_]=a(v,Date.now(),h);return}}function c(s){const d=o(s);if(!d)return"";const v=d;return z[v]||(z[v]=l(d)),z[v]}async function p(s,d){const v=o(s);if(!v)return;let h=z[v];if(h||(h=l(v),z[v]=h),!h)return;if(d)try{const D=await r.get(h,{responseType:"blob"}),$=new Blob([D.data]),M=URL.createObjectURL($),A=document.createElement("a");A.href=M,A.download=d,A.rel="noopener noreferrer",document.body.appendChild(A),A.click(),A.remove(),setTimeout(()=>URL.revokeObjectURL(M),1e4);return}catch{}const _=document.createElement("a");_.href=h,d&&(_.download=d),_.target="_blank",_.rel="noopener noreferrer",document.body.appendChild(_),_.click(),_.remove()}async function y(s){const{path:d,mimeType:v,name:h}=s;if(d){if(["image/jpeg","image/png","image/webp"].includes(v)){const _=new URL(a(d));_.searchParams.set("w","1920"),window.open(_.toString(),"_blank","noopener,noreferrer");return}await p(d,h)}}function f(s,d=I){const v=o(s);if(!v)return"";const h=a(v,void 0,d),_=a(v,void 0,d*2);return`${h} 1x, ${_} 2x`}function g(s){Object.keys(U).filter(d=>d.startsWith(`${s}|w=`)).forEach(d=>Reflect.deleteProperty(U,d)),Reflect.deleteProperty(z,s)}function b(s){s.forEach(g)}const m=new Set;async function n(s,d){if(!m.has(s)){m.add(s);try{await i(s,d)}finally{setTimeout(()=>m.delete(s),3e4)}}}return{getPreviewSrc:u,getPreviewSrcset:f,refreshPreview:i,getDownloadSrc:c,downloadAttachment:p,openAttachment:y,invalidateByPath:g,invalidateMany:b,onImgError:n}}const Bt=["src","srcset"],Ot={class:"flex items-center gap-3"},Rt=["src","srcset"],$t={class:"min-w-0"},At={class:"font-medium"},Tt={class:"text-xs text-neutral-500 truncate"},Et={key:0,class:"text-xs text-gray-600 truncate"},Ht={key:1,class:"flex items-center gap-3"},Dt=["src","srcset"],Nt={key:0,class:"truncate"},Ut={class:"text-xs text-neutral-400"},It=S({__name:"UserListItem",props:{fullName:{},roleName:{},size:{},hover:{type:Boolean},info:{},avatarUrl:{},hideFullName:{type:Boolean},dark:{type:Boolean},tg:{}},setup(r){const t=new Map;function e(n,s){if(!n)return;const d=s?`${n}|w=${s}`:n,v=t.get(d);if(v)return v;const h=g(n,s);return t.set(d,h),h}const a=q(!1);Z(()=>{a.value=!0});const l=C(()=>{switch(i.size){case"sm":return 28;case"lg":return 40;default:return 32}}),u=C(()=>{if(a.value)return e(i.avatarUrl,l.value)}),i=r;function c(n){const s=(n||"").trim().replace(/\s+/g," ");if(!s)return"∎";const d=s.split(" ");return d.length>=2?(d[0][0]+d[1][0]).toUpperCase():s.slice(0,2).toUpperCase()}function p(n){const s=(n||"").toLowerCase();let d=5381;for(let h=0;h<s.length;h++)d=(d<<5)+d+s.charCodeAt(h),d|=0;return{h:Math.abs(d)%360,s:65,l:45}}const y=C(()=>{const{h:n,s,l:d}=p(i.fullName);return{backgroundColor:`hsl(${n}deg ${s}% ${d}%)`,color:"#fff"}}),f=C(()=>{switch(i.size){case"sm":return"h-7 w-7 text-[10px]";case"lg":return"h-10 w-10 text-sm";default:return"h-8 w-8 text-xs"}}),{getPreviewSrc:g,getPreviewSrcset:b,onImgError:m}=kt();return(n,s)=>{const d=qt,v=xt,h=Pt;return n.hover?(w(),B(h,{key:0},{default:P(()=>[H(d,{"as-child":""},{default:P(()=>[n.avatarUrl?(w(),x("div",{key:0,class:T(["inline-flex items-center justify-center rounded-full cursor-pointer",o(f)]),"aria-hidden":"true"},[o(u)?(w(),x("img",{key:o(u),src:o(u),srcset:o(b)(n.avatarUrl,o(l)),alt:"avatar",class:"w-full h-full rounded-full object-cover",loading:"lazy",referrerpolicy:"no-referrer",onError:s[0]||(s[0]=()=>o(m)(n.avatarUrl,o(l)))},null,40,Bt)):E("",!0)],2)):(w(),x("div",{key:1,class:T(["inline-flex items-center justify-center cursor-pointer rounded-full font-semibold",o(f)]),style:W(o(y)),"aria-hidden":"true"},R(c(n.fullName)),7))]),_:1}),H(v,{class:"w-56"},{default:P(()=>[N("div",Ot,[n.avatarUrl?(w(),x("div",{key:0,class:T(["flex items-center justify-center rounded-full shrink-0",o(f)]),"aria-hidden":"true"},[o(u)?(w(),x("img",{key:o(u),src:o(u),srcset:o(b)(n.avatarUrl,o(l)),alt:"avatar",class:"w-full h-full rounded-full object-cover",loading:"lazy",referrerpolicy:"no-referrer",onError:s[1]||(s[1]=()=>o(m)(n.avatarUrl,o(l)))},null,40,Rt)):E("",!0)],2)):(w(),x("div",{key:1,class:T(["flex items-center justify-center rounded-full font-semibold shrink-0",o(f)]),style:W(o(y)),"aria-hidden":"true"},R(c(n.fullName)),7)),N("div",$t,[N("div",At,R(n.fullName||"—"),1),N("span",Tt,R(n.tg),1),n.roleName?(w(),x("div",Et,R(n.roleName),1)):E("",!0)])])]),_:1})]),_:1})):(w(),x("div",Ht,[n.avatarUrl?(w(),x("div",{key:0,class:T([o(f),"flex items-center justify-center rounded-full font-semibold shrink-0"]),"aria-hidden":"true"},[o(u)?(w(),x("img",{key:o(u),src:o(u),srcset:o(b)(n.avatarUrl,o(l)),alt:"avatar",class:"w-full h-full rounded-full object-cover",loading:"lazy",referrerpolicy:"no-referrer",onError:s[2]||(s[2]=()=>o(m)(n.avatarUrl,o(l)))},null,40,Dt)):E("",!0)],2)):(w(),x("div",{key:1,class:T(["flex items-center justify-center rounded-full font-semibold shrink-0",o(f)]),style:W(o(y)),"aria-hidden":"true"},R(c(n.fullName)),7)),N("div",{class:T(["flex flex-col leading-tight min-w-0",n.dark?"text-neutral-300":""])},[n.hideFullName?E("",!0):(w(),x("span",Nt,R(n.fullName||"—"),1)),N("span",Ut,R(n.tg),1),n.roleName?(w(),x("span",{key:1,class:T(["text-xs text-gray-600 truncate",n.dark?"text-neutral-400":""])},R(n.roleName),3)):E("",!0)],2)]))}}});export{at as P,Qe as T,It as _,rt as a,dt as b,Pt as c,qt as d,xt as e,kt as u};
