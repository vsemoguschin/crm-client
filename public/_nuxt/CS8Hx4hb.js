import{_ as Je}from"./Bmr5wyhr.js";import{_ as re,a as ie,b as ue}from"./DkMjgWCi.js";import{_ as Be}from"./CY7rJOej.js";import{_ as q,c as Oe,v as ke}from"./D8Osd5Ax.js";import{a as we,b as ce,c as pe,d as me,_ as _e}from"./B-kig6KZ.js";import{_ as Qe}from"./Pvv-dh1L.js";import{_ as fe}from"./BcuVElyA.js";import{_ as ve}from"./mqOaxR0N.js";import{e as Y,g as ee,r as h,B as K,m as C,o as n,w as t,b as e,d as o,a as r,c as k,D as z,l as a,A as R,t as D,H as ae,i as ne,F,z as S,h as Ie,v as W,M as Q,E as qe,G,u as Ye}from"./LcRD3ia0.js";import{_ as Ne,a as We,b as Ze}from"./CNLsaPwj.js";import{_ as et}from"./BCRlC5xu.js";import{_ as Le}from"./fRExJa2e.js";import{_ as tt}from"./CP8umD4q.js";import{b as Ve,c as Te,a as De,d as he,e as Fe,_ as Se}from"./Df1Q6CGn.js";import{_ as Ce}from"./BqmAL8DW.js";import{_ as Me}from"./Dbg8U1qb.js";import{_ as Pe}from"./YaXf-8Sh.js";import{_ as at,a as nt,b as lt,c as ot,d as st}from"./AeDsR3BR.js";import{_ as rt}from"./CCJdEHHg.js";import{_ as it}from"./Da2JRHOT.js";import{_ as ut}from"./BsJBhgTW.js";import{_ as je,a as Re,b as He}from"./CACSUplU.js";import{_ as dt,a as ct,b as pt,c as mt,d as _t,e as ft}from"./xEZuT4Nf.js";import{C as vt,_ as gt}from"./BUo7Dhyt.js";import{C as yt,a as xt}from"./BcyKike4.js";import{X as bt}from"./D5ydJhlK.js";import{_ as wt}from"./BXoTK-I8.js";import{u as Ct,g as Pt,a as Ut,b as $t,F as Ee,A as se}from"./DSl2Rovl.js";import{d as kt}from"./Cxp-zkhu.js";import{u as J}from"./Dt19OLxm.js";import{Q as Ge}from"./DVXwaM75.js";import"./DfRdkKc3.js";import"./D9TSNOAg.js";import"./DkkQ8vn7.js";import"./D8EW8v7U.js";import"./BdQOAs7V.js";import"./BOGtf0gU.js";import"./QkXyQO2w.js";import"./D6LOIvye.js";const It={class:"flex flex-col gap-6 mt-2"},Vt={class:"relative"},Tt={class:"relative"},Dt={class:"relative"},ht={class:"relative"},Ft={key:0,class:"text-red-500 text-sm"},St={key:0},Mt={key:1},ze=Y({__name:"AccountsCreateModal",emits:["account-created"],setup(x,{emit:w}){const{$useApi:_}=ee(),p=h(!1),s=h(null),y=h(!1),U=h(!0),l={name:"",accountNumber:"",balance:0,balanceStartDate:"",isReal:!1},d=h({...l}),m=w,v=async()=>{y.value=!0,s.value=null;try{await _.post("planfact/accounts",d.value),p.value=!1,m("account-created")}catch(I){const i=I.response?.data?.message||"Ошибка при создании отзыва";s.value=i.message}finally{y.value=!1}};return K([d],()=>{const{name:I,accountNumber:i,balance:c,balanceStartDate:g}=d.value;U.value=!(I&&i&&c&&g)},{deep:!0}),K(p,I=>{I||(d.value={...l},s.value=null)}),(I,i)=>{const c=q,g=we,E=me,A=pe,u=fe,P=ve,$=Qe,V=ce,b=_e;return n(),C(b,{open:a(p),"onUpdate:open":i[4]||(i[4]=B=>ae(p)?p.value=B:null)},{default:t(()=>[e(g,{"as-child":""},{default:t(()=>[e(c,null,{default:t(()=>i[5]||(i[5]=[o("Создать счет",-1)])),_:1,__:[5]})]),_:1}),e(V,{class:"max-w-[400px] flex flex-col"},{default:t(()=>[e(A,null,{default:t(()=>[e(E,null,{default:t(()=>i[6]||(i[6]=[o("Создание счета ",-1)])),_:1,__:[6]})]),_:1}),r("div",It,[r("div",Vt,[a(d).name?(n(),C(u,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>i[7]||(i[7]=[o(" Название ",-1)])),_:1,__:[7]})):z("",!0),e(P,{modelValue:a(d).name,"onUpdate:modelValue":i[0]||(i[0]=B=>a(d).name=B),placeholder:"Название. Например ТБанк",class:R(a(d).name?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"])]),r("div",Tt,[a(d).accountNumber?(n(),C(u,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>i[8]||(i[8]=[o(" Номер счета ",-1)])),_:1,__:[8]})):z("",!0),e(P,{modelValue:a(d).accountNumber,"onUpdate:modelValue":i[1]||(i[1]=B=>a(d).accountNumber=B),placeholder:"Номер счета",class:R(a(d).accountNumber?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"])]),r("div",Dt,[e(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>i[9]||(i[9]=[o(" Начальный остаток ",-1)])),_:1,__:[9]}),e(P,{modelValue:a(d).balance,"onUpdate:modelValue":i[2]||(i[2]=B=>a(d).balance=B),type:"number",placeholder:"Начальный остаток",class:R(a(d).balance?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"])]),r("div",ht,[e(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>i[10]||(i[10]=[o(" Дата начального остатка ",-1)])),_:1,__:[10]}),e(P,{modelValue:a(d).balanceStartDate,"onUpdate:modelValue":i[3]||(i[3]=B=>a(d).balanceStartDate=B),type:"date",placeholder:"Дата начального остатка",class:R(a(d).balanceStartDate?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"])])]),a(s)?(n(),k("div",Ft,D(a(s)),1)):z("",!0),e($,null,{default:t(()=>[e(c,{disabled:a(U)||a(y),onClick:v},{default:t(()=>[a(y)?(n(),k("span",St,"Сохранение...")):(n(),k("span",Mt,"Создать"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])}}}),At={class:"grow mt-2"},Ot=Y({__name:"Accounts",setup(x){const{$useApi:w}=ee(),_=h([{name:"",accountNumber:"",balance:0,comment:"",isReal:!1}]),p=async()=>{const{data:s}=await w.get("planfact/accounts",{});_.value=s,console.log(s)};return ne(()=>{p()}),(s,y)=>{const U=ze,l=Ze,d=et,m=We,v=he,I=De,i=Te,c=Se,g=Fe,E=Ve,A=Le,u=tt,P=Ne;return n(),k("div",null,[e(U,{onAccountCreated:p}),r("div",At,[e(P,{class:"h-full"},{default:t(()=>[e(m,{class:"pb-0"},{default:t(()=>[e(l,null,{default:t(()=>y[0]||(y[0]=[o("Счета",-1)])),_:1,__:[0]}),e(d)]),_:1}),e(A,{class:"p-0"},{default:t(()=>[e(E,null,{default:t(()=>[e(i,null,{default:t(()=>[e(I,null,{default:t(()=>[e(v,{class:"text-left"},{default:t(()=>y[1]||(y[1]=[o("Название",-1)])),_:1,__:[1]}),e(v,{class:"text-right"},{default:t(()=>y[2]||(y[2]=[o("Баланс",-1)])),_:1,__:[2]}),e(v,{class:"text-right"},{default:t(()=>y[3]||(y[3]=[o("Реквизиты",-1)])),_:1,__:[3]})]),_:1})]),_:1}),e(g,null,{default:t(()=>[(n(!0),k(F,null,S(a(_),($,V)=>(n(),C(I,{key:$.accountNumber},{default:t(()=>[e(c,{class:"font-medium whitespace-nowrap"},{default:t(()=>[o(D(V+1+". "+$.name),1)]),_:2},1024),e(c,{class:"text-right"},{default:t(()=>[o(D($.balance.toLocaleString()+"₽"),1)]),_:2},1024),e(c,{class:"text-right"},{default:t(()=>[o(D($.accountNumber),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(u,{class:"p-0"})]),_:1})])])}}}),Et={class:"space-y-5"},Bt={class:"relative w-full"},Nt={class:"relative"},Lt={class:"flex gap-2"},jt={class:"relative"},Rt={class:"relative"},Ht={class:"flex justify-end gap-2 mt-4"},Ke=Y({__name:"CreateModal",emits:["category-created"],setup(x,{emit:w}){const{$useApi:_}=ee(),{toast:p}=Ie(),s=h(!1),y=h([]),U=h("Доходы"),l=h(!0),d=w,m=h({name:"",type:"Доходы",description:"",parentId:null}),v=async i=>{try{const{data:c}=await _.get("planfact/expense-categories-by-type",{params:{type:i}});y.value=c}catch(c){console.error(c),p({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить категории."})}},I=async()=>{try{l.value=!0;const{data:i}=await _.post("planfact/expense-categories",m.value);p({title:"Успех",description:"Категория успешно создана."}),d("category-created",i),s.value=!1,l.value=!1,m.value={name:"",type:"Доходы",description:"",parentId:null}}catch(i){console.error(i),p({variant:"destructive",title:"Ошибка",description:"Не удалось создать категорию."})}};return K(s,i=>{i||(m.value={name:"",type:"Доходы",description:"",parentId:null})}),ne(async()=>{await v("Доходы")}),K(U,async i=>{m.value.type=i,await v(i)},{deep:!0}),K(m,i=>{console.log(i);const{name:c,type:g}=i;if(c&&g)return l.value=!1;l.value=!0},{deep:!0}),(i,c)=>{const g=q,E=we,A=me,u=Ce,P=pe,$=ue,V=ie,b=re,B=fe,T=Pe,f=ve,N=Me,H=ce,Z=_e;return n(),C(Z,{open:a(s),"onUpdate:open":c[5]||(c[5]=L=>ae(s)?s.value=L:null)},{default:t(()=>[e(E,null,{default:t(()=>[e(g,{variant:"secondary"},{default:t(()=>c[6]||(c[6]=[o("Создать статью",-1)])),_:1,__:[6]})]),_:1}),e(H,{class:""},{default:t(()=>[e(P,null,{default:t(()=>[e(A,null,{default:t(()=>c[7]||(c[7]=[o("Создание статьи",-1)])),_:1,__:[7]}),e(u)]),_:1}),r("div",Et,[r("div",Bt,[e(b,{modelValue:a(U),"onUpdate:modelValue":c[0]||(c[0]=L=>ae(U)?U.value=L:null)},{default:t(()=>[e(V,{class:"w-full"},{default:t(()=>[e($,{class:"w-full",value:"Доходы"},{default:t(()=>c[8]||(c[8]=[o("Доходы",-1)])),_:1,__:[8]}),e($,{class:"w-full",value:"Расходы"},{default:t(()=>c[9]||(c[9]=[o("Расходы",-1)])),_:1,__:[9]}),e($,{class:"w-full",value:"Активы"},{default:t(()=>c[10]||(c[10]=[o("Активы",-1)])),_:1,__:[10]}),e($,{class:"w-full",value:"Обязательства"},{default:t(()=>c[11]||(c[11]=[o("Обязательства",-1)])),_:1,__:[11]}),e($,{class:"w-full",value:"Капитал"},{default:t(()=>c[12]||(c[12]=[o("Капитал",-1)])),_:1,__:[12]})]),_:1})]),_:1},8,["modelValue"])]),r("div",Nt,[e(B,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>c[13]||(c[13]=[o(" Принадлежит к ",-1)])),_:1,__:[13]}),r("div",Lt,[(n(),C(T,{key:a(y).length,class:"min-w-[462px] w-[462px] overflow-hidden",items:a(y).map(L=>({value:L.id,label:L.name})),label:a(y).find(L=>L.id===a(m).parentId)?.name??"Выбрать","model-value":a(m).parentId,onSelectedItem:c[1]||(c[1]=L=>a(m).parentId=L)},null,8,["items","label","model-value"]))])]),r("div",jt,[e(f,{modelValue:a(m).name,"onUpdate:modelValue":c[2]||(c[2]=L=>a(m).name=L),placeholder:"Название категории",class:R(a(m).name?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"]),a(m).name?(n(),C(B,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>c[14]||(c[14]=[o(" Название категории ",-1)])),_:1,__:[14]})):z("",!0)]),r("div",Rt,[e(N,{modelValue:a(m).description,"onUpdate:modelValue":c[3]||(c[3]=L=>a(m).description=L),placeholder:"Описание"},null,8,["modelValue"]),a(m).description?(n(),C(B,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>c[15]||(c[15]=[o(" Описание ",-1)])),_:1,__:[15]})):z("",!0)])]),r("div",Ht,[e(g,{variant:"outline",onClick:c[4]||(c[4]=L=>s.value=!1)},{default:t(()=>c[16]||(c[16]=[o("Отмена",-1)])),_:1,__:[16]}),e(g,{disabled:a(l),onClick:I},{default:t(()=>c[17]||(c[17]=[o("Создать",-1)])),_:1,__:[17]},8,["disabled"])])]),_:1})]),_:1},8,["open"])}}}),Gt={class:"space-y-5"},zt={class:"relative"},Kt={class:"relative w-full"},Xt={class:"relative"},Jt={class:"flex gap-2"},Qt={class:"relative"},qt={class:"flex gap-2"},Yt={class:"relative"},Wt={class:"relative"},Zt={class:"relative"},ea={class:"flex justify-end gap-2 mt-4"},Xe=Y({__name:"CreateModal",emits:["counterparty-created"],setup(x,{emit:w}){const{$useApi:_}=ee(),{toast:p}=Ie(),s=h(!1),y=h([]),U=h([]),l=h(!0),d=w,m=h({title:"",inn:"",kpp:"",account:"",bankBic:"",bankName:"",contrAgentGroup:"",incomeExpenseCategoryId:null,outcomeExpenseCategoryId:null}),v=async()=>{try{const{data:c}=await _.get("planfact/expense-categories",{params:{operationType:"Поступление"}});y.value=c}catch(c){console.error(c),p({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить категории."})}},I=async()=>{try{const{data:c}=await _.get("planfact/expense-categories",{params:{operationType:"Выплата"}});U.value=c}catch(c){console.error(c),p({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить категории."})}},i=async()=>{try{l.value=!0;const{data:c}=await _.post("planfact/counter-parties",{title:m.value.title,inn:m.value.inn||"",kpp:m.value.kpp||"",account:m.value.account||"",bankBic:m.value.bankBic||"",bankName:m.value.bankName||"",contrAgentGroup:m.value.contrAgentGroup||"",incomeExpenseCategoryId:m.value.incomeExpenseCategoryId||null,outcomeExpenseCategoryId:m.value.outcomeExpenseCategoryId||null});p({title:"Успех",description:"Контрагент успешно создан."}),d("counterparty-created",c),s.value=!1,l.value=!1,m.value={title:"",inn:"",kpp:"",account:"",bankBic:"",bankName:"",contrAgentGroup:"",incomeExpenseCategoryId:null,outcomeExpenseCategoryId:null}}catch(c){console.error(c),p({variant:"destructive",title:"Ошибка",description:"Не удалось создать контрагента."})}};return K(s,c=>{c||(m.value={title:"",inn:"",kpp:"",account:"",bankBic:"",bankName:"",contrAgentGroup:"",incomeExpenseCategoryId:null,outcomeExpenseCategoryId:null})}),ne(async()=>{await v(),await I()}),K(m,c=>{const{title:g}=c;l.value=!g},{deep:!0}),(c,g)=>{const E=q,A=we,u=me,P=Ce,$=pe,V=ve,b=fe,B=lt,T=nt,f=st,N=rt,H=ot,Z=at,L=Pe,de=ce,le=_e;return n(),C(le,{open:a(s),"onUpdate:open":g[8]||(g[8]=M=>ae(s)?s.value=M:null)},{default:t(()=>[e(A,null,{default:t(()=>[e(E,{variant:"secondary"},{default:t(()=>g[9]||(g[9]=[o("Создать контрагента",-1)])),_:1,__:[9]})]),_:1}),e(de,{class:""},{default:t(()=>[e($,null,{default:t(()=>[e(u,null,{default:t(()=>g[10]||(g[10]=[o("Создание контрагента",-1)])),_:1,__:[10]}),e(P)]),_:1}),r("div",Gt,[r("div",zt,[e(V,{modelValue:a(m).title,"onUpdate:modelValue":g[0]||(g[0]=M=>a(m).title=M),placeholder:"Название контрагента",class:R(a(m).title?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"]),a(m).title?(n(),C(b,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>g[11]||(g[11]=[o(" Название контрагента ",-1)])),_:1,__:[11]})):z("",!0)]),r("div",Kt,[e(Z,{modelValue:a(m).contrAgentGroup,"onUpdate:modelValue":g[1]||(g[1]=M=>a(m).contrAgentGroup=M)},{default:t(()=>[e(T,null,{default:t(()=>[e(B,{placeholder:"Группа"})]),_:1}),e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(f,{class:"w-full",value:"Банки"},{default:t(()=>g[12]||(g[12]=[o("Банки",-1)])),_:1,__:[12]}),e(f,{class:"w-full",value:"Гос. органы"},{default:t(()=>g[13]||(g[13]=[o("Гос. органы",-1)])),_:1,__:[13]}),e(f,{class:"w-full",value:"Клиенты"},{default:t(()=>g[14]||(g[14]=[o("Клиенты",-1)])),_:1,__:[14]}),e(f,{class:"w-full",value:"Поставщики"},{default:t(()=>g[15]||(g[15]=[o("Поставщики",-1)])),_:1,__:[15]}),e(f,{class:"w-full",value:"Сотрудники"},{default:t(()=>g[16]||(g[16]=[o("Сотрудники",-1)])),_:1,__:[16]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",Xt,[e(b,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>g[17]||(g[17]=[o(" Категория для входящих операций ",-1)])),_:1,__:[17]}),r("div",Jt,[(n(),C(L,{key:a(y).length,class:"min-w-[462px] w-[462px] overflow-hidden",items:a(y).map(M=>({value:M.id,label:M.name})),label:a(y).find(M=>M.id===a(m).incomeExpenseCategoryId)?.name??"Выбрать","model-value":a(m).incomeExpenseCategoryId,onSelectedItem:g[2]||(g[2]=M=>a(m).incomeExpenseCategoryId=M)},null,8,["items","label","model-value"]))])]),r("div",Qt,[e(b,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>g[18]||(g[18]=[o(" Категория для исходящих операций ",-1)])),_:1,__:[18]}),r("div",qt,[(n(),C(L,{key:a(U).length,class:"min-w-[462px] w-[462px] overflow-hidden",items:a(U).map(M=>({value:M.id,label:M.name})),label:a(U).find(M=>M.id===a(m).outcomeExpenseCategoryId)?.name??"Выбрать","model-value":a(m).outcomeExpenseCategoryId,onSelectedItem:g[3]||(g[3]=M=>a(m).outcomeExpenseCategoryId=M)},null,8,["items","label","model-value"]))])]),r("div",Yt,[e(V,{modelValue:a(m).inn,"onUpdate:modelValue":g[4]||(g[4]=M=>a(m).inn=M),placeholder:"ИНН"},null,8,["modelValue"]),a(m).inn?(n(),C(b,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>g[19]||(g[19]=[o(" ИНН ",-1)])),_:1,__:[19]})):z("",!0)]),r("div",Wt,[e(V,{modelValue:a(m).kpp,"onUpdate:modelValue":g[5]||(g[5]=M=>a(m).kpp=M),placeholder:"КПП"},null,8,["modelValue"]),a(m).kpp?(n(),C(b,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>g[20]||(g[20]=[o(" КПП ",-1)])),_:1,__:[20]})):z("",!0)]),r("div",Zt,[e(V,{modelValue:a(m).account,"onUpdate:modelValue":g[6]||(g[6]=M=>a(m).account=M),placeholder:"Расчетный счет"},null,8,["modelValue"]),a(m).account?(n(),C(b,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>g[21]||(g[21]=[o(" Расчетный счет ",-1)])),_:1,__:[21]})):z("",!0)])]),r("div",ea,[e(E,{variant:"outline",onClick:g[7]||(g[7]=M=>s.value=!1)},{default:t(()=>g[22]||(g[22]=[o("Отмена",-1)])),_:1,__:[22]}),e(E,{disabled:a(l),onClick:i},{default:t(()=>g[23]||(g[23]=[o("Создать",-1)])),_:1,__:[23]},8,["disabled"])])]),_:1})]),_:1},8,["open"])}}}),ta={class:"flex gap-2 min-h-[600px]"},aa={class:"space-y-5 min-w-[450px]"},na={class:"relative w-full"},la={class:"relative"},oa={class:"relative"},sa={class:"space-y-3"},ra={class:"flex gap-4 justify-between"},ia={class:"relative"},ua={class:"relative flex-1"},da={class:"relative"},ca={class:"relative"},pa={class:"flex flex-col mt-6"},ma={class:"flex justify-end gap-2 mt-4"},_a=Y({__name:"OperationCreateModal",props:{accountId:{}},emits:["operation-created"],setup(x,{emit:w}){const{$useApi:_}=ee(),p=x,s=h(!1),y=h([]),U=h([]),l=h("Поступление"),d=h(!0),m=w,v=h({operationDate:"",operationType:"Поступление",payPurpose:"",accountId:p.accountId,operationPositions:[{amount:0,counterPartyId:null,expenseCategoryId:null}]}),I=W(()=>v.value.operationDate&&v.value.operationType&&v.value.accountId&&v.value.operationPositions?.length>0&&v.value.operationPositions.every(V=>V.amount>0&&V.counterPartyId&&V.expenseCategoryId)),i=W(()=>v.value.operationPositions?.reduce((V,b)=>V+(b.amount||0),0)||0),c=async V=>{try{const{data:b}=await _.get("planfact/expense-categories",{params:{operationType:V}});y.value=b}catch(b){console.error(b),Q({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить категории."})}},g=async()=>{try{const{data:V}=await _.get("planfact/counter-parties");U.value=V}catch(V){console.error(V),Q({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить контрагентов."})}},E=async()=>{try{d.value=!0;const{data:V}=await _.post("planfact/operation",{...v.value,operationPositions:v.value.operationPositions.map(b=>({amount:b.amount,counterPartyId:b.counterPartyId||null,expenseCategoryId:b.expenseCategoryId||null}))});Q({title:"Успех",description:"Операция успешно создана."}),m("operation-created",V),s.value=!1,d.value=!1,v.value={operationDate:"",operationType:"Поступление",payPurpose:"",accountId:p.accountId,operationPositions:[{amount:0,counterPartyId:null,expenseCategoryId:null}]}}catch(V){console.error(V),Q({variant:"destructive",title:"Ошибка",description:"Не удалось создать операцию."})}},A=()=>{v.value.operationPositions=[...v.value.operationPositions||[],{amount:0,counterPartyId:null,expenseCategoryId:null}]},u=V=>{v.value.operationPositions&&v.value.operationPositions.length>1?v.value.operationPositions.splice(V,1):Q({variant:"destructive",title:"Ошибка",description:"Нельзя удалить последнюю позицию."})},P=async V=>{y.value.push(V)},$=async V=>{U.value.push(V)};return ne(async()=>{await c("Поступление"),await g()}),K(s,V=>{V||(v.value={operationDate:"",operationType:"Поступление",payPurpose:"",accountId:p.accountId,operationPositions:[{amount:0,counterPartyId:null,expenseCategoryId:null}]})}),K(l,async V=>{v.value.operationType=V,await c(V),await g(),v.value.operationPositions=v.value.operationPositions?.map(b=>({...b,expenseCategoryId:null}))||[{amount:0,counterPartyId:null,expenseCategoryId:null}]},{deep:!0}),K(v,()=>{d.value=!I.value},{deep:!0}),(V,b)=>{const B=q,T=we,f=me,N=Ce,H=pe,Z=ue,L=ie,de=re,le=ve,M=fe,te=Me,Ue=Ke,$e=Xe,ge=Pe,ye=ce,oe=_e;return n(),C(oe,{open:s.value,"onUpdate:open":b[4]||(b[4]=j=>s.value=j)},{default:t(()=>[e(T,null,{default:t(()=>[e(B,null,{default:t(()=>b[5]||(b[5]=[o("Создать операцию",-1)])),_:1,__:[5]})]),_:1}),e(ye,{class:"max-w-[1200px]"},{default:t(()=>[e(H,null,{default:t(()=>[e(f,null,{default:t(()=>b[6]||(b[6]=[o("Создание операции",-1)])),_:1,__:[6]}),e(N)]),_:1}),r("div",ta,[r("div",aa,[r("div",na,[e(de,{modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=j=>l.value=j)},{default:t(()=>[e(L,{class:"w-full"},{default:t(()=>[e(Z,{class:"w-full",value:"Поступление"},{default:t(()=>b[7]||(b[7]=[o("Поступление",-1)])),_:1,__:[7]}),e(Z,{class:"w-full",value:"Выплата"},{default:t(()=>b[8]||(b[8]=[o("Выплата",-1)])),_:1,__:[8]}),e(Z,{class:"w-full",value:"Начисление"},{default:t(()=>b[9]||(b[9]=[o("Начисление",-1)])),_:1,__:[9]})]),_:1})]),_:1},8,["modelValue"])]),r("div",la,[e(le,{modelValue:v.value.operationDate,"onUpdate:modelValue":b[1]||(b[1]=j=>v.value.operationDate=j),type:"date",placeholder:"Дата операции",class:R(v.value.operationDate?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"]),e(M,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>b[10]||(b[10]=[o(" Дата операции ",-1)])),_:1,__:[10]})]),r("div",oa,[e(te,{modelValue:v.value.payPurpose,"onUpdate:modelValue":b[2]||(b[2]=j=>v.value.payPurpose=j),placeholder:"Назначение платежа"},null,8,["modelValue"]),v.value.payPurpose?(n(),C(M,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>b[11]||(b[11]=[o(" Назначение платежа ",-1)])),_:1,__:[11]})):z("",!0)])]),r("div",sa,[r("div",ra,[r("div",ia,[e(le,{value:i.value,type:"number",placeholder:"Общая сумма",disabled:"",class:"bg-gray-100"},null,8,["value"]),e(M,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>b[12]||(b[12]=[o(" Общая сумма ",-1)])),_:1,__:[12]})]),e(Ue,{onCategoryCreated:P}),e($e,{onCounterpartyCreated:$})]),(n(!0),k(F,null,S(v.value.operationPositions,(j,xe)=>(n(),k("div",{key:xe,class:"flex gap-2 items-center"},[r("div",ua,[e(le,{modelValue:j.amount,"onUpdate:modelValue":O=>j.amount=O,modelModifiers:{number:!0},type:"number",placeholder:"Сумма",class:R(j.amount>0?"":"outline-1 outline-rose-300")},null,8,["modelValue","onUpdate:modelValue","class"]),e(M,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>b[13]||(b[13]=[o(" Сумма ",-1)])),_:1,__:[13]})]),r("div",da,[e(M,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>b[14]||(b[14]=[o(" Статья ",-1)])),_:1,__:[14]}),e(ge,{class:"min-w-[200px] w-[200px] overflow-hidden",items:y.value.map(O=>({value:O.id,label:O.name})),label:y.value.find(O=>O.id===j.expenseCategoryId)?.name??"Выбрать","model-value":j.expenseCategoryId,onSelectedItem:O=>j.expenseCategoryId=O},null,8,["items","label","model-value","onSelectedItem"])]),r("div",ca,[e(M,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>b[15]||(b[15]=[o(" Контрагент ",-1)])),_:1,__:[15]}),e(ge,{class:"min-w-[250px] w-[250px] overflow-hidden",items:U.value.map(O=>({value:O.id,label:O.title})),label:U.value.find(O=>O.id===j.counterPartyId)?.title??"Не выбран","model-value":j.counterPartyId,onSelectedItem:O=>j.counterPartyId=O},null,8,["items","label","model-value","onSelectedItem"])]),e(B,{variant:"destructive",disabled:v.value.operationPositions?.length===1,onClick:O=>u(xe)},{default:t(()=>b[16]||(b[16]=[o(" X ",-1)])),_:2,__:[16]},1032,["disabled","onClick"])]))),128)),r("div",pa,[e(B,{class:"ml-auto",onClick:A},{default:t(()=>b[17]||(b[17]=[o("Добавить позицию",-1)])),_:1,__:[17]})])])]),r("div",ma,[e(B,{variant:"outline",onClick:b[3]||(b[3]=j=>s.value=!1)},{default:t(()=>b[18]||(b[18]=[o("Отмена",-1)])),_:1,__:[18]}),e(B,{disabled:d.value,onClick:E},{default:t(()=>b[19]||(b[19]=[o("Создать",-1)])),_:1,__:[19]},8,["disabled"])])]),_:1})]),_:1},8,["open"])}}}),fa={class:"hidden space-x-1 lg:flex"},va={key:1,class:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs"},ga=Y({__name:"DataTableFacetedFilter",props:{column:{},title:{},options:{}},setup(x){const w=x,_=W(()=>w.column?.getFacetedUniqueValues()),p=W(()=>new Set(w.column?.getFilterValue()));return(s,y)=>{const U=it,l=ut,d=q,m=je,v=ct,I=mt,i=ft,c=_t,g=gt,E=pt,A=dt,u=Re,P=He;return n(),C(P,null,{default:t(()=>[e(m,{"as-child":""},{default:t(()=>[e(d,{variant:"outline",size:"sm",class:"h-8 border-dashed"},{default:t(()=>[e(a(vt),{class:"mr-2 h-4 w-4"}),o(" "+D(s.title)+" ",1),p.value.size>0?(n(),k(F,{key:0},[e(U,{orientation:"vertical",class:"mx-2 h-4"}),e(l,{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden"},{default:t(()=>[o(D(p.value.size),1)]),_:1}),r("div",fa,[p.value.size>1?(n(),C(l,{key:0,variant:"secondary",class:"rounded-sm px-1 font-normal"},{default:t(()=>[o(D(p.value.size),1)]),_:1})):(n(!0),k(F,{key:1},S(s.options.filter($=>p.value.has($.value)),$=>(n(),C(l,{key:$.value,variant:"secondary",class:"rounded-sm px-1 font-normal"},{default:t(()=>[o(D($.label),1)]),_:2},1024))),128))])],64)):z("",!0)]),_:1})]),_:1}),e(u,{class:"w-[250px] p-0",align:"start"},{default:t(()=>[e(A,{"filter-function":($,V)=>$.filter(b=>b.label.toLowerCase()?.includes(V))},{default:t(()=>[e(v,{placeholder:s.title},null,8,["placeholder"]),e(E,null,{default:t(()=>[e(I,null,{default:t(()=>y[1]||(y[1]=[o("Нет совпадений.",-1)])),_:1,__:[1]}),e(c,null,{default:t(()=>[(n(!0),k(F,null,S(s.options,$=>(n(),C(i,{key:$.value,value:$,onSelect:V=>{p.value.has($.value)?p.value.delete($.value):p.value.add($.value);const B=Array.from(p.value);s.column?.setFilterValue(B.length?B:void 0)}},{default:t(()=>[r("div",{class:R(a(Oe)("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",p.value.has($.value)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},[e(a(yt),{class:R(a(Oe)("h-4 w-4"))},null,8,["class"])],2),$.icon?(n(),C(qe($.icon),{key:0,class:"mr-2 h-4 w-4 text-muted-foreground"})):z("",!0),r("span",null,D($.label),1),_.value?.get($.value)?(n(),k("span",va,D(_.value.get($.value)),1)):z("",!0)]),_:2},1032,["value","onSelect"]))),128))]),_:1}),p.value.size>0?(n(),k(F,{key:0},[e(g),e(c,null,{default:t(()=>[e(i,{value:{label:"Очистить"},class:"justify-center text-center",onSelect:y[0]||(y[0]=$=>s.column?.setFilterValue(void 0))},{default:t(()=>y[2]||(y[2]=[o(" Очистить ",-1)])),_:1,__:[2]})]),_:1})],64)):z("",!0)]),_:1})]),_:1},8,["filter-function"])]),_:1})]),_:1})}}}),ya={class:"flex items-center justify-between"},xa={class:"flex flex-1 items-center space-x-2"},ba=Y({__name:"DataTableToolbar",props:{table:{},operationTypes:{},contragentsList:{}},setup(x){const w=x,_=W(()=>w.table.getState().columnFilters.length>0);return(p,s)=>{const y=ga,U=q;return n(),k("div",ya,[r("div",xa,[p.table.getColumn("operationType")?(n(),C(y,{key:0,column:p.table.getColumn("operationType"),title:"Тип операции",options:p.operationTypes},null,8,["column","options"])):z("",!0),_.value?(n(),C(U,{key:1,variant:"secondary",class:"h-8 px-2 lg:px-3",onClick:s[0]||(s[0]=l=>p.table.resetColumnFilters())},{default:t(()=>[s[1]||(s[1]=o(" Сброс ",-1)),e(a(bt),{class:"ml-2 h-4 w-4"})]),_:1,__:[1]})):z("",!0)])])}}}),wa={class:"flex justify-between mb-1 mt-[-33px]"},Ca={class:"ml-[170px]"},Pa={class:"rounded-md border max-h-[calc(100vh-213px)] overflow-y-scroll bg-slate-100"},Ua=Y({__name:"DataTable",props:{columns:{},contragents:{},data:{}},emits:["item-clicked"],setup(x,{emit:w}){const _=x,p=h([]),s=h([]),y=h({}),U=[{value:"Перемещение",label:"Перемещение"},{value:"Поступление",label:"Поступление"},{value:"Выплата",label:"Выплата"}],l=h([]);l.value=[..._.contragents.map(I=>({label:I,value:I}))];const d=Ct({get data(){return _.data},get columns(){return _.columns},getCoreRowModel:$t(),getSortedRowModel:Ut(),getFilteredRowModel:Pt(),onSortingChange:I=>ke(I,p),onColumnFiltersChange:I=>ke(I,s),onColumnVisibilityChange:I=>ke(I,y),state:{get sorting(){return p.value},get columnFilters(){return s.value},get columnVisibility(){return y.value}}}),m=w,v=I=>{m("item-clicked",I)};return(I,i)=>{const c=ba,g=q,E=je,A=wt,u=Re,P=He,$=he,V=De,b=Te,B=Se,T=Fe,f=Ve;return n(),k(F,null,[r("div",wa,[r("div",Ca,[e(c,{table:a(d),"operation-types":U,"contragents-list":a(l)},null,8,["table","contragents-list"])]),r("div",null,[e(P,null,{default:t(()=>[e(E,null,{default:t(()=>[e(g,{variant:"outline",class:"ml-auto"},{default:t(()=>[i[0]||(i[0]=o(" Колонки ",-1)),e(a(xt),{class:"w-4 h-4 ml-2"})]),_:1,__:[0]})]),_:1}),e(u,{class:"w-[180px]"},{default:t(()=>[(n(!0),k(F,null,S(a(d).getAllColumns().filter(N=>N.getCanHide()),N=>(n(),k("div",{key:N.id},[e(A,{checked:N.getIsVisible(),"onUpdate:checked":H=>N.toggleVisibility(!!H)},null,8,["checked","onUpdate:checked"]),o(" "+D(N.columnDef.ruName),1)]))),128))]),_:1})]),_:1})])]),r("div",Pa,[e(f,null,{default:t(()=>[e(b,{class:"bg-white"},{default:t(()=>[(n(!0),k(F,null,S(a(d).getHeaderGroups(),N=>(n(),C(V,{key:N.id},{default:t(()=>[(n(!0),k(F,null,S(N.headers,H=>(n(),C($,{key:H.id},{default:t(()=>[H.isPlaceholder?z("",!0):(n(),C(a(Ee),{key:0,render:H.column.columnDef.header,props:H.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),e(T,null,{default:t(()=>[a(d).getRowModel().rows?.length?(n(!0),k(F,{key:0},S(a(d).getRowModel().rows,N=>(n(),C(V,{key:N.id,class:"cursor-pointer",onClick:H=>v(N.original.operationId)},{default:t(()=>[(n(!0),k(F,null,S(N.getVisibleCells(),H=>(n(),C(B,{key:H.id},{default:t(()=>[e(a(Ee),{render:H.column.columnDef.cell,props:H.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["onClick"]))),128)):(n(),C(V,{key:1},{default:t(()=>[e(B,{colspan:I.columns.length,class:"text-left"},{default:t(()=>i[1]||(i[1]=[o("Нет результатов.",-1)])),_:1,__:[1]},8,["colspan"])]),_:1}))]),_:1})]),_:1})])],64)}}}),$a={class:"flex gap-2 min-h-[600px]"},ka={class:"space-y-5 min-w-[450px]"},Ia={class:"relative w-full"},Va={class:"relative"},Ta={class:"relative"},Da={class:"space-y-3"},ha={class:"flex gap-4 justify-between"},Fa={class:"relative"},Sa={class:"relative flex-1"},Ma={class:"relative"},Aa={class:"relative"},Oa={class:"flex flex-col mt-6"},Ea={class:"flex justify-end gap-2 mt-4"},Ba=Y({__name:"OperationModal",props:{operation:{},isOpen:{type:Boolean}},emits:["update:isOpen","save","delete"],setup(x,{emit:w}){const{$useApi:_}=ee(),p=x,s=h([]),y=h([]),U=w,l=h({}),d=h({}),m=h(p.operation.operationType);K(()=>p.operation,T=>{T?(l.value={...T,operationPositions:T.operationPositions?.map(f=>({...f}))||[{amount:0,counterPartyId:null,expenseCategoryId:null}]},d.value={...T,operationPositions:T.operationPositions?.map(f=>({...f}))||[{amount:0,counterPartyId:null,expenseCategoryId:null}]}):(l.value={operationPositions:[{amount:0,counterPartyId:null,expenseCategoryId:null,operationId:p.operation.id}]},d.value={operationPositions:[{amount:0,counterPartyId:null,expenseCategoryId:null,operationId:p.operation.id}]})},{immediate:!0});const v=W(()=>JSON.stringify(l.value)!==JSON.stringify(d.value)),I=h(0),i=W(()=>l.value.operationPositions&&l.value.operationPositions?.length>0&&l.value.operationPositions.every(T=>T.amount>0&&T.counterPartyId&&T.expenseCategoryId)),c=()=>{l.value={...d.value,operationPositions:d.value.operationPositions?.map(T=>({...T}))||[{amount:0,counterPartyId:null,expenseCategoryId:null,operationId:p.operation.id}]},U("update:isOpen",!1)},g=async()=>{if(l.value&&l.value.operationId&&i.value)try{const{data:T}=await _.patch(`planfact/operation/${l.value.operationId}`,{...l.value,operationPositions:l.value.operationPositions?.map(f=>({id:f.id,amount:f.amount,counterPartyId:f.counterPartyId||null,expenseCategoryId:f.expenseCategoryId||null,operationId:l.value.operationId}))});U("save",T),U("update:isOpen",!1),Q({title:"Успех",description:"Операция успешно обновлена."})}catch(T){console.error(T),Q({variant:"destructive",title:"Ошибка",description:"Не удалось обновить операцию."})}else Q({variant:"destructive",title:"Ошибка",description:"Каждая позиция должна иметь сумму больше 0, контрагента и категорию."})},E=async()=>{l.value?.operationId&&(await A(l.value.operationId),U("delete"),U("update:isOpen",!1))},A=async T=>{try{await _.delete(`planfact/operation/${T}`),Q({title:"Успех",description:"Операция успешно удалена."})}catch(f){console.error(f),Q({variant:"destructive",title:"Ошибка",description:"Не удалось удалить операцию."})}},u=async T=>{try{const{data:f}=await _.get("planfact/expense-categories",{params:{operationType:T}});s.value=f}catch(f){console.error(f),Q({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить категории."})}},P=async()=>{try{const{data:T}=await _.get("planfact/counter-parties");y.value=T}catch(T){console.error(T),Q({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить контрагентов."})}},$=()=>{l.value.operationPositions=[...l.value.operationPositions||[],{amount:0,counterPartyId:null,expenseCategoryId:null,operationId:p.operation.id}]},V=T=>{l.value.operationPositions&&l.value.operationPositions.length>1?l.value.operationPositions.splice(T,1):Q({variant:"destructive",title:"Ошибка",description:"Нельзя удалить последнюю позицию."})},b=async T=>{s.value.push(T)},B=async T=>{y.value.push(T)};return ne(async()=>{await u(p.operation.operationType),await P(),I.value=p.operation.operationPositions.reduce((T,f)=>T+f.amount,0)}),K(p,T=>{T.isOpen||c()}),K(m,async T=>{l.value.operationType=T,await u(T),await P(),l.value.operationPositions=l.value.operationPositions?.map(f=>({...f,expenseCategoryId:null}))||[{amount:0,counterPartyId:null,expenseCategoryId:null,operationId:p.operation.id}]},{deep:!0}),K(l,T=>{I.value=T.operationPositions?T.operationPositions.reduce((f,N)=>f+N.amount,0):0},{deep:!0}),(T,f)=>{const N=me,H=Ce,Z=pe,L=ue,de=ie,le=re,M=ve,te=fe,Ue=Me,$e=Ke,ge=Xe,ye=Pe,oe=q,j=ce,xe=_e;return n(),C(xe,{open:T.isOpen,"onUpdate:open":f[3]||(f[3]=O=>U("update:isOpen",O))},{default:t(()=>[e(j,{class:"max-w-[1200px]"},{default:t(()=>[e(Z,null,{default:t(()=>[e(N,null,{default:t(()=>f[4]||(f[4]=[o("Редактирование операции",-1)])),_:1,__:[4]}),e(H)]),_:1}),r("div",$a,[r("div",ka,[r("div",Ia,[e(le,{modelValue:m.value,"onUpdate:modelValue":f[0]||(f[0]=O=>m.value=O)},{default:t(()=>[e(de,{class:"w-full"},{default:t(()=>[e(L,{class:"w-full",value:"Поступление"},{default:t(()=>f[5]||(f[5]=[o("Поступление",-1)])),_:1,__:[5]}),e(L,{class:"w-full",value:"Выплата"},{default:t(()=>f[6]||(f[6]=[o("Выплата",-1)])),_:1,__:[6]}),e(L,{class:"w-full",value:"Начисление"},{default:t(()=>f[7]||(f[7]=[o("Начисление",-1)])),_:1,__:[7]})]),_:1})]),_:1},8,["modelValue"])]),r("div",Va,[e(M,{modelValue:l.value.operationDate,"onUpdate:modelValue":f[1]||(f[1]=O=>l.value.operationDate=O),type:"date",placeholder:"Дата операции",class:R(l.value.operationDate?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"]),e(te,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>f[8]||(f[8]=[o(" Дата операции ",-1)])),_:1,__:[8]})]),r("div",Ta,[e(Ue,{modelValue:l.value.payPurpose,"onUpdate:modelValue":f[2]||(f[2]=O=>l.value.payPurpose=O),placeholder:"Назначение платежа"},null,8,["modelValue"]),l.value.payPurpose?(n(),C(te,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>f[9]||(f[9]=[o(" Назначение платежа ",-1)])),_:1,__:[9]})):z("",!0)])]),r("div",Da,[r("div",ha,[r("div",Fa,[e(M,{value:I.value,type:"number",placeholder:"Общая сумма",disabled:"",class:"bg-gray-100"},null,8,["value"]),e(te,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>f[10]||(f[10]=[o(" Общая сумма ",-1)])),_:1,__:[10]})]),e($e,{onCategoryCreated:b}),e(ge,{onCounterpartyCreated:B})]),(n(!0),k(F,null,S(l.value.operationPositions,(O,Ae)=>(n(),k("div",{key:Ae,class:"flex gap-2 items-center"},[r("div",Sa,[e(M,{modelValue:O.amount,"onUpdate:modelValue":X=>O.amount=X,modelModifiers:{number:!0},type:"number",placeholder:"Сумма",class:R(O.amount>0?"":"outline-1 outline-rose-300")},null,8,["modelValue","onUpdate:modelValue","class"]),e(te,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>f[11]||(f[11]=[o(" Сумма ",-1)])),_:1,__:[11]})]),r("div",Ma,[e(te,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>f[12]||(f[12]=[o(" Статья ",-1)])),_:1,__:[12]}),e(ye,{class:"min-w-[200px] w-[200px] overflow-hidden",items:s.value.map(X=>({value:X.id,label:X.name})),label:s.value.find(X=>X.id===O.expenseCategoryId)?.name??"Выбрать","model-value":O.expenseCategoryId,onSelectedItem:X=>O.expenseCategoryId=X},null,8,["items","label","model-value","onSelectedItem"])]),r("div",Aa,[e(te,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:t(()=>f[13]||(f[13]=[o(" Контрагент ",-1)])),_:1,__:[13]}),e(ye,{class:"min-w-[250px] w-[250px] overflow-hidden",items:y.value.map(X=>({value:X.id,label:X.title})),label:y.value.find(X=>X.id===O.counterPartyId)?.title??"Не выбран","model-value":O.counterPartyId,onSelectedItem:X=>O.counterPartyId=X},null,8,["items","label","model-value","onSelectedItem"])]),e(oe,{variant:"destructive",disabled:l.value.operationPositions?.length===1,onClick:X=>V(Ae)},{default:t(()=>f[14]||(f[14]=[o(" X ",-1)])),_:2,__:[14]},1032,["disabled","onClick"])]))),128)),r("div",Oa,[e(oe,{class:"ml-auto",onClick:$},{default:t(()=>f[15]||(f[15]=[o("Добавить позицию",-1)])),_:1,__:[15]})])])]),r("div",Ea,[e(oe,{variant:"destructive",class:"mr-auto",onClick:E},{default:t(()=>f[16]||(f[16]=[o("Удалить",-1)])),_:1,__:[16]}),e(oe,{variant:"outline",onClick:c},{default:t(()=>f[17]||(f[17]=[o("Отмена",-1)])),_:1,__:[17]}),e(oe,{disabled:!v.value||!i.value,onClick:g},{default:t(()=>f[18]||(f[18]=[o("Сохранить",-1)])),_:1,__:[18]},8,["disabled"])])]),_:1})]),_:1},8,["open"])}}});function be(x){const w=[[/ОБЩЕСТВО\s+С\s+ОГРАНИЧЕННОЙ\s+ОТВЕТСТВЕННОСТЬЮ|Общество\s+с\s+ограниченной\s+ответственностью/gi,"ООО"],[/ИНДИВИДУАЛЬНЫЙ\s+ПРЕДПРИНИМАТЕЛЬ|Индивидуальный\s+предприниматель/gi,"ИП"],[/АКЦИОНЕРНОЕ\s+ОБЩЕСТВО|Акционерное\s+общество/gi,"АО"],[/ЗАКРЫТОЕ\s+АКЦИОНЕРНОЕ\s+ОБЩЕСТВО|Закрытое\s+акционерное\s+общество/gi,"ЗАО"],[/ОТКРЫТОЕ\s+АКЦИОНЕРНОЕ\s+ОБЩЕСТВО|Открытое\s+акционерное\s+общество/gi,"ОАО"]];let _=x;for(const[p,s]of w)_=_.replace(p,s);return _.trim().replace(/\s+/g," ")}const Na=[{accessorKey:"operationDate",ruName:"Дата",header:({column:x})=>G(q,{variant:"ghost",onClick:()=>x.toggleSorting(x.getIsSorted()==="asc"),class:"text-center h-full w-full"},()=>["Дата",G(se,{class:"ml-2 h-4 w-4"})]),cell:({row:x})=>G("div",{class:"text-center"},(()=>{const w=x.getValue("operationDate");return kt(w)})()),sortingFn:(x,w,_)=>{const p=new Date(x.getValue(_)),s=new Date(w.getValue(_));return p.getTime()-s.getTime()}},{accessorKey:"operationType",ruName:"Тип",header:({column:x})=>G(q,{variant:"ghost",onClick:()=>x.toggleSorting(x.getIsSorted()==="asc"),class:"text-center h-full w-full"},()=>["Тип",G(se,{class:"ml-2 h-4 w-4"})]),cell:({row:x})=>{const w=x.getValue("operationType");return G("div",{class:`text-center ${w==="Выплата"?"text-red-500":w==="Поступление"?"text-green-600":"text-neutral-400"} w-[200px]`},w)},filterFn:(x,w,_)=>_.includes(x.getValue(w)),sortingFn:(x,w,_)=>{const p=x.getValue(_),s=w.getValue(_);return p.localeCompare(s)}},{accessorKey:"operationPositions",ruName:"Контрагент",header:({column:x})=>G(q,{variant:"ghost",onClick:()=>x.toggleSorting(x.getIsSorted()==="asc"),class:"text-center h-full w-full"},()=>["Контрагент",G(se,{class:"ml-2 h-4 w-4"})]),cell:({row:x})=>{const w=x.getValue("operationPositions");return G("div",{class:"text-center text-wrap"},w.length>1?`${w.length} контрагента`:be(w[0]?.counterParty?.title||""))},filterFn:(x,w,_)=>x.getValue(w).some(s=>_.includes(be(s.counterParty?.title||""))),sortingFn:(x,w,_)=>{const p=x.getValue(_),s=w.getValue(_),y=p[0]?.counterParty?.title?be(p[0].counterParty.title):"",U=s[0]?.counterParty?.title?be(s[0].counterParty.title):"";return y.localeCompare(U)}},{accessorKey:"operationPositions",ruName:"Статья",header:({column:x})=>G(q,{variant:"ghost",onClick:()=>x.toggleSorting(x.getIsSorted()==="asc"),class:"text-center h-full w-full"},()=>["Статья",G(se,{class:"ml-2 h-4 w-4"})]),cell:({row:x})=>{const w=x.getValue("operationPositions");return G("div",{class:"text-center text-wrap"},w.length>1?`${w.length} статьи`:w[0]?.expenseCategory?.name??"Нет статьи")},filterFn:(x,w,_)=>x.getValue(w).some(s=>_.includes(s.expenseCategory?.name||"Нет статьи")),sortingFn:(x,w,_)=>{const p=x.getValue(_),s=w.getValue(_),y=p[0]?.expenseCategory?.name||"Нет статьи",U=s[0]?.expenseCategory?.name||"Нет статьи";return y.localeCompare(U)}},{accessorKey:"payPurpose",ruName:"Назначение",header:({column:x})=>G(q,{variant:"ghost",onClick:()=>x.toggleSorting(x.getIsSorted()==="asc"),class:"text-center h-full w-full"},()=>["Назначение",G(se,{class:"ml-2 h-4 w-4"})]),cell:({row:x})=>G("div",{class:"text-left w-[400px] text-wrap"},[G("div",{},x.getValue("payPurpose")||"")]),filterFn:(x,w,_)=>x.getValue(w)?.toLowerCase().includes(_.toLowerCase()),sortingFn:(x,w,_)=>{const p=x.getValue(_)||"",s=w.getValue(_)||"";return p.localeCompare(s)}},{accessorKey:"operationPositions",ruName:"Сумма",header:({column:x})=>G(q,{variant:"ghost",onClick:()=>x.toggleSorting(x.getIsSorted()==="asc"),class:"text-center h-full w-full"},()=>["Сумма",G(se,{class:"ml-2 h-4 w-4"})]),cell:({row:x})=>{const w=x.getValue("operationType"),p=x.getValue("operationPositions").reduce((U,l)=>U+(l.amount||0),0),s=w==="Выплата"?"text-red-500":w==="Поступление"?"text-green-600":"text-neutral-400",y=`${w==="Выплата"?"-":w==="Поступление"?"+":"±"}${J(+p.toFixed(2))} ₽`;return G("div",{class:`text-center font-semibold ${s}`},y)},filterFn:(x,w,_)=>{const s=x.getValue(w).reduce((l,d)=>l+(d.amount||0),0),[y,U]=_;return s>=y&&s<=U},sortingFn:(x,w,_)=>{const p=x.getValue(_),s=w.getValue(_),y=p.reduce((l,d)=>l+(d.amount||0),0),U=s.reduce((l,d)=>l+(d.amount||0),0);return y-U}}],La={class:"flex items-center gap-2"},ja={class:"w-[280px]"},Ra={class:"mt-1"},Ha=Y({__name:"Operations",setup(x){const{$useApi:w}=ee(),_=h(new Date().toISOString().slice(0,7)),p=h([new Date(_.value).toISOString().slice(0,10),new Date(+_.value.split("-")[0],+_.value.split("-")[1],1).toISOString().slice(0,10)]),s=h([]),y=h(""),U=h(!0),l=h(null),d=h([]),m=h([]),v=h(!1),I=async()=>{const{data:E}=await w.get("planfact/accounts");s.value=E.map(A=>({value:A.id,label:A.name})),E.length>0&&(y.value=E[0].id)},i=async()=>{if(y.value)try{const E=new Date(p.value[0]).toISOString().slice(0,10),A=new Date(p.value[1]).toISOString().slice(0,10),{data:u}=await w.get("planfact/operations",{params:{start:E,end:A,limit:5e3,accountId:y.value}});d.value=u.operations,m.value=u.contragents,d.value.reverse()}catch(E){console.error(E),Q({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить операции."})}},c=E=>{const A=d.value.find(u=>u.operationId===E);l.value=A||null,v.value=!0},g=E=>E.map(A=>{const u=new Date(A).toISOString().slice(0,10).split("-"),P=u[2],$=u[1],V=u[0];return`${P}.${$}.${V}`}).join(" / ");return ne(async()=>{await I(),y.value&&(await i(),U.value=!1)}),K([p,y],async([E,A])=>{U.value||!A||await i()},{deep:!0}),(E,A)=>{const u=ue,P=ie,$=re,V=ze,b=_a,B=Ua,T=Ba;return n(),k("div",null,[r("div",La,[r("div",ja,[e(a(Ge),{modelValue:a(p),"onUpdate:modelValue":A[0]||(A[0]=f=>ae(p)?p.value=f:null),range:"","enable-time-picker":!1,"auto-apply":"",locale:"ru",placeholder:"Выбрать дни","select-text":"Готово","cancel-text":"Закрыть",class:"grow",format:g,clearable:!1},null,8,["modelValue"])]),e($,{modelValue:a(y),"onUpdate:modelValue":A[1]||(A[1]=f=>ae(y)?y.value=f:null)},{default:t(()=>[e(P,null,{default:t(()=>[(n(!0),k(F,null,S(a(s),(f,N)=>(n(),C(u,{key:N,value:f.value},{default:t(()=>[o(D(f.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(V,{onAccountCreated:I})]),r("div",Ra,[(n(),C(b,{key:a(y),"account-id":+a(y),onOperationCreated:i},null,8,["account-id"])),(n(),C(B,{key:a(d).length,columns:a(Na),data:a(d),contragents:a(m),onItemClicked:c},null,8,["columns","data","contragents"]))]),a(l)?(n(),C(T,{key:a(l).id,operation:a(l),"is-open":a(v),"onUpdate:isOpen":A[2]||(A[2]=f=>v.value=f),onDelete:i,onSave:i},null,8,["operation","is-open"])):z("",!0)])}}}),Ga=Y({__name:"Categories",setup(x){const{$useApi:w}=ee(),_=["Доходы","Расходы","Активы","Обязательства","Капитал"],p=h(_[0]),s=h([]);return ne(async()=>{try{const{data:U}=await w.get("planfact/categories");s.value=U}catch(U){console.error("Ошибка загрузки категорий:",U)}}),(U,l)=>{const d=ue,m=ie,v=Be,I=re;return n(),k("div",null,[e(I,{modelValue:a(p),"onUpdate:modelValue":l[0]||(l[0]=i=>ae(p)?p.value=i:null)},{default:t(()=>[e(m,null,{default:t(()=>[(n(),k(F,null,S(_,i=>e(d,{key:i,value:i},{default:t(()=>[o(D(i),1)]),_:2},1032,["value"])),64))]),_:1}),(n(),k(F,null,S(_,i=>e(v,{key:i,value:i},{default:t(()=>[r("ul",null,[(n(!0),k(F,null,S(a(s).filter(c=>c.type===i),c=>(n(),k("li",{key:c.id},D(c.title),1))),128))])]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])])}}}),za={class:"space-y-2"},Ka={class:"w-[180px] mt-[-47px] ml-[220px]"},Xa={class:"px-3"},Ja={class:R(["flex justify-center items-center gap-1"])},Qa={class:R(["flex justify-center items-center gap-1"])},qa={class:R(["flex justify-center items-center gap-1"])},Ya={class:R(["flex justify-center items-center gap-1"])},Wa={class:R(["flex justify-center items-center gap-1"])},Za=Y({__name:"PL",setup(x){const{$useApi:w}=ee(),{toast:_}=Ie(),p=h({month:new Date().getMonth(),year:new Date().getFullYear()}),s=h({income:{allDealsPrice:0,sendDeals:0,revenue:0},expenses:{production:{supplies:[],productionSalaries:[]},commercial:{adExpenses:[{data:{title:"string",data:[]},totals:[]}],commercialSalaries:[]},design:{designSalaries:[]},adExpenses:[],totals:{data:[],totals:[]}}}),y=h(new Date().toISOString().slice(0,7)),U=async()=>{try{const l=await w.get("planfact/pl",{params:{period:y.value}});s.value=l.data}catch{_({variant:"destructive",title:"Ошибка загрузки данных",description:"Не удалось загрузить данные P&L. Попробуйте позже."})}};return ne(()=>{U()}),K(y,()=>{U()}),K(p,async l=>{const{month:d,year:m}=l;y.value=new Date(m,d+1).toISOString().slice(0,7),await U()}),W(()=>s.value.expenses.production.supplies||[]),W(()=>s.value.expenses.production.productionSalaries||[]),W(()=>s.value.expenses.design.designSalaries||[]),W(()=>s.value.expenses.adExpenses||[]),(l,d)=>{const m=he,v=De,I=Te,i=Se,c=Fe,g=Ve,E=Le,A=Ne;return n(),k("div",za,[r("div",Ka,[e(a(Ge),{modelValue:a(p),"onUpdate:modelValue":d[0]||(d[0]=u=>ae(p)?p.value=u:null),"month-picker":"","auto-apply":"",locale:"ru","select-text":"Готово","cancel-text":"Закрыть",clearable:!1},null,8,["modelValue"])]),e(A,{class:""},{default:t(()=>[e(E,{class:"space-y-1 px-0 py-3"},{default:t(()=>[r("div",Xa,[e(g,{class:"bg-slate-100 rounded-sm overflow-hidden"},{default:t(()=>[e(I,null,{default:t(()=>[e(v,{class:"bg-slate-200 hover:bg-slate-200"},{default:t(()=>[e(m,{class:"text-xl"},{default:t(()=>d[1]||(d[1]=[o("Доходы",-1)])),_:1,__:[1]}),(n(!0),k(F,null,S(a(s).periods,(u,P)=>(n(),C(m,{key:P,class:"text-center"},{default:t(()=>[o(D(u),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(c,{class:"font-semibold"},{default:t(()=>[e(v,null,{default:t(()=>[e(i,null,{default:t(()=>d[2]||(d[2]=[o("Оформленные заказы",-1)])),_:1,__:[2]}),(n(!0),k(F,null,S(a(s).income.allDealsPrice,(u,P)=>(n(),C(i,{key:P,class:"text-center"},{default:t(()=>[r("div",{class:R(["flex justify-center items-center gap-1",u.changePercent<0?"text-red-600/90":"",u.changePercent>0?"text-green-700/90":"",u.changePercent===0?"text-slate-500/90":""])},[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(u.value)+"₽"),1),r("span",null," ("+D(u.changePercent)+"%) ",1)],2)]),_:2},1024))),128))]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>d[3]||(d[3]=[o("Отправленные заказы",-1)])),_:1,__:[3]}),(n(!0),k(F,null,S(a(s).income.sendDeals,(u,P)=>(n(),C(i,{key:P,class:"text-center"},{default:t(()=>[r("div",{class:R(["flex justify-center items-center gap-1",u.changePercent<0?"text-red-600/90":"",u.changePercent>0?"text-green-700/90":"",u.changePercent===0?"text-slate-500/90":""])},[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(u.value)+"₽"),1),r("span",null," ("+D(u.changePercent)+"%) ",1)],2)]),_:2},1024))),128))]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>d[4]||(d[4]=[o("Выручка",-1)])),_:1,__:[4]}),(n(!0),k(F,null,S(a(s).income.revenue,(u,P)=>(n(),C(i,{key:P,class:"text-center"},{default:t(()=>[r("div",{class:R(["flex justify-center items-center gap-1",u.changePercent<0?"text-red-600/90":"",u.changePercent>0?"text-green-700/90":"",u.changePercent===0?"text-slate-500/90":""])},[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(u.value)+"₽"),1),r("span",null," ("+D(u.changePercent)+"%) ",1)],2)]),_:2},1024))),128))]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(v,{class:"text-xl text-center font-semibold bg-white hover:bg-white py-1 pb-2 border-t-1 rounded-t-xl"},{default:t(()=>[e(m,{colspan:"5",class:"text-center h-4"})]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(v,{class:"bg-slate-200 hover:bg-slate-200"},{default:t(()=>[e(m,{class:"text-xl"},{default:t(()=>d[5]||(d[5]=[o("Расходы ",-1)])),_:1,__:[5]}),(n(!0),k(F,null,S(a(s).periods,(u,P)=>(n(),C(m,{key:P,class:"text-center"},{default:t(()=>[o(D(u),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(c,null,{default:t(()=>[(n(!0),k(F,null,S(a(s).expenses.totals.data,(u,P)=>(n(),C(v,{key:P},{default:t(()=>[e(i,null,{default:t(()=>[r("div",null,[r("span",null,D(u.title),1)])]),_:2},1024),(n(!0),k(F,null,S(u.data,($,V)=>(n(),C(i,{key:V,class:"text-center"},{default:t(()=>[r("div",Ja,[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(+$.value.toFixed(2))+"₽"),1),r("span",null," ("+D($.changePercent)+"%) ",1)])]),_:2},1024))),128))]),_:2},1024))),128)),e(v,{class:"text-center bg-slate-300 hover:bg-slate-300"},{default:t(()=>[e(i,{class:"font-bold text-left"},{default:t(()=>d[6]||(d[6]=[o(" ИТОГО ",-1)])),_:1,__:[6]}),(n(!0),k(F,null,S(a(s).expenses.totals.totals,(u,P)=>(n(),C(i,{key:P},{default:t(()=>[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(+u.value.toFixed(2))+"₽"),1),r("span",null," ("+D(u.changePercent.toFixed(2))+"%) ",1)]),_:2},1024))),128))]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(v,{class:"text-xl text-center font-semibold bg-white hover:bg-white py-1 pb-2 border-t-1 rounded-t-xl"},{default:t(()=>[e(m,{colspan:"5",class:"text-center h-4"})]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(v,{class:"text-xl text-center font-semibold bg-gray-300 hover:bg-gray-300 py-1 pb-2 border-t-1 rounded-t-xl"},{default:t(()=>[e(m,{colspan:"5",class:"text-center"},{default:t(()=>d[7]||(d[7]=[o(" Отдел производства ",-1)])),_:1,__:[7]})]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(v,{class:"bg-slate-200 hover:bg-slate-200"},{default:t(()=>[e(m,{class:"text-xl"},{default:t(()=>d[8]||(d[8]=[o("Расходы на поставки ",-1)])),_:1,__:[8]}),(n(!0),k(F,null,S(a(s).periods,(u,P)=>(n(),C(m,{key:P,class:"text-center"},{default:t(()=>[o(D(u),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(c,null,{default:t(()=>[(n(!0),k(F,null,S(a(s).expenses.production.supplies.data,u=>(n(),C(v,{key:u.label},{default:t(()=>[e(i,null,{default:t(()=>[o(D(u.category),1)]),_:2},1024),(n(!0),k(F,null,S(u.data,(P,$)=>(n(),C(i,{key:$,class:"text-center"},{default:t(()=>[r("div",Qa,[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(+P.value.toFixed(2))+"₽"),1),r("span",null," ("+D(P.changePercent)+"%) ",1)])]),_:2},1024))),128))]),_:2},1024))),128)),e(v,{class:"text-center bg-slate-300 hover:bg-slate-300"},{default:t(()=>[e(i,{class:"font-bold text-left"},{default:t(()=>d[9]||(d[9]=[o(" ИТОГО ",-1)])),_:1,__:[9]}),(n(!0),k(F,null,S(a(s).expenses.production.supplies.totals,u=>(n(),C(i,{key:u},{default:t(()=>[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(+u.value.toFixed(2))+"₽"),1),r("span",null," ("+D(u.changePercent.toFixed(2))+"%) ",1)]),_:2},1024))),128))]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(v,{class:"bg-slate-200 hover:bg-slate-200"},{default:t(()=>[e(m,{class:"text-xl"},{default:t(()=>d[10]||(d[10]=[o("Зарплаты производства ",-1)])),_:1,__:[10]}),(n(!0),k(F,null,S(a(s).periods,(u,P)=>(n(),C(m,{key:P,class:"text-center"},{default:t(()=>[o(D(u),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(c,null,{default:t(()=>[(n(!0),k(F,null,S(a(s).expenses.production.productionSalaries.data,u=>(n(),C(v,{key:u.label},{default:t(()=>[e(i,null,{default:t(()=>[o(D(u.role),1)]),_:2},1024),(n(!0),k(F,null,S(u.data,(P,$)=>(n(),C(i,{key:$,class:"text-center"},{default:t(()=>[r("div",qa,[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(+P.value.toFixed(2))+"₽"),1),r("span",null," ("+D(P.changePercent)+"%) ",1)])]),_:2},1024))),128))]),_:2},1024))),128)),e(v,{class:"text-center bg-slate-300 hover:bg-slate-300"},{default:t(()=>[e(i,{class:"font-bold text-left"},{default:t(()=>d[11]||(d[11]=[o(" ИТОГО ",-1)])),_:1,__:[11]}),(n(!0),k(F,null,S(a(s).expenses.production.productionSalaries.totals,u=>(n(),C(i,{key:u},{default:t(()=>[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(+u.value.toFixed(2))+"₽"),1),r("span",null," ("+D(u.changePercent.toFixed(2))+"%) ",1)]),_:2},1024))),128))]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(v,{class:"text-xl text-center font-semibold bg-white hover:bg-white py-1 pb-2 border-t-1 rounded-t-xl"},{default:t(()=>[e(m,{colspan:"5",class:"text-center h-4"})]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(v,{class:"text-xl text-center font-semibold bg-gray-300 hover:bg-gray-300 py-1 pb-2 border-t-1 rounded-t-xl"},{default:t(()=>[e(m,{colspan:"5",class:"text-center"},{default:t(()=>d[12]||(d[12]=[o(" Коммерческий отдел ",-1)])),_:1,__:[12]})]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(v,{class:"bg-slate-200 hover:bg-slate-200"},{default:t(()=>[e(m,{class:"text-xl"},{default:t(()=>d[13]||(d[13]=[o("Расходы на рекламу ",-1)])),_:1,__:[13]}),(n(!0),k(F,null,S(a(s).periods,(u,P)=>(n(),C(m,{key:P,class:"text-center"},{default:t(()=>[o(D(u),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(c,null,{default:t(()=>[(n(!0),k(F,null,S(a(s).expenses.commercial.adExpenses.data,u=>(n(),C(v,{key:u.title},{default:t(()=>[e(i,null,{default:t(()=>[o(D(u.title),1)]),_:2},1024),(n(!0),k(F,null,S(u.data,(P,$)=>(n(),C(i,{key:$,class:"text-center"},{default:t(()=>[r("div",Ya,[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(+P.value.toFixed(2))+"₽"),1),r("span",null," ("+D(P.changePercent)+"%) ",1)])]),_:2},1024))),128))]),_:2},1024))),128)),e(v,{class:"text-center bg-slate-300 hover:bg-slate-300"},{default:t(()=>[e(i,{class:"font-bold text-left"},{default:t(()=>d[14]||(d[14]=[o(" ИТОГО ",-1)])),_:1,__:[14]}),(n(!0),k(F,null,S(a(s).expenses.commercial.adExpenses.totals,u=>(n(),C(i,{key:u},{default:t(()=>[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(+u.value.toFixed(2))+"₽"),1),r("span",null," ("+D(u.changePercent.toFixed(2))+"%) ",1)]),_:2},1024))),128))]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(v,{class:"bg-slate-200 hover:bg-slate-200"},{default:t(()=>[e(m,{class:"text-xl"},{default:t(()=>d[15]||(d[15]=[o("Зарплаты коммерческого отдела ",-1)])),_:1,__:[15]}),(n(!0),k(F,null,S(a(s).periods,(u,P)=>(n(),C(m,{key:P,class:"text-center"},{default:t(()=>[o(D(u),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(c,null,{default:t(()=>[(n(!0),k(F,null,S(a(s).expenses.commercial.commercialSalaries.data,u=>(n(),C(v,{key:u.role},{default:t(()=>[e(i,null,{default:t(()=>[o(D(u.role),1)]),_:2},1024),(n(!0),k(F,null,S(u.data,(P,$)=>(n(),C(i,{key:$,class:"text-center"},{default:t(()=>[r("div",Wa,[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(+P.value.toFixed(2))+"₽"),1),r("span",null," ("+D(P.changePercent)+"%) ",1)])]),_:2},1024))),128))]),_:2},1024))),128)),e(v,{class:"text-center bg-slate-300"},{default:t(()=>[e(i,{class:"font-bold text-left"},{default:t(()=>d[16]||(d[16]=[o(" ИТОГО ",-1)])),_:1,__:[16]}),(n(!0),k(F,null,S(a(s).expenses.commercial.commercialSalaries.totals,u=>(n(),C(i,{key:u},{default:t(()=>[r("span",null,D(("useMyFormatPrice"in l?l.useMyFormatPrice:a(J))(+u.value.toFixed(2))+"₽"),1),r("span",null," ("+D(u.changePercent.toFixed(2))+"%) ",1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})])}}}),en={class:"relative h-screen hidden-scrollbar"},tn={class:"w-full fixed z-10"},an={class:"h-full flex flex-col p-4 gap-2 mx-[auto] max-w-[2048px] pt-16 min-w-[1024px]"},Hn=Y({__name:"index",setup(x){return Ye({title:"ПланФакт | Easy CRM"}),(w,_)=>{const p=Je,s=ue,y=ie,U=Ot,l=Be,d=Ha,m=Ga,v=Za,I=re;return n(),k("div",en,[r("div",tn,[e(p)]),r("div",an,[e(I,{"default-value":"pl",class:"w-full"},{default:t(()=>[e(y,null,{default:t(()=>[e(s,{value:"Операции"},{default:t(()=>_[0]||(_[0]=[o("Операции",-1)])),_:1,__:[0]}),e(s,{value:"pl"},{default:t(()=>_[1]||(_[1]=[o("ПНЛ",-1)])),_:1,__:[1]}),e(s,{value:"dds"},{default:t(()=>_[2]||(_[2]=[o("ДДС",-1)])),_:1,__:[2]})]),_:1}),e(l,{value:"Счета"},{default:t(()=>[e(U)]),_:1}),e(l,{value:"Операции"},{default:t(()=>[e(d)]),_:1}),e(l,{value:"Учетные статьи"},{default:t(()=>[e(m)]),_:1}),e(l,{value:"pl"},{default:t(()=>[e(v)]),_:1}),e(l,{value:"dds"},{default:t(()=>_[3]||(_[3]=[o(" ДДС ",-1)])),_:1,__:[3]})]),_:1})])])}}});export{Hn as default};
