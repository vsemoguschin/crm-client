import{_ as O}from"./D8Osd5Ax.js";import{a as R,b as S,c as j,d as q,_ as G}from"./B-kig6KZ.js";import{_ as J}from"./Pvv-dh1L.js";import{_ as K,a as Q,b as W}from"./DkMjgWCi.js";import{_ as X}from"./BcuVElyA.js";import{_ as Y}from"./mqOaxR0N.js";import{_ as Z}from"./D9TSNOAg.js";import{e as ee,g as te,r as u,B as w,m as b,o as i,w as o,b as s,d as m,c as f,D as $,a as _,l as t,t as k,F as ae,z as le,A as U,k as oe,H as se}from"./LcRD3ia0.js";const ne={key:0,class:"text-red-500 text-sm"},ie={class:"flex flex-col gap-6 mt-2"},me={class:"relative"},ue={class:"relative"},re={class:"relative"},de={class:"relative"},_e={key:0,class:"flex flex-col gap-2 text-slate-500"},pe={key:0},ce={key:1},$e=ee({__name:"CreateModal",setup(fe){const{$useApi:P}=te(),v=u(!1),p=u(null),x=u(!1),V=u(!0),N=["Терминал Изинеон СБП","Терминал Изинеон","Терминал ИзиБук"],r=u(null),h=u(null),C={terminal:N[0],Name:"Изготовление неоновой вывески",Amount:10,Phone:"",Email:""},a=u({...C});w(()=>a.value.terminal,l=>{a.value.Name=l==="Терминал ИзиБук"?"Изготовление фотокниги":"Изготовление неоновой вывески"},{immediate:!0});const A=async()=>{x.value=!0,p.value=null;try{const l=await P.post("/payments/link",a.value);console.log(l.data),r.value=l.data.link,h.value=l.data.PaymentId}catch(l){const e=l.response?.data?.message||"Ошибка при создании";p.value=e.message}finally{x.value=!1}};w([a],()=>{const{Name:l,Amount:e,Email:d,Phone:c}=a.value;V.value=!(l&&e&&d&&c)},{deep:!0});const T=async l=>{try{await navigator.clipboard.writeText(l),alert("Ссылка успешно скопирована в буфер обмена!")}catch(e){console.error("Не удалось скопировать ссылку:",e),alert("Ошибка при копировании ссылки.")}};return w([a],()=>{const{Name:l,Amount:e,Email:d,Phone:c}=a.value;V.value=!(l&&e&&(d||c))},{deep:!0}),w(v,l=>{l||(a.value={...C},p.value=null,r.value=null)}),(l,e)=>{const d=O,c=R,D=q,E=j,B=W,L=Q,F=K,g=X,y=Y,I=Z,M=J,z=S,H=G;return i(),b(H,{open:t(v),"onUpdate:open":e[5]||(e[5]=n=>se(v)?v.value=n:null)},{default:o(()=>[s(c,{"as-child":""},{default:o(()=>[s(d,null,{default:o(()=>e[6]||(e[6]=[m("Выставить ссылку",-1)])),_:1,__:[6]})]),_:1}),s(z,{class:"max-w-[570px] flex flex-col"},{default:o(()=>[s(E,null,{default:o(()=>[s(D,null,{default:o(()=>e[7]||(e[7]=[m("Создать ссылку на оплату",-1)])),_:1,__:[7]})]),_:1}),t(p)?(i(),f("div",ne,k(t(p)),1)):$("",!0),_("div",ie,[s(F,null,{default:o(()=>[s(L,{class:"flex"},{default:o(()=>[(i(),f(ae,null,le(N,n=>s(B,{key:n,class:"w-full",value:n,onClick:ve=>t(a).terminal=n},{default:o(()=>[m(k(n),1)]),_:2},1032,["value","onClick"])),64))]),_:1})]),_:1}),_("div",me,[s(g,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:o(()=>e[8]||(e[8]=[m(" Название заказа ",-1)])),_:1,__:[8]}),s(y,{modelValue:t(a).Name,"onUpdate:modelValue":e[0]||(e[0]=n=>t(a).Name=n),placeholder:"Название заказа",class:U(t(a).Name?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"])]),_("div",ue,[s(g,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:o(()=>e[9]||(e[9]=[m(" Сумма ",-1)])),_:1,__:[9]}),s(y,{modelValue:t(a).Amount,"onUpdate:modelValue":e[1]||(e[1]=n=>t(a).Amount=n),type:"number",placeholder:"Сумма",class:U(t(a).Amount?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"])]),_("div",re,[t(a).Phone?(i(),b(g,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:o(()=>e[10]||(e[10]=[m(" Номер телефона ",-1)])),_:1,__:[10]})):$("",!0),s(y,{id:"pay-tel",modelValue:t(a).Phone,"onUpdate:modelValue":e[2]||(e[2]=n=>t(a).Phone=n),type:"tel",placeholder:"Номер телефона",class:U(t(a).Phone?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"])]),_("div",de,[t(a).Email?(i(),b(g,{key:0,class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1 whitespace-nowrap"},{default:o(()=>e[11]||(e[11]=[m(" Почта ",-1)])),_:1,__:[11]})):$("",!0),s(y,{modelValue:t(a).Email,"onUpdate:modelValue":e[3]||(e[3]=n=>t(a).Email=n),type:"email",placeholder:"Почта",class:U(t(a).Email?"":"outline-1 outline-rose-300")},null,8,["modelValue","class"])])]),s(M,null,{default:o(()=>[t(r)?(i(),f("div",_e,[s(I,{to:t(r),onClick:e[4]||(e[4]=oe(n=>T(t(r)),["prevent"]))},{default:o(()=>[m(k(t(r)),1)]),_:1},8,["to"]),_("div",null,"Номер платежа: "+k(t(h)),1)])):(i(),b(d,{key:1,disabled:t(V)||t(x),onClick:A},{default:o(()=>[t(x)?(i(),f("span",pe,"Сохранение...")):(i(),f("span",ce,"Создать"))]),_:1},8,["disabled"]))]),_:1})]),_:1})]),_:1},8,["open"])}}});export{$e as _};
