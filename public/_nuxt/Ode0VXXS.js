import{_ as J}from"./Bye7C16d.js";import{_ as K}from"./CprHmdOe.js";import{_ as Q}from"./D0zfKHPR.js";import{a as X,_ as Y}from"./l1eRtAXP.js";import{_ as Z}from"./BhleEUCu.js";import{_ as ee}from"./BND4UK_1.js";import{_ as te}from"./CaiudRgb.js";import{b as A,c as B,a as I,d as P,e as V,_ as O}from"./C6vK2VYI.js";import{u as E}from"./Dt19OLxm.js";import{e as S,g as W,r as x,B as ne,m as F,w as t,o as i,b as e,d as o,t as c,c as f,l as u,F as L,z as R,a as v,i as z,u as oe,H as j}from"./BbheI0mw.js";import{_ as se,a as le,b as ae}from"./BF3m7Vf0.js";import{_ as re}from"./C8Hj2bae.js";import{_ as q}from"./Bh3bOtDY.js";import{_ as G}from"./CHKwxJtM.js";import{_ as ie}from"./DlAUqK2U.js";import"./CDst0A0O.js";import"./B9M8ggfK.js";import"./D0Fd2yXn.js";import"./oLxPQbNe.js";import"./D2GZmoDz.js";import"./CaPtdwNj.js";import"./DVdymwQ5.js";import"./KSX9JOtw.js";import"./ZTyVILcU.js";import"./s39mgViW.js";import"./CJOOd8Dx.js";import"./BR3DQNok.js";import"./odSmgr3d.js";import"./DzJc7hp_.js";import"./CCknexPU.js";import"./CssJESp-.js";const _e={key:0,class:"text-gray-500"},ue={key:1},ce={key:2,class:"text-gray-500"},de=S({__name:"StatsCard",props:{period:{}},setup(M){const{$useApi:k}=W(),w=M,p=x([]),y=x(!1),s=x(null),T=async d=>{y.value=!0,s.value=null;try{const{data:a}=await k.get("wb/orders-stat",{params:{period:d}});p.value=a}catch(a){s.value=a.data||{message:a.message||"Failed to fetch orders"},console.error("Error fetching orders:",a)}finally{y.value=!1}};return ne(()=>w.period,d=>{T(d)},{immediate:!0}),(d,a)=>{const n=X,l=Z,m=Y,_=P,$=I,b=B,g=O,C=V,h=A,D=ee,r=te,H=Q;return i(),F(H,null,{default:t(()=>[e(m,null,{default:t(()=>[e(n,null,{default:t(()=>a[0]||(a[0]=[o("Статистика",-1)])),_:1,__:[0]}),e(l,null,{default:t(()=>[o("За период "+c(d.period),1)]),_:1})]),_:1}),e(D,null,{default:t(()=>[u(y)?(i(),f("div",_e,"Загрузка статистики...")):u(p).length?(i(),f("div",ue,[e(h,null,{default:t(()=>[e(b,null,{default:t(()=>[e($,null,{default:t(()=>[e(_,null,{default:t(()=>a[1]||(a[1]=[o("Статус",-1)])),_:1,__:[1]}),e(_,{class:"text-right"},{default:t(()=>a[2]||(a[2]=[o("Кол-во",-1)])),_:1,__:[2]}),e(_,{class:"text-right"},{default:t(()=>a[3]||(a[3]=[o("Сумма, ₽",-1)])),_:1,__:[3]})]),_:1})]),_:1}),e(C,null,{default:t(()=>[(i(!0),f(L,null,R(u(p),U=>(i(),F($,{key:U.status},{default:t(()=>[e(g,null,{default:t(()=>[o(c(U.status),1)]),_:2},1024),e(g,{class:"text-right"},{default:t(()=>[o(c(U.count),1)]),_:2},1024),e(g,{class:"text-right"},{default:t(()=>[o(c(("useMyFormatPrice"in d?d.useMyFormatPrice:u(E))(+U.totalPrice.toFixed(2))),1)]),_:2},1024)]),_:2},1024))),128)),e($,null,{default:t(()=>[e(g,{class:"font-bold"},{default:t(()=>a[4]||(a[4]=[o("Итого",-1)])),_:1,__:[4]}),e(g,{class:"text-right font-bold"},{default:t(()=>[o(c(u(p).reduce((U,N)=>U+N.count,0)),1)]),_:1}),e(g,{class:"text-right font-bold"},{default:t(()=>[o(c(("useMyFormatPrice"in d?d.useMyFormatPrice:u(E))(+u(p).reduce((U,N)=>U+N.totalPrice,0).toFixed(2))),1)]),_:1})]),_:1})]),_:1})]),_:1})])):(i(),f("div",ce,"Статистика не найдена."))]),_:1}),e(r,null,{default:t(()=>a[5]||(a[5]=[v("span",{class:"text-sm text-gray-500"},"Данные за выбранный месяц",-1)])),_:1,__:[5]})]),_:1})}}}),me={key:0,class:"text-gray-500"},fe={key:1,class:"w-full overflow-auto bg-slate-100 rounded-md"},pe={class:"flex flex-col"},ge={class:"font-bold"},ve={key:2,class:"text-gray-500"},we=S({__name:"WaitingOrders",setup(M){const{$useApi:k}=W(),w=x([]),p=x(0),y=x(!1),s=x(null),T=n=>{const l=new Date(n),_=new Date().getTime()-l.getTime();return Math.floor(_/(1e3*60*60))},d=async()=>{y.value=!0,s.value=null;try{const{data:n}=await k.get("wb/waiting-orders");w.value=n.orders,p.value=n.next||0}catch(n){s.value=n.data||{message:n.message||"Failed to fetch orders"},console.error("Error fetching orders:",n)}finally{y.value=!1}},a=n=>{n?window.open(n,"_blank"):console.error("URL отсутствует")};return z(()=>{d()}),(n,l)=>{const m=P,_=I,$=B,b=O,g=q,C=G,h=V,D=A;return i(),f("div",null,[u(y)?(i(),f("div",me,"Загрузка заказов...")):u(w).length?(i(),f("div",fe,[e(D,null,{default:t(()=>[e($,{class:"bg-white"},{default:t(()=>[e(_,null,{default:t(()=>[e(m,null,{default:t(()=>l[0]||(l[0]=[o("Номер",-1)])),_:1,__:[0]}),e(m,{class:"text-center"},{default:t(()=>l[1]||(l[1]=[o("Изображение",-1)])),_:1,__:[1]}),e(m,null,{default:t(()=>l[2]||(l[2]=[o("Название",-1)])),_:1,__:[2]}),e(m,{class:"text-center"},{default:t(()=>l[3]||(l[3]=[o("Стоимость",-1)])),_:1,__:[3]})]),_:1})]),_:1}),e(h,null,{default:t(()=>[(i(!0),f(L,null,R(u(w),r=>(i(),F(_,{key:r.id},{default:t(()=>[e(b,null,{default:t(()=>[v("div",pe,[v("span",null,c(r.id),1),v("span",ge,c(T(r.createdAt))+" ч. назад ",1),v("span",null," от "+c(new Date(r.createdAt).toLocaleString().slice(0,10)),1)])]),_:2},1024),e(b,null,{default:t(()=>[e(g,{src:r.preview,alt:"Preview",width:"50",height:"50",class:"object-cover rounded cursor-pointer m-auto",onClick:H=>a(r.preview)},null,8,["src","onClick"])]),_:2},1024),e(b,null,{default:t(()=>[o(c(r.article),1)]),_:2},1024),e(b,{class:"text-center"},{default:t(()=>[o(c(r.price)+"р.",1)]),_:2},1024)]),_:2},1024))),128)),e(C)]),_:1})]),_:1})])):(i(),f("div",ve,"Заказы не найдены."))])}}}),be={key:0,class:"text-gray-500"},xe={key:1,class:"w-full overflow-auto bg-slate-100 rounded-md"},ye={class:"flex flex-col"},$e={class:"font-bold"},Ue={key:2,class:"text-gray-500"},Te=S({__name:"newOrders",setup(M){const{$useApi:k}=W(),w=x([]),p=x(0),y=x(!1),s=x(null),T=n=>{const l=new Date(n),_=new Date().getTime()-l.getTime();return Math.floor(_/(1e3*60*60))},d=async()=>{y.value=!0,s.value=null;try{const{data:n}=await k.get("wb/new-orders");w.value=n.orders,p.value=n.next||0}catch(n){s.value=n.data||{message:n.message||"Failed to fetch orders"},console.error("Error fetching orders:",n)}finally{y.value=!1}},a=n=>{n?window.open(n,"_blank"):console.error("URL отсутствует")};return z(()=>{d()}),(n,l)=>{const m=P,_=I,$=B,b=O,g=q,C=G,h=V,D=A;return i(),f("div",null,[u(y)?(i(),f("div",be,"Загрузка заказов...")):u(w).length?(i(),f("div",xe,[e(D,null,{default:t(()=>[e($,{class:"bg-white"},{default:t(()=>[e(_,null,{default:t(()=>[e(m,null,{default:t(()=>l[0]||(l[0]=[o("Номер",-1)])),_:1,__:[0]}),e(m,{class:"text-center"},{default:t(()=>l[1]||(l[1]=[o("Изображение",-1)])),_:1,__:[1]}),e(m,null,{default:t(()=>l[2]||(l[2]=[o("Название",-1)])),_:1,__:[2]}),e(m,{class:"text-center"},{default:t(()=>l[3]||(l[3]=[o("Стоимость",-1)])),_:1,__:[3]})]),_:1})]),_:1}),e(h,null,{default:t(()=>[(i(!0),f(L,null,R(u(w),r=>(i(),F(_,{key:r.id},{default:t(()=>[e(b,null,{default:t(()=>[v("div",ye,[v("span",null,c(r.id),1),v("span",$e,c(T(r.createdAt))+" ч. назад ",1),v("span",null," от "+c(new Date(r.createdAt).toLocaleString().slice(0,10)),1)])]),_:2},1024),e(b,null,{default:t(()=>[e(g,{src:r.preview,alt:"Preview",width:"50",height:"50",class:"object-cover rounded cursor-pointer m-auto",onClick:H=>a(r.preview)},null,8,["src","onClick"])]),_:2},1024),e(b,null,{default:t(()=>[o(c(r.article),1)]),_:2},1024),e(b,{class:"text-center"},{default:t(()=>[o(c(r.price)+"р.",1)]),_:2},1024)]),_:2},1024))),128)),e(C)]),_:1})]),_:1})])):(i(),f("div",Ue,"Заказы не найдены."))])}}}),ke={class:"relative h-screen hidden-scrollbar"},Ce={class:"w-full fixed z-10"},he={class:"h-full flex flex-col p-4 gap-2 mx-[auto] max-w-[2048px] pt-16 min-w-[1024px]"},De={class:"flex gap-4"},Me={class:"flex flex-col gap-2"},Fe={class:"w-full"},Se=S({__name:"index",setup(M){const{$useApi:k}=W();oe({title:"WB | Easy CRM"});const w=x("new"),p=x(new Date().toISOString().slice(0,7));return(y,s)=>{const T=J,d=K,a=de,n=ae,l=le,m=we,_=re,$=Te,b=se;return i(),f("div",ke,[v("div",Ce,[e(T)]),v("div",he,[v("div",De,[v("div",Me,[e(d,{modelValue:u(p),"onUpdate:modelValue":s[0]||(s[0]=g=>j(p)?p.value=g:null),type:"month",class:"w-[180px] z-10"},null,8,["modelValue"]),e(a,{period:u(p)},null,8,["period"])]),v("div",Fe,[e(b,{modelValue:u(w),"onUpdate:modelValue":s[1]||(s[1]=g=>j(w)?w.value=g:null)},{default:t(()=>[e(l,null,{default:t(()=>[e(n,{value:"waiting"},{default:t(()=>s[2]||(s[2]=[o(" В работе ",-1)])),_:1,__:[2]}),e(n,{value:"new"},{default:t(()=>s[3]||(s[3]=[o(" Новые ",-1)])),_:1,__:[3]}),e(n,{value:"supplies"},{default:t(()=>s[4]||(s[4]=[o(" На сборке ",-1)])),_:1,__:[4]}),e(n,{value:"delivery"},{default:t(()=>s[5]||(s[5]=[o(" В доставке ",-1)])),_:1,__:[5]}),e(n,{value:"archive"},{default:t(()=>s[6]||(s[6]=[o(" Архив ",-1)])),_:1,__:[6]}),e(n,{value:"canceled"},{default:t(()=>s[7]||(s[7]=[o(" Отменнённые ",-1)])),_:1,__:[7]})]),_:1}),e(_,{value:"waiting"},{default:t(()=>[e(m)]),_:1}),e(_,{value:"new"},{default:t(()=>[e($)]),_:1})]),_:1},8,["modelValue"])])])])])}}}),_t=ie(Se,[["__scopeId","data-v-15ae57a3"]]);export{_t as default};
