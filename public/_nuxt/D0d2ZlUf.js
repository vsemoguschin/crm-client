import K from"./ROxBBV8N.js";import{_ as P}from"./CDst0A0O.js";import{_ as Q,a as W,b as X,c as Y,d as Z}from"./cStEOrWd.js";import{_ as h}from"./BHuR11Jx.js";import{_ as ee}from"./DiZ4QL0M.js";import{_ as te}from"./C30fSUvl.js";import{_ as le,a as ae,b as oe,c as se,d as ne}from"./JYeLPbKT.js";import{_ as de}from"./DLLw9AXE.js";import{_ as ie}from"./CprHmdOe.js";import{_ as ue}from"./QXfa84Px.js";import{e as _e,g as me,r as N,B as z,c,b as t,w as l,H as re,l as s,o as v,a as d,d as n,F as $,z as k,t as S,A as pe}from"./BbheI0mw.js";const fe={class:"flex flex-col gap-5 mt-3"},ce={class:"relative"},ve={class:"relative"},xe={class:"flex gap-2"},ge={class:"relative w-full"},Ve={class:"relative w-full"},Ue={class:"relative"},be={class:"relative"},we={class:"relative"},ye={class:"relative"},De={class:"flex justify-between w-full"},He=_e({__name:"CreateModal",props:{deal:{}},emits:["delivery-created"],setup(A,{emit:F}){const{$useApi:C}=me(),H=A,x=["СДЕК","ПОЧТА РОССИИ","Яндекс","Балтийский курьер","Самовывоз","ТК КИТ","ПЭТ","Боксбери","Деловые линии"],T=["Создана","Отправлена","Вручена","Возврат"],g=["Платно","Бесплатно","Досыл"],B={id:0,dealId:H.deal.id,method:x[0],type:g[0],description:"",track:"",status:"Создана",price:0,date:"",deliveredDate:""},a=N({...B}),_=N(!1),L=F,M=async()=>{await C.post("/deliveries/",{...a.value}),L("delivery-created"),_.value=!1};return z(_,r=>{r||(a.value=B)}),z(()=>[a.value.method,a.value.track],async([r,e],[I,p])=>{if(r==="СДЕК"&&e){const i=await C.get("deliveries/checkTrack",{params:{track:e}});console.log("res",i.data),i.data?(a.value.price=i.data.price,a.value.status=i.data.status,a.value.date=i.data.send_date,a.value.deliveredDate=i.data.delivered_date):(a.value.price=0,a.value.status="Создана",a.value.date=new Date().toISOString().slice(0,10),a.value.deliveredDate="")}}),(r,e)=>{const I=K,p=P,i=W,O=Z,j=h,E=Y,u=te,V=oe,U=ae,b=ne,w=de,y=se,D=le,f=ie,G=ue,R=ee,q=X,J=Q;return v(),c("div",null,[t(J,{open:s(_),"onUpdate:open":e[9]||(e[9]=o=>re(_)?_.value=o:null)},{default:l(()=>[t(i,{"as-child":""},{default:l(()=>[t(p,{class:"h-5 w-5 px-0 py-2"},{default:l(()=>[t(I,{name:"akar-icons:plus",color:"white",size:"15px"})]),_:1})]),_:1}),t(q,{class:"flex flex-col w-[400px]"},{default:l(()=>[t(E,null,{default:l(()=>[t(O,null,{default:l(()=>e[10]||(e[10]=[n("Добавить доставку",-1)])),_:1,__:[10]}),t(j,null,{default:l(()=>e[11]||(e[11]=[n(' Заполни все поля и нажми "Сохранить" ',-1)])),_:1,__:[11]})]),_:1}),d("div",fe,[d("div",ce,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[12]||(e[12]=[n("Способ доставки",-1)])),_:1,__:[12]}),t(D,{modelValue:s(a).method,"onUpdate:modelValue":e[0]||(e[0]=o=>s(a).method=o)},{default:l(()=>[t(U,null,{default:l(()=>[t(V)]),_:1}),t(y,null,{default:l(()=>[(v(),c($,null,k(x,(o,m)=>t(w,{key:x[m]},{default:l(()=>[t(b,{value:o},{default:l(()=>[n(S(o),1)]),_:2},1032,["value"])]),_:2},1024)),64))]),_:1})]),_:1},8,["modelValue"])]),d("div",ve,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[13]||(e[13]=[n("Статус доставки",-1)])),_:1,__:[13]}),t(D,{modelValue:s(a).status,"onUpdate:modelValue":e[1]||(e[1]=o=>s(a).status=o)},{default:l(()=>[t(U,null,{default:l(()=>[t(V)]),_:1}),t(y,null,{default:l(()=>[(v(),c($,null,k(T,(o,m)=>t(w,{key:T[m]},{default:l(()=>[t(b,{value:o},{default:l(()=>[n(S(o),1)]),_:2},1032,["value"])]),_:2},1024)),64))]),_:1})]),_:1},8,["modelValue"])]),d("div",xe,[d("div",ge,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[14]||(e[14]=[n("Дата отправки",-1)])),_:1,__:[14]}),t(f,{modelValue:s(a).date,"onUpdate:modelValue":e[2]||(e[2]=o=>s(a).date=o),type:"date",class:pe(s(a).date?"":"outline outline-1 outline-rose-300")},null,8,["modelValue","class"])]),d("div",Ve,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[15]||(e[15]=[n("Дата вручения",-1)])),_:1,__:[15]}),t(f,{modelValue:s(a).deliveredDate,"onUpdate:modelValue":e[3]||(e[3]=o=>s(a).deliveredDate=o),type:"date",min:s(a).date},null,8,["modelValue","min"])])]),d("div",Ue,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[16]||(e[16]=[n("Оплата",-1)])),_:1,__:[16]}),t(D,{modelValue:s(a).type,"onUpdate:modelValue":e[4]||(e[4]=o=>s(a).type=o)},{default:l(()=>[t(U,null,{default:l(()=>[t(V)]),_:1}),t(y,null,{default:l(()=>[(v(),c($,null,k(g,(o,m)=>t(w,{key:g[m]},{default:l(()=>[t(b,{value:o},{default:l(()=>[n(S(o),1)]),_:2},1032,["value"])]),_:2},1024)),64))]),_:1})]),_:1},8,["modelValue"])]),d("div",be,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[17]||(e[17]=[n("Стоимость доставки",-1)])),_:1,__:[17]}),t(f,{modelValue:s(a).price,"onUpdate:modelValue":e[5]||(e[5]=o=>s(a).price=o),type:"number",class:"col-span-3"},null,8,["modelValue"])]),d("div",we,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[18]||(e[18]=[n("Трек",-1)])),_:1,__:[18]}),t(f,{modelValue:s(a).track,"onUpdate:modelValue":e[6]||(e[6]=o=>s(a).track=o),class:"col-span-3"},null,8,["modelValue"])]),d("div",ye,[t(u,{class:"font-medium text-slate-400 absolute left-2 top-[-13px] bg-white rounded-md p-1"},{default:l(()=>e[19]||(e[19]=[n("Доп. информация",-1)])),_:1,__:[19]}),t(G,{modelValue:s(a).description,"onUpdate:modelValue":e[7]||(e[7]=o=>s(a).description=o),placeholder:"Информация о доставке"},null,8,["modelValue"])])]),t(R,{class:"w-full"},{default:l(()=>[d("div",De,[t(p,{onClick:e[8]||(e[8]=()=>_.value=!1)},{default:l(()=>e[20]||(e[20]=[n(" Отменить ",-1)])),_:1,__:[20]}),t(p,{onClick:M},{default:l(()=>e[21]||(e[21]=[n(" Сохранить ",-1)])),_:1,__:[21]})])]),_:1})]),_:1})]),_:1},8,["open"])])}}});export{He as _};
